{"version":3,"sources":["webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./node_modules/gantt-schedule-timeline-calendar/dist/index.esm.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/pages/home/list/TimelineList.vue?920d","webpack:///node_modules/vue-gantt-schedule-timeline-calendar/src/components/GSTC.vue","webpack:///./node_modules/vue-gantt-schedule-timeline-calendar/src/components/GSTC.vue?9027","webpack:///./node_modules/vue-gantt-schedule-timeline-calendar/src/components/GSTC.vue?ff3d","webpack:///./node_modules/vue-gantt-schedule-timeline-calendar/src/components/GSTC.vue","webpack:///src/pages/home/list/TimelineList.vue","webpack:///./src/pages/home/list/TimelineList.vue?56af","webpack:///./src/pages/home/list/TimelineList.vue"],"names":["$forEach","forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","module","exports","callbackfn","this","arguments","length","undefined","$","target","proto","forced","directive","f","args","d","isDirective","Directive","isClass","_part","o","isCEPolyfill","window","customElements","polyfillWrapFlushCallback","reparentNodes","container","start","end","before","n","nextSibling","insertBefore","removeNodes","removeChild","noChange","nothing","marker","String","Math","random","slice","nodeMarker","markerRegex","RegExp","boundAttributeSuffix","Template","result","element","parts","nodesToRemove","stack","walker","document","createTreeWalker","content","lastPartIndex","index","partIndex","strings","values","node","nextNode","nodeType","hasAttributes","attributes","count","i","endsWith","name","stringForPart","lastAttributeNameRegex","exec","attributeLookupName","toLowerCase","attributeValue","getAttribute","removeAttribute","statics","split","push","type","sanitizer","tagName","currentNode","data","indexOf","parent","parentNode","lastIndex","insert","s","createMarker","match","createTextNode","previousSibling","pop","str","suffix","isTemplatePartActive","part","markerNode","createComment","cloneNode","TemplateInstance","template","processor","options","__parts","setValue","commit","fragment","importNode","nodeIndex","nodeName","textPart","handleTextExpression","insertAfterNode","handleAttributeExpressions","adoptNode","upgrade","policy","convertConstantTemplateStringToTrustedHTML","value","w","trustedTypes","TrustedTypes","createPolicy","createHTML","commentMarker","emptyTemplateNode","createElement","TemplateResult","l","html","isCommentBinding","commentOpen","lastIndexOf","attributeMatch","substr","innerHTML","getHTML","SVGTemplateResult","super","getTemplateElement","svgElement","firstChild","isPrimitive","isIterable","Array","isArray","Symbol","iterator","identityFunction","noopSanitizer","_node","_name","_type","sanitizerFactory","setSanitizerFactory","newSanitizer","Error","emptyTextNode","AttributeCommitter","templatePart","kind","dirty","_createPart","AttributePart","v","text","t","_getValue","setAttribute","committer","body","NodePart","__pendingValue","textSanitizer","startNode","appendChild","endNode","ref","__insert","__commitText","__commitTemplateResult","Node","__commitNode","__commitIterable","clear","renderedValue","textNode","templateFactory","update","instance","_clone","itemParts","itemPart","item","appendIntoPart","insertAfterPart","BooleanAttributePart","PropertyCommitter","single","PropertyPart","eventOptionsSupported","addEventListener","removeEventListener","_e","EventPart","eventName","eventContext","__boundHandleEvent","e","handleEvent","newListener","oldListener","shouldRemoveListener","capture","once","passive","shouldAddListener","__options","getOptions","event","call","DefaultTemplateProcessor","prefix","nodeTemplatePart","defaultTemplateProcessor","templateCache","templateCaches","get","stringsArray","WeakMap","keyString","Map","set","key","join","render","Object","assign","appendInto","isBrowser","svg","lithtml","freeze","__proto__","__asyncValues","asyncIterator","TypeError","m","__values","verb","Promise","resolve","reject","settle","done","then","asyncAppend","mapper","async","e_1","_a","value_1_1","value_1","next","itemStartNode","e_1_1","error","return","__asyncValues$1","asyncReplace","templateCaches$1","cache","previousValue","cachedTemplate","nodes","createDocumentFragment","previousClassesCache","classMap","classInfo","previousClasses","className","Set","classList","remove","delete","has","add","previousValues","guard","every","from","ifDefined","createAndInsertPart","containerPart","beforePart","beforeNode","newPart","updatePart","insertPartBefore","removePart","generateMap","list","map","partListCache","keyListCache","repeat","items","keyFnOrTemplate","keyFn","oldParts","oldKeys","newParts","newValues","newKeys","newKeyToIndexMap","oldKeyToIndexMap","oldHead","oldTail","newHead","newTail","oldIndex","oldPart","previousValues$1","emptyTemplateNode$1","unsafeHTML","_state","_infinity","until","state","lastRenderedIndex","previousLength","resolvedValue","detached","Detach","ifFn","detach","toRemove","toUpdate","StyleMap","styleInfo","previous","style","prev","removeProperty","includes","setProperty","Action","isAction","prototype","defaultOptions","axis","threshold","pointerEventsExists","PointerEvent","id","PointerAction","moving","initialX","initialY","lastY","lastX","onPointerDown","bind","onPointerMove","onPointerUp","onWheel","pointerOptions","x","deltaX","y","deltaY","z","deltaZ","mode","deltaMode","lineHeight","parseInt","getComputedStyle","getPropertyValue","scale","height","normalized","normalizeMouseWheelEvent","pageX","pageY","clientX","clientY","screenX","screenY","wheel","changedTouches","button","normalizePointerEvent","onDown","movementX","movementY","abs","handleX","handleY","onMove","onUp","getPublicComponentMethods","components","actionsByInstance","clone","vidoInstance","props","destroy","change","debug","console","groupCollapsed","log","keys","trace","groupEnd","destroyComponent","updateTemplate","newProps","templateProps","component","getActionsCollector","actions","create","exists","action","componentAction","vido","byInstance","getInternalComponentMethods","renderFunction","destroyable","onChangeFunctions","changedProps","leave","fn","schedule","frameId","wrapperFn","argument","executeFrame","apply","requestAnimationFrame","isObject","mergeDeep","sources","source","shift","actns","api","Vido","componentId","app","shouldUpdateCount","resolved","additionalMethods","ActionsCollector","InstanceActionsCollector","actionsInstance","PublicComponentMethods","lastProps","reuseComponents","onDestroy","onChange","componentActions","addMethod","callback","currentComponents","dataArray","getProps","leaveTail","modified","currentLen","dataLen","leaveStartingAt","diff","newComponent","createComponent","InternalComponentMethods","Actions","publicMethods","internalMethods","Slot","Slots","slots","slot","currentShouldUpdateCount","self","flush","createApp","config","App","executeActions","_b","_c","appComponent","_components","_actions","unti","MapShim","getIndex","arr","some","entry","class_1","__entries__","defineProperty","enumerable","configurable","entries","splice","ctx","_i","isBrowser$1","global$1","global","Function","requestAnimationFrame$1","setTimeout","Date","now","trailingTimeout","throttle","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","REFRESH_DELAY","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","addObserver","observer","connect_","removeObserver","observers","disconnect_","changesDetected","updateObservers_","activeObservers","filter","gatherActive","hasActive","broadcastActive","observe","childList","characterData","subtree","disconnect","propertyName","isReflowProperty","getInstance","instance_","defineConfigurable","writable","getWindowOf","ownerGlobal","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","reduce","size","position","getPaddings","paddings","positions_1","getSVGContentRect","bbox","getBBox","width","getHTMLElementContentRect","clientWidth","clientHeight","horizPad","left","right","vertPad","top","bottom","boxSizing","round","isDocumentElement","vertScrollbar","horizScrollbar","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","documentElement","getContentRect","createReadOnlyRect","Constr","DOMRectReadOnly","rect","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","broadcastRect","ResizeObserverEntry","rectInit","contentRect","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","_this","observation","ResizeObserver","method","Main","componentName","subscribe","plugins","initializePlugin","destroyPlugin","hasOwnProperty","componentSubs","ListComponent","ChartComponent","List","Chart","wrapper","unsub","getActions","classNameVerticalScroll","styleMap","verticalScrollStyleMap","verticalScrollAreaStyleMap","verticalScrollBarElement","rowsHeight","resizerActive","updateClassNames","classNames","getClass","heightChange","scrollBarHeight","headerHeight","resizerActiveChange","active","generateTree","bulk","eventInfo","configRows","rows","rowId","fillEmptyRowValues","configItems","itemId","prepareItems","treeMap","makeTreeMap","flatTreeMapById","getFlatTreeMapById","flatTreeMap","flattenTreeMap","prepareExpanded","rowsWithParentsExpanded","getRowsFromIds","getRowsWithParentsExpanded","getRowsHeight","generateVisibleRowsAndItems","visibleRows","compensation","getVisibleRowsAndCompensation","smoothScroll","currentVisibleRows","shouldUpdate","row","visibleItems","_internal","subscribeAll","elementScrollTop","onVisibleRowsChange","scrollTop","generatePeriodDates","period","internalTime","dates","leftGlobal","timePerPixel","startOfLeft","time","date","startOf","valueOf","sub","subPx","leftPx","ceil","rightGlobal","endOf","rightPx","triggerLoadedEvent","Event","dispatchEvent","limitGlobalAndSetCenter","finalFrom","finalTo","centerGlobal","guessPeriod","calendar","zoom","level","levels","formatting","formats","find","format","zoomTo","main","updateLevels","working","recalculateTimes","reason","configTime","chartWidth","oldTime","to","mainLevel","calculatedZoomMode","periodFormat","default","justApply","scrollLeft","totalViewDurationMs","totalViewDurationPx","pow","recalculateFromTo","chartWidthInMs","halfChartInMs","limitScrollLeft","leftInner","rightInner","xCompensation","recalculationTriggerCache","initialized","recalculationIsNeeded","oldValue","newValue","location","port","host","startsWith","oReq","XMLHttpRequest","open","send","JSON","stringify","href","propagate","stopPropagation","preventDefault","handleOnScroll","scroll","scrollInner","scrollHeight","percent","only","prpgt","onScroll","dimensions","ro","ResizeAction","bindScrollElement","LoadedEventAction","bindScrollInnerElement","loaded","chart","actionProps","mainActions","verticalScrollActions","verticalScrollAreaActions","ListColumnComponent","listColumnUnsub","renderExpanderIcons","icons","rendered","iconName","getSVGIconSrc","renderToggleIcons","toggleIconsSrc","close","onListChange","columns","listColumns","onListColumnsDataChange","column","columnId","internalHeight","limitScrollTop","getWidth","expander","padding","listColumn","ListAction","c","BindElementAction","elements","el","ListColumn","componentsSub","ListColumnRowComponent","ListColumnHeaderComponent","rowsComponentName","rowsActions","classNameContainer","calculatedWidth","widthStyleMap","containerStyleMap","scrollCompensationStyleMap","columnPath","columnSub","val","calculateStyle","compensationY","transform","styleSub","ListColumnHeader","prop","visibleRowsChange","getRowHtml","headerActions","rowActions","componentsSubs","ListColumnHeaderResizerComponent","ListColumnHeaderResizer","ListColumnRowExpanderComponent","ListColumnRowExpander","contentClass","withExpander","withoutExpander","componentDotsActions","containerClass","dotsClass","dotClass","dotsStyleMap","inRealTime","path","resizer","dots","columnWidthPath","minWidth","dotsActions","header","dot","BindElementAction$1","ListColumnRow","shouldDetach","rowPath","colPath","rowSub","colSub","onPropsChange","setStyle","parents","parentId","constructor","children","childrenStyle","current","rowCurrentStyle","getHtml","getText","isHTML","ListColumnRowExpanderToggleComponent","toggleUnsub","ListColumnRowExpanderToggle","classNameChild","classNameOpen","classNameClosed","iconChild","iconOpen","iconClosed","expanded","child","closed","expandedChange","isExpanded","expandedSub","rowExpanded","toggle","getIcon","ListToggle","ListToggleWrapper","ev","ChartCalendarComponent","ChartTimelineComponent","Calendar","Timeline","classNameScroll","classNameScrollInner","scrollElement","scrollInnerElement","onScrollHandler","onWheelHandler","xMultiplier","yMultiplier","currentScrollLeft","shiftKey","newScrollLeft","ctrlKey","currentZoom","bindElement","bindInnerScroll","old","innerWidth","scrollActions","scrollAreaActions","ChartCalendar","ChartCalendarDateComponent","currentDateFormat","currentDate","Action$1","BindElementAction$2","ChartCalendarDay","htmlFormatted","visibility","scrollStyleMap","overflow","formatClassName","updateDate","cacheKey","toISOString","timeStart","timeEnd","subtract","finalClassName","timeSub","ChartTimeline","GridComponent","ItemsComponent","ListToggleComponent","Grid","Items","classNameInner","showToggle","innerStyleMap","getCompensationX","yCompensation","getCompensationY","BindElementAction$3","ChartTimelineGrid","GridRowComponent","onBlockCreate","onCreate","rowsComponents","rowsWithBlocks","formatCache","generateBlocks","periodDates","blocks","block","generateRowsComponents","r","BindElementAction$4","ChartTimelineGridRow","GridBlockComponent","rowsBlocksComponents","_d","_f","_g","_h","_j","grid","currentStyle","rowBlock","BindElementAction$5","ChartTimelineGridRowBlock","updateClassName","currentTime","_k","_l","_m","_o","ChartTimelineItems","ItemsRowComponent","createRowComponents","BindElementAction$6","ChartTimelineItemsRow","ItemComponent","itemsSub","itemsPath","itemComponents","updateDom","updateRow","BindElementAction$7","ChartTimelineItemsRowItem","itemLeftPx","itemWidthPx","cutLeft","cutRight","leftCutStyleMap","rightCutStyleMap","updateItem","globalTimeToViewPixelOffset","oldWidth","oldLeft","inViewPort","isItemInViewport","currentRowItemsStyle","cutterName","cutterLeft","cutterRight","labelClassName","isHtml","label","actionNames","generateEmptyActions","generateEmptySlots","after","defaultConfig","plugin","ChartCalendarDate","wrappers","input","rowHeight","icon","display","smooth","expand","spacing","locale","weekdays","weekdaysShort","weekdaysMin","months","monthsShort","weekStart","relativeTime","future","past","mm","h","hh","dd","M","MM","yy","LT","LTS","L","LL","LLL","LLLL","ordinal","utcMode","usageStatistics","globalThis","createCommonjsModule","dayjs_min","commonjsGlobal","u","a","utcOffset","floor","year","month","Number","p","ms","Q","replace","g","pl","D","$L","utc","$u","$offset","parse","$d","NaN","test","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","toString","isSame","isAfter","isBefore","$g","day","hour","minute","second","millisecond","unix","getTime","toDate","$locale","$set","min","daysInMonth","meridiem","YY","YYYY","MMM","MMMM","DD","ddd","dddd","H","HH","A","ss","SSS","Z","getTimezoneOffset","toJSON","toUTCString","extend","isDayjs","en","Ls","local","getUTCFullYear","getUTCMonth","getUTCDate","getUTCDay","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","isUTC","advancedFormat","weekYear","week","weekOfYear","weeks","TimeApi","_dayjs","additionalSpaces","MAX_SAFE_INTEGER","addAdditionalSpace","milliseconds","withCompensation","viewPixelOffset","Matcher","pattern","wchar","segments","starCount","minLength","maxLength","segStartIndex","len","char","substring","Infinity","WildcardObject","obj","delimeter","wildcard","segLeftIndex","segRightIndex","rightPos","rightIsStar","segment","simpleMatch","first","handleArray","currentArr","nextPartIndex","currentWildcardPath","currentPath","goFurther","handleObject","currentObj","ObjectPath","copiedPath","message","info","defaultOptions$1","notRecursive","param","defaultListenerOptions","defaultUpdateOptions","updateAfter","DeepState","listeners","waitingListeners","pathGet","pathSet","scan","searchStr","searchStrLen","startIndex","indices","longer","shorter","cleanNotRecursivePath","shorterPartsLen","getIndicesCount","longerParts","getIndicesOf","charAt","isNotRecursive","paramsInfo","replaced","original","params","fullReplaced","reg","userPaths","paths","hasParams","getParamsInfo","isWildcard","isRecursive","updatePath","waitingListener","all","pathInfo","cutPath","unsubscribers","userPath","unsubscribe","listenerPath","listener","listenersCollection","collCfg","originalPath","getCleanListenersCollection","getListenerCollectionMatch","getCleanListener","getListenersCollection","bulkValue","getParams","debugSubscribe","exclude","returnNotified","alreadyNotified","singleListener","debugTime","debugListener","bulkListener","bulkData","notifyListeners","getSubscribedListeners","currentCuttedPath","restPath","trimPath","bulkListeners","currentRestPath","fullPath","listenerId","getNestedListeners","canBeNested","notifyPath","wildcardScan","wildcardPath","getNotifyOnlyListeners","scanned","getUpdateValues","same","groupedListenersPack","waitingPaths","groupedListeners","executeWaitingListeners","wildcardUpdate","notifyOnly","notifySubscribedListeners","notifyNestedListeners","groupedListener","isObject$1","mergeDeep$1","lib","mergeActions","userConfig","defaultConfigActions","userActions","allActionNames","actionName","stateFromConfig","defaultConfig$1","publicApi","dayjs","getInternalApi","$state","unsubscribes","iconsCache","simple","allActions","parentName","rowParents","childrenId","fastTree","itemParents","generateParents","tree","ids","currentRowsOffset","rowOffset","chartViewBottom","outer","noScroll","offsetHeight","msOverflowStyle","inner","withScroll","toTime","halfTime","btoa","GSTC","getScrollBarHeight","expandedHeight","firstTaskTime","lastTaskTime","maxWidth","setVido","internalApi","fails","METHOD_NAME","_vm","$createElement","_self","$theme","layouts","page","base","tag","view","attrs","on","onState","staticRenderFns","staticClass","mounted","$emit","gstc","$refs","$watch","destroyed","1","2","3","4","5","methods","subs","item1","beforeDestroy"],"mappings":"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","file":"js/timeline-list.94c59e73.js","sourcesContent":["'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * Brands a function as a directive factory function so that lit-html will call\n * the function during template rendering, rather than passing as a value.\n *\n * A _directive_ is a function that takes a Part as an argument. It has the\n * signature: `(part: Part) => void`.\n *\n * A directive _factory_ is a function that takes arguments for data and\n * configuration and returns a directive. Users of directive usually refer to\n * the directive factory as the directive. For example, \"The repeat directive\".\n *\n * Usually a template author will invoke a directive factory in their template\n * with relevant arguments, which will then return a directive function.\n *\n * Here's an example of using the `repeat()` directive factory that takes an\n * array and a function to render an item:\n *\n * ```js\n * html`<ul><${repeat(items, (item) => html`<li>${item}</li>`)}</ul>`\n * ```\n *\n * When `repeat` is invoked, it returns a directive function that closes over\n * `items` and the template function. When the outer template is rendered, the\n * return directive function is called with the Part for the expression.\n * `repeat` then performs it's custom logic to render multiple items.\n *\n * @param f The directive factory function. Must be a function that returns a\n * function of the signature `(part: Part) => void`. The returned function will\n * be called with the part object.\n *\n * @example\n *\n * import {directive, html} from 'lit-html';\n *\n * const immutable = directive((v) => (part) => {\n *   if (part.value !== v) {\n *     part.setValue(v)\n *   }\n * });\n */\nconst directive = (f) => ((...args) => {\n    const d = f(...args);\n    // tslint:disable-next-line:no-any\n    d.isDirective = true;\n    return d;\n});\nclass Directive {\n    constructor() {\n        this.isDirective = true;\n        this.isClass = true;\n    }\n    body(_part) {\n        // body of the directive\n    }\n}\nconst isDirective = (o) => {\n    return o !== undefined && o !== null &&\n        // tslint:disable-next-line:no-any\n        typeof o.isDirective === 'boolean';\n};\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * True if the custom elements polyfill is in use.\n */\nconst isCEPolyfill = typeof window !== 'undefined' ?\n    window.customElements != null &&\n        window.customElements\n            .polyfillWrapFlushCallback !== undefined :\n    false;\n/**\n * Reparents nodes, starting from `start` (inclusive) to `end` (exclusive),\n * into another container (could be the same container), before `before`. If\n * `before` is null, it appends the nodes to the container.\n */\nconst reparentNodes = (container, start, end = null, before = null) => {\n    while (start !== end) {\n        const n = start.nextSibling;\n        container.insertBefore(start, before);\n        start = n;\n    }\n};\n/**\n * Removes nodes, starting from `start` (inclusive) to `end` (exclusive), from\n * `container`.\n */\nconst removeNodes = (container, start, end = null) => {\n    while (start !== end) {\n        const n = start.nextSibling;\n        container.removeChild(start);\n        start = n;\n    }\n};\n\n/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * A sentinel value that signals that a value was handled by a directive and\n * should not be written to the DOM.\n */\nconst noChange = {};\n/**\n * A sentinel value that signals a NodePart to fully clear its content.\n */\nconst nothing = {};\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nconst marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n/**\n * An expression marker used text-positions, multi-binding attributes, and\n * attributes with markup-like text values.\n */\nconst nodeMarker = `<!--${marker}-->`;\nconst markerRegex = new RegExp(`${marker}|${nodeMarker}`);\n/**\n * Suffix appended to all bound attribute names.\n */\nconst boundAttributeSuffix = '$lit$';\n/**\n * An updatable Template that tracks the location of dynamic parts.\n */\nclass Template {\n    constructor(result, element) {\n        this.parts = [];\n        this.element = element;\n        const nodesToRemove = [];\n        const stack = [];\n        // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n        const walker = document.createTreeWalker(element.content, 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */, null, false);\n        // Keeps track of the last index associated with a part. We try to delete\n        // unnecessary nodes, but we never want to associate two different parts\n        // to the same index. They must have a constant node between.\n        let lastPartIndex = 0;\n        let index = -1;\n        let partIndex = 0;\n        const { strings, values: { length } } = result;\n        while (partIndex < length) {\n            const node = walker.nextNode();\n            if (node === null) {\n                // We've exhausted the content inside a nested template element.\n                // Because we still have parts (the outer for-loop), we know:\n                // - There is a template in the stack\n                // - The walker will find a nextNode outside the template\n                walker.currentNode = stack.pop();\n                continue;\n            }\n            index++;\n            if (node.nodeType === 1 /* Node.ELEMENT_NODE */) {\n                if (node.hasAttributes()) {\n                    const attributes = node.attributes;\n                    const { length } = attributes;\n                    // Per\n                    // https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,\n                    // attributes are not guaranteed to be returned in document order.\n                    // In particular, Edge/IE can return them out of order, so we cannot\n                    // assume a correspondence between part index and attribute index.\n                    let count = 0;\n                    for (let i = 0; i < length; i++) {\n                        if (endsWith(attributes[i].name, boundAttributeSuffix)) {\n                            count++;\n                        }\n                    }\n                    while (count-- > 0) {\n                        // Get the template literal section leading up to the first\n                        // expression in this attribute\n                        const stringForPart = strings[partIndex];\n                        // Find the attribute name\n                        const name = lastAttributeNameRegex.exec(stringForPart)[2];\n                        // Find the corresponding attribute\n                        // All bound attributes have had a suffix added in\n                        // TemplateResult#getHTML to opt out of special attribute\n                        // handling. To look up the attribute value we also need to add\n                        // the suffix.\n                        const attributeLookupName = name.toLowerCase() + boundAttributeSuffix;\n                        const attributeValue = node.getAttribute(attributeLookupName);\n                        node.removeAttribute(attributeLookupName);\n                        const statics = attributeValue.split(markerRegex);\n                        this.parts.push({\n                            type: 'attribute',\n                            index,\n                            name,\n                            strings: statics,\n                            sanitizer: undefined\n                        });\n                        partIndex += statics.length - 1;\n                    }\n                }\n                if (node.tagName === 'TEMPLATE') {\n                    stack.push(node);\n                    walker.currentNode = node.content;\n                }\n            }\n            else if (node.nodeType === 3 /* Node.TEXT_NODE */) {\n                const data = node.data;\n                if (data.indexOf(marker) >= 0) {\n                    const parent = node.parentNode;\n                    const strings = data.split(markerRegex);\n                    const lastIndex = strings.length - 1;\n                    // Generate a new text node for each literal section\n                    // These nodes are also used as the markers for node parts\n                    for (let i = 0; i < lastIndex; i++) {\n                        let insert;\n                        let s = strings[i];\n                        if (s === '') {\n                            insert = createMarker();\n                        }\n                        else {\n                            const match = lastAttributeNameRegex.exec(s);\n                            if (match !== null && endsWith(match[2], boundAttributeSuffix)) {\n                                s = s.slice(0, match.index) + match[1] +\n                                    match[2].slice(0, -boundAttributeSuffix.length) + match[3];\n                            }\n                            insert = document.createTextNode(s);\n                        }\n                        parent.insertBefore(insert, node);\n                        this.parts.push({ type: 'node', index: ++index });\n                    }\n                    // If there's no text, we must insert a comment to mark our place.\n                    // Else, we can trust it will stick around after cloning.\n                    if (strings[lastIndex] === '') {\n                        parent.insertBefore(createMarker(), node);\n                        nodesToRemove.push(node);\n                    }\n                    else {\n                        node.data = strings[lastIndex];\n                    }\n                    // We have a part for each match found\n                    partIndex += lastIndex;\n                }\n            }\n            else if (node.nodeType === 8 /* Node.COMMENT_NODE */) {\n                if (node.data === marker) {\n                    const parent = node.parentNode;\n                    // Add a new marker node to be the startNode of the Part if any of\n                    // the following are true:\n                    //  * We don't have a previousSibling\n                    //  * The previousSibling is already the start of a previous part\n                    if (node.previousSibling === null || index === lastPartIndex) {\n                        index++;\n                        parent.insertBefore(createMarker(), node);\n                    }\n                    lastPartIndex = index;\n                    this.parts.push({ type: 'node', index });\n                    // If we don't have a nextSibling, keep this node so we have an end.\n                    // Else, we can remove it to save future costs.\n                    if (node.nextSibling === null) {\n                        node.data = '';\n                    }\n                    else {\n                        nodesToRemove.push(node);\n                        index--;\n                    }\n                    partIndex++;\n                }\n                else {\n                    let i = -1;\n                    while ((i = node.data.indexOf(marker, i + 1)) !== -1) {\n                        // Comment node has a binding marker inside, make an inactive part\n                        // The binding won't work, but subsequent bindings will\n                        // TODO (justinfagnani): consider whether it's even worth it to\n                        // make bindings in comments work\n                        this.parts.push({ type: 'node', index: -1 });\n                        partIndex++;\n                    }\n                }\n            }\n        }\n        // Remove text binding nodes after the walk to not disturb the TreeWalker\n        for (const n of nodesToRemove) {\n            n.parentNode.removeChild(n);\n        }\n    }\n}\nconst endsWith = (str, suffix) => {\n    const index = str.length - suffix.length;\n    return index >= 0 && str.slice(index) === suffix;\n};\nconst isTemplatePartActive = (part) => part.index !== -1;\n/**\n * Used to clone existing node instead of each time creating new one which is\n * slower\n */\nconst markerNode = document.createComment('');\n// Allows `document.createComment('')` to be renamed for a\n// small manual size-savings.\nconst createMarker = () => markerNode.cloneNode();\n/**\n * This regex extracts the attribute name preceding an attribute-position\n * expression. It does this by matching the syntax allowed for attributes\n * against the string literal directly preceding the expression, assuming that\n * the expression is in an attribute-value position.\n *\n * See attributes in the HTML spec:\n * https://www.w3.org/TR/html5/syntax.html#elements-attributes\n *\n * \" \\x09\\x0a\\x0c\\x0d\" are HTML space characters:\n * https://www.w3.org/TR/html5/infrastructure.html#space-characters\n *\n * \"\\0-\\x1F\\x7F-\\x9F\" are Unicode control characters, which includes every\n * space character except \" \".\n *\n * So an attribute is:\n *  * The name: any character except a control character, space character, ('),\n *    (\"), \">\", \"=\", or \"/\"\n *  * Followed by zero or more space characters\n *  * Followed by \"=\"\n *  * Followed by zero or more space characters\n *  * Followed by:\n *    * Any character except space, ('), (\"), \"<\", \">\", \"=\", (`), or\n *    * (\") then any non-(\"), or\n *    * (') then any non-(')\n */\nconst lastAttributeNameRegex = \n// eslint-disable-next-line no-control-regex\n/([ \\x09\\x0a\\x0c\\x0d])([^\\0-\\x1F\\x7F-\\x9F \"'>=/]+)([ \\x09\\x0a\\x0c\\x0d]*=[ \\x09\\x0a\\x0c\\x0d]*(?:[^ \\x09\\x0a\\x0c\\x0d\"'`<>=]*|\"[^\"]*|'[^']*))$/;\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * An instance of a `Template` that can be attached to the DOM and updated\n * with new values.\n */\nclass TemplateInstance {\n    constructor(template, processor, options) {\n        this.__parts = [];\n        this.template = template;\n        this.processor = processor;\n        this.options = options;\n    }\n    update(values) {\n        let i = 0;\n        for (const part of this.__parts) {\n            if (part !== undefined) {\n                part.setValue(values[i]);\n            }\n            i++;\n        }\n        for (const part of this.__parts) {\n            if (part !== undefined) {\n                part.commit();\n            }\n        }\n    }\n    _clone() {\n        // There are a number of steps in the lifecycle of a template instance's\n        // DOM fragment:\n        //  1. Clone - create the instance fragment\n        //  2. Adopt - adopt into the main document\n        //  3. Process - find part markers and create parts\n        //  4. Upgrade - upgrade custom elements\n        //  5. Update - set node, attribute, property, etc., values\n        //  6. Connect - connect to the document. Optional and outside of this\n        //     method.\n        //\n        // We have a few constraints on the ordering of these steps:\n        //  * We need to upgrade before updating, so that property values will pass\n        //    through any property setters.\n        //  * We would like to process before upgrading so that we're sure that the\n        //    cloned fragment is inert and not disturbed by self-modifying DOM.\n        //  * We want custom elements to upgrade even in disconnected fragments.\n        //\n        // Given these constraints, with full custom elements support we would\n        // prefer the order: Clone, Process, Adopt, Upgrade, Update, Connect\n        //\n        // But Safari does not implement CustomElementRegistry#upgrade, so we\n        // can not implement that order and still have upgrade-before-update and\n        // upgrade disconnected fragments. So we instead sacrifice the\n        // process-before-upgrade constraint, since in Custom Elements v1 elements\n        // must not modify their light DOM in the constructor. We still have issues\n        // when co-existing with CEv0 elements like Polymer 1, and with polyfills\n        // that don't strictly adhere to the no-modification rule because shadow\n        // DOM, which may be created in the constructor, is emulated by being placed\n        // in the light DOM.\n        //\n        // The resulting order is on native is: Clone, Adopt, Upgrade, Process,\n        // Update, Connect. document.importNode() performs Clone, Adopt, and Upgrade\n        // in one step.\n        //\n        // The Custom Elements v1 polyfill supports upgrade(), so the order when\n        // polyfilled is the more ideal: Clone, Process, Adopt, Upgrade, Update,\n        // Connect.\n        const fragment = isCEPolyfill ?\n            this.template.element.content.cloneNode(true) :\n            document.importNode(this.template.element.content, true);\n        const stack = [];\n        const parts = this.template.parts;\n        // Edge needs all 4 parameters present; IE11 needs 3rd parameter to be null\n        const walker = document.createTreeWalker(fragment, 133 /* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */, null, false);\n        let partIndex = 0;\n        let nodeIndex = 0;\n        let part;\n        let node = walker.nextNode();\n        // Loop through all the nodes and parts of a template\n        while (partIndex < parts.length) {\n            part = parts[partIndex];\n            if (!isTemplatePartActive(part)) {\n                this.__parts.push(undefined);\n                partIndex++;\n                continue;\n            }\n            // Progress the tree walker until we find our next part's node.\n            // Note that multiple parts may share the same node (attribute parts\n            // on a single element), so this loop may not run at all.\n            while (nodeIndex < part.index) {\n                nodeIndex++;\n                if (node.nodeName === 'TEMPLATE') {\n                    stack.push(node);\n                    walker.currentNode = node.content;\n                }\n                if ((node = walker.nextNode()) === null) {\n                    // We've exhausted the content inside a nested template element.\n                    // Because we still have parts (the outer for-loop), we know:\n                    // - There is a template in the stack\n                    // - The walker will find a nextNode outside the template\n                    walker.currentNode = stack.pop();\n                    node = walker.nextNode();\n                }\n            }\n            // We've arrived at our part's node.\n            if (part.type === 'node') {\n                const textPart = this.processor.handleTextExpression(this.options, part);\n                textPart.insertAfterNode(node.previousSibling);\n                this.__parts.push(textPart);\n            }\n            else {\n                this.__parts.push(...this.processor.handleAttributeExpressions(node, part.name, part.strings, this.options, part));\n            }\n            partIndex++;\n        }\n        if (isCEPolyfill) {\n            document.adoptNode(fragment);\n            customElements.upgrade(fragment);\n        }\n        return fragment;\n    }\n}\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nlet policy;\n/**\n * Turns the value to trusted HTML. If the application uses Trusted Types the\n * value is transformed into TrustedHTML, which can be assigned to execution\n * sink. If the application doesn't use Trusted Types, the return value is the\n * same as the argument.\n */\nfunction convertConstantTemplateStringToTrustedHTML(value) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const w = window;\n    // TrustedTypes have been renamed to trustedTypes\n    // (https://github.com/WICG/trusted-types/issues/177)\n    const trustedTypes = (w.trustedTypes || w.TrustedTypes);\n    if (trustedTypes && !policy) {\n        policy = trustedTypes.createPolicy('lit-html', { createHTML: (s) => s });\n    }\n    return policy ? policy.createHTML(value) : value;\n}\nconst commentMarker = ` ${marker} `;\n/**\n * Used to clone existing node instead of each time creating new one which is\n * slower\n */\nconst emptyTemplateNode = document.createElement('template');\n/**\n * The return type of `html`, which holds a Template and the values from\n * interpolated expressions.\n */\nclass TemplateResult {\n    constructor(strings, values, type, processor) {\n        this.strings = strings;\n        this.values = values;\n        this.type = type;\n        this.processor = processor;\n    }\n    /**\n     * Returns a string of HTML used to create a `<template>` element.\n     */\n    getHTML() {\n        const l = this.strings.length - 1;\n        let html = '';\n        let isCommentBinding = false;\n        for (let i = 0; i < l; i++) {\n            const s = this.strings[i];\n            // For each binding we want to determine the kind of marker to insert\n            // into the template source before it's parsed by the browser's HTML\n            // parser. The marker type is based on whether the expression is in an\n            // attribute, text, or comment position.\n            //   * For node-position bindings we insert a comment with the marker\n            //     sentinel as its text content, like <!--{{lit-guid}}-->.\n            //   * For attribute bindings we insert just the marker sentinel for the\n            //     first binding, so that we support unquoted attribute bindings.\n            //     Subsequent bindings can use a comment marker because multi-binding\n            //     attributes must be quoted.\n            //   * For comment bindings we insert just the marker sentinel so we don't\n            //     close the comment.\n            //\n            // The following code scans the template source, but is *not* an HTML\n            // parser. We don't need to track the tree structure of the HTML, only\n            // whether a binding is inside a comment, and if not, if it appears to be\n            // the first binding in an attribute.\n            const commentOpen = s.lastIndexOf('<!--');\n            // We're in comment position if we have a comment open with no following\n            // comment close. Because <-- can appear in an attribute value there can\n            // be false positives.\n            isCommentBinding = (commentOpen > -1 || isCommentBinding) &&\n                s.indexOf('-->', commentOpen + 1) === -1;\n            // Check to see if we have an attribute-like sequence preceding the\n            // expression. This can match \"name=value\" like structures in text,\n            // comments, and attribute values, so there can be false-positives.\n            const attributeMatch = lastAttributeNameRegex.exec(s);\n            if (attributeMatch === null) {\n                // We're only in this branch if we don't have a attribute-like\n                // preceding sequence. For comments, this guards against unusual\n                // attribute values like <div foo=\"<!--${'bar'}\">. Cases like\n                // <!-- foo=${'bar'}--> are handled correctly in the attribute branch\n                // below.\n                html += s + (isCommentBinding ? commentMarker : nodeMarker);\n            }\n            else {\n                // For attributes we use just a marker sentinel, and also append a\n                // $lit$ suffix to the name to opt-out of attribute-specific parsing\n                // that IE and Edge do for style and certain SVG attributes.\n                html += s.substr(0, attributeMatch.index) + attributeMatch[1] +\n                    attributeMatch[2] + boundAttributeSuffix + attributeMatch[3] +\n                    marker;\n            }\n        }\n        html += this.strings[l];\n        return html;\n    }\n    getTemplateElement() {\n        const template = emptyTemplateNode.cloneNode();\n        // this is secure because `this.strings` is a TemplateStringsArray.\n        // TODO: validate this when\n        // https://github.com/tc39/proposal-array-is-template-object is implemented.\n        template.innerHTML =\n            convertConstantTemplateStringToTrustedHTML(this.getHTML());\n        return template;\n    }\n}\n/**\n * A TemplateResult for SVG fragments.\n *\n * This class wraps HTML in an `<svg>` tag in order to parse its contents in the\n * SVG namespace, then modifies the template to remove the `<svg>` tag so that\n * clones only container the original fragment.\n */\nclass SVGTemplateResult extends TemplateResult {\n    getHTML() {\n        return `<svg>${super.getHTML()}</svg>`;\n    }\n    getTemplateElement() {\n        const template = super.getTemplateElement();\n        const content = template.content;\n        const svgElement = content.firstChild;\n        content.removeChild(svgElement);\n        reparentNodes(content, svgElement.firstChild);\n        return template;\n    }\n}\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst isPrimitive = (value) => {\n    return (value === null ||\n        !(typeof value === 'object' || typeof value === 'function'));\n};\nconst isIterable = (value) => {\n    return Array.isArray(value) ||\n        // tslint:disable-next-line: no-any\n        !!(value && value[Symbol.iterator]);\n};\nconst identityFunction = (value) => value;\nconst noopSanitizer = (_node, _name, _type) => identityFunction;\n/**\n * A global callback used to get a sanitizer for a given field.\n */\nlet sanitizerFactory = noopSanitizer;\n/** Sets the global sanitizer factory. */\nconst setSanitizerFactory = (newSanitizer) => {\n    if (sanitizerFactory !== noopSanitizer) {\n        throw new Error(`Attempted to overwrite existing lit-html security policy.` +\n            ` setSanitizeDOMValueFactory should be called at most once.`);\n    }\n    sanitizerFactory = newSanitizer;\n};\n/**\n * Used to clone text node instead of each time creating new one which is slower\n */\nconst emptyTextNode = document.createTextNode('');\n/**\n * Writes attribute values to the DOM for a group of AttributeParts bound to a\n * single attribute. The value is only set once even if there are multiple parts\n * for an attribute.\n */\nclass AttributeCommitter {\n    constructor(element, name, strings, \n    // Next breaking change, consider making this param required.\n    templatePart, kind = 'attribute') {\n        this.dirty = true;\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n        this.parts = [];\n        let sanitizer = templatePart && templatePart.sanitizer;\n        if (sanitizer === undefined) {\n            sanitizer = sanitizerFactory(element, name, kind);\n            if (templatePart !== undefined) {\n                templatePart.sanitizer = sanitizer;\n            }\n        }\n        this.sanitizer = sanitizer;\n        for (let i = 0; i < strings.length - 1; i++) {\n            this.parts[i] = this._createPart();\n        }\n    }\n    /**\n     * Creates a single part. Override this to create a differnt type of part.\n     */\n    _createPart() {\n        return new AttributePart(this);\n    }\n    _getValue() {\n        const strings = this.strings;\n        const parts = this.parts;\n        const l = strings.length - 1;\n        // If we're assigning an attribute via syntax like:\n        //    attr=\"${foo}\"  or  attr=${foo}\n        // but not\n        //    attr=\"${foo} ${bar}\" or attr=\"${foo} baz\"\n        // then we don't want to coerce the attribute value into one long\n        // string. Instead we want to just return the value itself directly,\n        // so that sanitizeDOMValue can get the actual value rather than\n        // String(value)\n        // The exception is if v is an array, in which case we do want to smash\n        // it together into a string without calling String() on the array.\n        //\n        // This also allows trusted values (when using TrustedTypes) being\n        // assigned to DOM sinks without being stringified in the process.\n        if (l === 1 && strings[0] === '' && strings[1] === '' &&\n            parts[0] !== undefined) {\n            const v = parts[0].value;\n            if (!isIterable(v)) {\n                return v;\n            }\n        }\n        let text = '';\n        for (let i = 0; i < l; i++) {\n            text += strings[i];\n            const part = parts[i];\n            if (part !== undefined) {\n                const v = part.value;\n                if (isPrimitive(v) || !isIterable(v)) {\n                    text += typeof v === 'string' ? v : String(v);\n                }\n                else {\n                    for (const t of v) {\n                        text += typeof t === 'string' ? t : String(t);\n                    }\n                }\n            }\n        }\n        text += strings[l];\n        return text;\n    }\n    commit() {\n        if (this.dirty) {\n            this.dirty = false;\n            let value = this._getValue();\n            value = this.sanitizer(value);\n            if (typeof value === 'symbol') {\n                // Native Symbols throw if they're coerced to string.\n                value = String(value);\n            }\n            this.element.setAttribute(this.name, value);\n        }\n    }\n}\n/**\n * A Part that controls all or part of an attribute value.\n */\nclass AttributePart {\n    constructor(committer) {\n        this.value = undefined;\n        this.committer = committer;\n    }\n    setValue(value) {\n        if (value !== noChange && (!isPrimitive(value) || value !== this.value)) {\n            this.value = value;\n            // If the value is a not a directive, dirty the committer so that it'll\n            // call setAttribute. If the value is a directive, it'll dirty the\n            // committer if it calls setValue().\n            if (!isDirective(value)) {\n                this.committer.dirty = true;\n            }\n        }\n    }\n    commit() {\n        while (isDirective(this.value)) {\n            const directive = this.value;\n            this.value = noChange;\n            // tslint:disable-next-line: no-any\n            if (directive.isClass) {\n                // tslint:disable-next-line: no-any\n                directive.body(this);\n            }\n            else {\n                directive(this);\n            }\n        }\n        if (this.value === noChange) {\n            return;\n        }\n        this.committer.commit();\n    }\n}\n/**\n * A Part that controls a location within a Node tree. Like a Range, NodePart\n * has start and end locations and can set and update the Nodes between those\n * locations.\n *\n * NodeParts support several value types: primitives, Nodes, TemplateResults,\n * as well as arrays and iterables of those types.\n */\nclass NodePart {\n    constructor(options, templatePart) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        /**\n         * The sanitizer to use when writing text contents into this NodePart.\n         *\n         * We have to initialize this here rather than at the template literal level\n         * because the security of text content depends on the context into which\n         * it's written. e.g. the same text has different security requirements\n         * when a child of a <script> vs a <style> vs a <div>.\n         */\n        this.textSanitizer = undefined;\n        this.options = options;\n        this.templatePart = templatePart;\n    }\n    /**\n     * Appends this part into a container.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    appendInto(container) {\n        this.startNode = container.appendChild(createMarker());\n        this.endNode = container.appendChild(createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` node (between `ref` and `ref`'s next\n     * sibling). Both `ref` and its next sibling must be static, unchanging nodes\n     * such as those that appear in a literal section of a template.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    insertAfterNode(ref) {\n        this.startNode = ref;\n        this.endNode = ref.nextSibling;\n    }\n    /**\n     * Appends this part into a parent part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    appendIntoPart(part) {\n        part.__insert(this.startNode = createMarker());\n        part.__insert(this.endNode = createMarker());\n    }\n    /**\n     * Inserts this part after the `ref` part.\n     *\n     * This part must be empty, as its contents are not automatically moved.\n     */\n    insertAfterPart(ref) {\n        ref.__insert(this.startNode = createMarker());\n        this.endNode = ref.endNode;\n        ref.endNode = this.startNode;\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            // tslint:disable-next-line: no-any\n            if (directive.isClass) {\n                // tslint:disable-next-line: no-any\n                directive.body(this);\n            }\n            else {\n                directive(this);\n            }\n        }\n        const value = this.__pendingValue;\n        if (value === noChange) {\n            return;\n        }\n        if (isPrimitive(value)) {\n            if (value !== this.value) {\n                this.__commitText(value);\n            }\n        }\n        else if (value instanceof TemplateResult) {\n            this.__commitTemplateResult(value);\n        }\n        else if (value instanceof Node) {\n            this.__commitNode(value);\n        }\n        else if (isIterable(value)) {\n            this.__commitIterable(value);\n        }\n        else if (value === nothing) {\n            this.value = nothing;\n            this.clear();\n        }\n        else {\n            // Fallback, will render the string representation\n            this.__commitText(value);\n        }\n    }\n    __insert(node) {\n        this.endNode.parentNode.insertBefore(node, this.endNode);\n    }\n    __commitNode(value) {\n        if (this.value === value) {\n            return;\n        }\n        this.clear();\n        this.__insert(value);\n        this.value = value;\n    }\n    __commitText(value) {\n        const node = this.startNode.nextSibling;\n        value = value == null ? '' : value;\n        if (node === this.endNode.previousSibling &&\n            node.nodeType === 3 /* Node.TEXT_NODE */) {\n            // If we only have a single text node between the markers, we can just\n            // set its value, rather than replacing it.\n            if (this.textSanitizer === undefined) {\n                this.textSanitizer = sanitizerFactory(node, 'data', 'property');\n            }\n            const renderedValue = this.textSanitizer(value);\n            node.data = typeof renderedValue === 'string' ?\n                renderedValue :\n                String(renderedValue);\n        }\n        else {\n            // When setting text content, for security purposes it matters a lot what\n            // the parent is. For example, <style> and <script> need to be handled\n            // with care, while <span> does not. So first we need to put a text node\n            // into the document, then we can sanitize its contentx.\n            const textNode = emptyTextNode.cloneNode();\n            this.__commitNode(textNode);\n            if (this.textSanitizer === undefined) {\n                this.textSanitizer = sanitizerFactory(textNode, 'data', 'property');\n            }\n            const renderedValue = this.textSanitizer(value);\n            textNode.data = typeof renderedValue === 'string' ? renderedValue :\n                String(renderedValue);\n        }\n        this.value = value;\n    }\n    __commitTemplateResult(value) {\n        const template = this.options.templateFactory(value);\n        if (this.value instanceof TemplateInstance &&\n            this.value.template === template) {\n            this.value.update(value.values);\n        }\n        else {\n            // `value` is a template result that was constructed without knowledge of\n            // the parent we're about to write it into. sanitizeDOMValue hasn't been\n            // made aware of this relationship, and for scripts and style specifically\n            // this is known to be unsafe. So in the case where the user is in\n            // \"secure mode\" (i.e. when there's a sanitizeDOMValue set), we just want\n            // to forbid this because it's not a use case we want to support.\n            // We only apply this policy when sanitizerFactory has been set to\n            // prevent this from being a breaking change to the library.\n            const parent = this.endNode.parentNode;\n            if (sanitizerFactory !== noopSanitizer && parent.nodeName === 'STYLE' ||\n                parent.nodeName === 'SCRIPT') {\n                this.__commitText('/* lit-html will not write ' +\n                    'TemplateResults to scripts and styles */');\n                return;\n            }\n            // Make sure we propagate the template processor from the TemplateResult\n            // so that we use its syntax extension, etc. The template factory comes\n            // from the render function options so that it can control template\n            // caching and preprocessing.\n            const instance = new TemplateInstance(template, value.processor, this.options);\n            const fragment = instance._clone();\n            instance.update(value.values);\n            this.__commitNode(fragment);\n            this.value = instance;\n        }\n    }\n    __commitIterable(value) {\n        // For an Iterable, we create a new InstancePart per item, then set its\n        // value to the item. This is a little bit of overhead for every item in\n        // an Iterable, but it lets us recurse easily and efficiently update Arrays\n        // of TemplateResults that will be commonly returned from expressions like:\n        // array.map((i) => html`${i}`), by reusing existing TemplateInstances.\n        // If _value is an array, then the previous render was of an\n        // iterable and _value will contain the NodeParts from the previous\n        // render. If _value is not an array, clear this part and make a new\n        // array for NodeParts.\n        if (!Array.isArray(this.value)) {\n            this.value = [];\n            this.clear();\n        }\n        // Lets us keep track of how many items we stamped so we can clear leftover\n        // items from a previous render\n        const itemParts = this.value;\n        let partIndex = 0;\n        let itemPart;\n        for (const item of value) {\n            // Try to reuse an existing part\n            itemPart = itemParts[partIndex];\n            // If no existing part, create a new one\n            if (itemPart === undefined) {\n                itemPart = new NodePart(this.options, this.templatePart);\n                itemParts.push(itemPart);\n                if (partIndex === 0) {\n                    itemPart.appendIntoPart(this);\n                }\n                else {\n                    itemPart.insertAfterPart(itemParts[partIndex - 1]);\n                }\n            }\n            itemPart.setValue(item);\n            itemPart.commit();\n            partIndex++;\n        }\n        if (partIndex < itemParts.length) {\n            // Truncate the parts array so _value reflects the current state\n            itemParts.length = partIndex;\n            this.clear(itemPart && itemPart.endNode);\n        }\n    }\n    clear(startNode = this.startNode) {\n        removeNodes(this.startNode.parentNode, startNode.nextSibling, this.endNode);\n    }\n}\n/**\n * Implements a boolean attribute, roughly as defined in the HTML\n * specification.\n *\n * If the value is truthy, then the attribute is present with a value of\n * ''. If the value is falsey, the attribute is removed.\n */\nclass BooleanAttributePart {\n    constructor(element, name, strings) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        if (strings.length !== 2 || strings[0] !== '' || strings[1] !== '') {\n            throw new Error('Boolean attributes can only contain a single expression');\n        }\n        this.element = element;\n        this.name = name;\n        this.strings = strings;\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            // tslint:disable-next-line: no-any\n            if (directive.isClass) {\n                // tslint:disable-next-line: no-any\n                directive.body(this);\n            }\n            else {\n                directive(this);\n            }\n        }\n        if (this.__pendingValue === noChange) {\n            return;\n        }\n        const value = !!this.__pendingValue;\n        if (this.value !== value) {\n            if (value) {\n                this.element.setAttribute(this.name, '');\n            }\n            else {\n                this.element.removeAttribute(this.name);\n            }\n            this.value = value;\n        }\n        this.__pendingValue = noChange;\n    }\n}\n/**\n * Sets attribute values for PropertyParts, so that the value is only set once\n * even if there are multiple parts for a property.\n *\n * If an expression controls the whole property value, then the value is simply\n * assigned to the property under control. If there are string literals or\n * multiple expressions, then the strings are expressions are interpolated into\n * a string first.\n */\nclass PropertyCommitter extends AttributeCommitter {\n    constructor(element, name, strings, \n    // Next breaking change, consider making this param required.\n    templatePart) {\n        super(element, name, strings, templatePart, 'property');\n        this.single =\n            (strings.length === 2 && strings[0] === '' && strings[1] === '');\n    }\n    _createPart() {\n        return new PropertyPart(this);\n    }\n    _getValue() {\n        if (this.single) {\n            return this.parts[0].value;\n        }\n        return super._getValue();\n    }\n    commit() {\n        if (this.dirty) {\n            this.dirty = false;\n            let value = this._getValue();\n            value = this.sanitizer(value);\n            // tslint:disable-next-line: no-any\n            this.element[this.name] = value;\n        }\n    }\n}\nclass PropertyPart extends AttributePart {\n}\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n// Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n(() => {\n    try {\n        const options = {\n            get capture() {\n                eventOptionsSupported = true;\n                return false;\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.addEventListener('test', options, options);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.removeEventListener('test', options, options);\n    }\n    catch (_e) {\n        // noop\n    }\n})();\nclass EventPart {\n    constructor(element, eventName, eventContext) {\n        this.value = undefined;\n        this.__pendingValue = undefined;\n        this.element = element;\n        this.eventName = eventName;\n        this.eventContext = eventContext;\n        this.__boundHandleEvent = (e) => this.handleEvent(e);\n    }\n    setValue(value) {\n        this.__pendingValue = value;\n    }\n    commit() {\n        while (isDirective(this.__pendingValue)) {\n            const directive = this.__pendingValue;\n            this.__pendingValue = noChange;\n            // tslint:disable-next-line: no-any\n            if (directive.isClass) {\n                // tslint:disable-next-line: no-any\n                directive.body(this);\n            }\n            else {\n                directive(this);\n            }\n        }\n        if (this.__pendingValue === noChange) {\n            return;\n        }\n        const newListener = this.__pendingValue;\n        const oldListener = this.value;\n        const shouldRemoveListener = newListener == null ||\n            oldListener != null &&\n                (newListener.capture !== oldListener.capture ||\n                    newListener.once !== oldListener.once ||\n                    newListener.passive !== oldListener.passive);\n        const shouldAddListener = newListener != null && (oldListener == null || shouldRemoveListener);\n        if (shouldRemoveListener) {\n            this.element.removeEventListener(this.eventName, this.__boundHandleEvent, this.__options);\n        }\n        if (shouldAddListener) {\n            this.__options = getOptions(newListener);\n            this.element.addEventListener(this.eventName, this.__boundHandleEvent, this.__options);\n        }\n        this.value = newListener;\n        this.__pendingValue = noChange;\n    }\n    handleEvent(event) {\n        if (typeof this.value === 'function') {\n            this.value.call(this.eventContext || this.element, event);\n        }\n        else {\n            this.value.handleEvent(event);\n        }\n    }\n}\n// We copy options because of the inconsistent behavior of browsers when reading\n// the third argument of add/removeEventListener. IE11 doesn't support options\n// at all. Chrome 41 only reads `capture` if the argument is an object.\nconst getOptions = (o) => o &&\n    (eventOptionsSupported ?\n        { capture: o.capture, passive: o.passive, once: o.once } :\n        o.capture);\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * Creates Parts when a template is instantiated.\n */\nclass DefaultTemplateProcessor {\n    /**\n     * Create parts for an attribute-position binding, given the event, attribute\n     * name, and string literals.\n     *\n     * @param element The element containing the binding\n     * @param name  The attribute name\n     * @param strings The string literals. There are always at least two strings,\n     *   event for fully-controlled bindings with a single expression.\n     */\n    handleAttributeExpressions(element, name, strings, options, templatePart) {\n        const prefix = name[0];\n        if (prefix === '.') {\n            const committer = new PropertyCommitter(element, name.slice(1), strings, templatePart);\n            return committer.parts;\n        }\n        if (prefix === '@') {\n            return [new EventPart(element, name.slice(1), options.eventContext)];\n        }\n        if (prefix === '?') {\n            return [new BooleanAttributePart(element, name.slice(1), strings)];\n        }\n        const committer = new AttributeCommitter(element, name, strings, templatePart);\n        return committer.parts;\n    }\n    /**\n     * Create parts for a text-position binding.\n     * @param templateFactory\n     */\n    handleTextExpression(options, nodeTemplatePart) {\n        return new NodePart(options, nodeTemplatePart);\n    }\n}\nconst defaultTemplateProcessor = new DefaultTemplateProcessor();\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * The default TemplateFactory which caches Templates keyed on\n * result.type and result.strings.\n */\nfunction templateFactory(result) {\n    let templateCache = templateCaches.get(result.type);\n    if (templateCache === undefined) {\n        templateCache = {\n            stringsArray: new WeakMap(),\n            keyString: new Map()\n        };\n        templateCaches.set(result.type, templateCache);\n    }\n    let template = templateCache.stringsArray.get(result.strings);\n    if (template !== undefined) {\n        return template;\n    }\n    // If the TemplateStringsArray is new, generate a key from the strings\n    // This key is shared between all templates with identical content\n    const key = result.strings.join(marker);\n    // Check if we already have a Template for this key\n    template = templateCache.keyString.get(key);\n    if (template === undefined) {\n        // If we have not seen this key before, create a new Template\n        template = new Template(result, result.getTemplateElement());\n        // Cache the Template for this key\n        templateCache.keyString.set(key, template);\n    }\n    // Cache all future queries for this TemplateStringsArray\n    templateCache.stringsArray.set(result.strings, template);\n    return template;\n}\nconst templateCaches = new Map();\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst parts = new WeakMap();\n/**\n * Renders a template result or other value to a container.\n *\n * To update a container with new values, reevaluate the template literal and\n * call `render` with the new result.\n *\n * @param result Any value renderable by NodePart - typically a TemplateResult\n *     created by evaluating a template tag like `html` or `svg`.\n * @param container A DOM parent to render to. The entire contents are either\n *     replaced, or efficiently updated if the same result type was previous\n *     rendered there.\n * @param options RenderOptions for the entire render tree rendered to this\n *     container. Render options must *not* change between renders to the same\n *     container, as those changes will not effect previously rendered DOM.\n */\nconst render = (result, container, options) => {\n    let part = parts.get(container);\n    if (part === undefined) {\n        removeNodes(container, container.firstChild);\n        parts.set(container, part = new NodePart(Object.assign({ templateFactory }, options), undefined));\n        part.appendInto(container);\n    }\n    part.setValue(result);\n    part.commit();\n};\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\nconst isBrowser = typeof window !== 'undefined';\nif (isBrowser) {\n    // If we run in the browser set version\n    (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.1.5');\n}\n/**\n * Interprets a template literal as an HTML template that can efficiently\n * render to and update a container.\n */\nconst html = (strings, ...values) => new TemplateResult(strings, values, 'html', defaultTemplateProcessor);\n/**\n * Interprets a template literal as an SVG template that can efficiently\n * render to and update a container.\n */\nconst svg = (strings, ...values) => new SVGTemplateResult(strings, values, 'svg', defaultTemplateProcessor);\n\nvar lithtml = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    html: html,\n    svg: svg,\n    DefaultTemplateProcessor: DefaultTemplateProcessor,\n    defaultTemplateProcessor: defaultTemplateProcessor,\n    directive: directive,\n    Directive: Directive,\n    isDirective: isDirective,\n    removeNodes: removeNodes,\n    reparentNodes: reparentNodes,\n    noChange: noChange,\n    nothing: nothing,\n    AttributeCommitter: AttributeCommitter,\n    AttributePart: AttributePart,\n    BooleanAttributePart: BooleanAttributePart,\n    EventPart: EventPart,\n    isIterable: isIterable,\n    isPrimitive: isPrimitive,\n    NodePart: NodePart,\n    PropertyCommitter: PropertyCommitter,\n    PropertyPart: PropertyPart,\n    get sanitizerFactory () { return sanitizerFactory; },\n    setSanitizerFactory: setSanitizerFactory,\n    parts: parts,\n    render: render,\n    templateCaches: templateCaches,\n    templateFactory: templateFactory,\n    TemplateInstance: TemplateInstance,\n    SVGTemplateResult: SVGTemplateResult,\n    TemplateResult: TemplateResult,\n    createMarker: createMarker,\n    isTemplatePartActive: isTemplatePartActive,\n    Template: Template\n});\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar __asyncValues =  function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\n/**\n * A directive that renders the items of an async iterable[1], appending new\n * values after previous values, similar to the built-in support for iterables.\n *\n * Async iterables are objects with a [Symbol.asyncIterator] method, which\n * returns an iterator who's `next()` method returns a Promise. When a new\n * value is available, the Promise resolves and the value is appended to the\n * Part controlled by the directive. If another value other than this\n * directive has been set on the Part, the iterable will no longer be listened\n * to and new values won't be written to the Part.\n *\n * [1]: https://github.com/tc39/proposal-async-iteration\n *\n * @param value An async iterable\n * @param mapper An optional function that maps from (value, index) to another\n *     value. Useful for generating templates for each item in the iterable.\n */\nconst asyncAppend = directive((value, mapper) => async (part) => {\n    var e_1, _a;\n    if (!(part instanceof NodePart)) {\n        throw new Error('asyncAppend can only be used in text bindings');\n    }\n    // If we've already set up this particular iterable, we don't need\n    // to do anything.\n    if (value === part.value) {\n        return;\n    }\n    part.value = value;\n    // We keep track of item Parts across iterations, so that we can\n    // share marker nodes between consecutive Parts.\n    let itemPart;\n    let i = 0;\n    try {\n        for (var value_1 = __asyncValues(value), value_1_1; value_1_1 = await value_1.next(), !value_1_1.done;) {\n            let v = value_1_1.value;\n            // Check to make sure that value is the still the current value of\n            // the part, and if not bail because a new value owns this part\n            if (part.value !== value) {\n                break;\n            }\n            // When we get the first value, clear the part. This lets the\n            // previous value display until we can replace it.\n            if (i === 0) {\n                part.clear();\n            }\n            // As a convenience, because functional-programming-style\n            // transforms of iterables and async iterables requires a library,\n            // we accept a mapper function. This is especially convenient for\n            // rendering a template for each item.\n            if (mapper !== undefined) {\n                // This is safe because T must otherwise be treated as unknown by\n                // the rest of the system.\n                v = mapper(v, i);\n            }\n            // Like with sync iterables, each item induces a Part, so we need\n            // to keep track of start and end nodes for the Part.\n            // Note: Because these Parts are not updatable like with a sync\n            // iterable (if we render a new value, we always clear), it may\n            // be possible to optimize away the Parts and just re-use the\n            // Part.setValue() logic.\n            let itemStartNode = part.startNode;\n            // Check to see if we have a previous item and Part\n            if (itemPart !== undefined) {\n                // Create a new node to separate the previous and next Parts\n                itemStartNode = createMarker();\n                // itemPart is currently the Part for the previous item. Set\n                // it's endNode to the node we'll use for the next Part's\n                // startNode.\n                itemPart.endNode = itemStartNode;\n                part.endNode.parentNode.insertBefore(itemStartNode, part.endNode);\n            }\n            itemPart = new NodePart(part.options, part.templatePart);\n            itemPart.insertAfterNode(itemStartNode);\n            itemPart.setValue(v);\n            itemPart.commit();\n            i++;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (value_1_1 && !value_1_1.done && (_a = value_1.return)) await _a.call(value_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n});\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar __asyncValues$1 =  function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\n/**\n * A directive that renders the items of an async iterable[1], replacing\n * previous values with new values, so that only one value is ever rendered\n * at a time.\n *\n * Async iterables are objects with a [Symbol.asyncIterator] method, which\n * returns an iterator who's `next()` method returns a Promise. When a new\n * value is available, the Promise resolves and the value is rendered to the\n * Part controlled by the directive. If another value other than this\n * directive has been set on the Part, the iterable will no longer be listened\n * to and new values won't be written to the Part.\n *\n * [1]: https://github.com/tc39/proposal-async-iteration\n *\n * @param value An async iterable\n * @param mapper An optional function that maps from (value, index) to another\n *     value. Useful for generating templates for each item in the iterable.\n */\nconst asyncReplace = directive((value, mapper) => async (part) => {\n    var e_1, _a;\n    if (!(part instanceof NodePart)) {\n        throw new Error('asyncReplace can only be used in text bindings');\n    }\n    // If we've already set up this particular iterable, we don't need\n    // to do anything.\n    if (value === part.value) {\n        return;\n    }\n    // We nest a new part to keep track of previous item values separately\n    // of the iterable as a value itself.\n    const itemPart = new NodePart(part.options, part.templatePart);\n    part.value = value;\n    let i = 0;\n    try {\n        for (var value_1 = __asyncValues$1(value), value_1_1; value_1_1 = await value_1.next(), !value_1_1.done;) {\n            let v = value_1_1.value;\n            // Check to make sure that value is the still the current value of\n            // the part, and if not bail because a new value owns this part\n            if (part.value !== value) {\n                break;\n            }\n            // When we get the first value, clear the part. This let's the\n            // previous value display until we can replace it.\n            if (i === 0) {\n                part.clear();\n                itemPart.appendIntoPart(part);\n            }\n            // As a convenience, because functional-programming-style\n            // transforms of iterables and async iterables requires a library,\n            // we accept a mapper function. This is especially convenient for\n            // rendering a template for each item.\n            if (mapper !== undefined) {\n                // This is safe because T must otherwise be treated as unknown by\n                // the rest of the system.\n                v = mapper(v, i);\n            }\n            itemPart.setValue(v);\n            itemPart.commit();\n            i++;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (value_1_1 && !value_1_1.done && (_a = value_1.return)) await _a.call(value_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n});\n\n/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst templateCaches$1 = new WeakMap();\n/**\n * Enables fast switching between multiple templates by caching the DOM nodes\n * and TemplateInstances produced by the templates.\n *\n * Example:\n *\n * ```\n * let checked = false;\n *\n * html`\n *   ${cache(checked ? html`input is checked` : html`input is not checked`)}\n * `\n * ```\n */\nconst cache = directive((value) => (part) => {\n    if (!(part instanceof NodePart)) {\n        throw new Error('cache can only be used in text bindings');\n    }\n    let templateCache = templateCaches$1.get(part);\n    if (templateCache === undefined) {\n        templateCache = new WeakMap();\n        templateCaches$1.set(part, templateCache);\n    }\n    const previousValue = part.value;\n    // First, can we update the current TemplateInstance, or do we need to move\n    // the current nodes into the cache?\n    if (previousValue instanceof TemplateInstance) {\n        if (value instanceof TemplateResult &&\n            previousValue.template === part.options.templateFactory(value)) {\n            // Same Template, just trigger an update of the TemplateInstance\n            part.setValue(value);\n            return;\n        }\n        else {\n            // Not the same Template, move the nodes from the DOM into the cache.\n            let cachedTemplate = templateCache.get(previousValue.template);\n            if (cachedTemplate === undefined) {\n                cachedTemplate = {\n                    instance: previousValue,\n                    nodes: document.createDocumentFragment(),\n                };\n                templateCache.set(previousValue.template, cachedTemplate);\n            }\n            reparentNodes(cachedTemplate.nodes, part.startNode.nextSibling, part.endNode);\n        }\n    }\n    // Next, can we reuse nodes from the cache?\n    if (value instanceof TemplateResult) {\n        const template = part.options.templateFactory(value);\n        const cachedTemplate = templateCache.get(template);\n        if (cachedTemplate !== undefined) {\n            // Move nodes out of cache\n            part.setValue(cachedTemplate.nodes);\n            part.commit();\n            // Set the Part value to the TemplateInstance so it'll update it.\n            part.value = cachedTemplate.instance;\n        }\n    }\n    part.setValue(value);\n});\n\n/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * Stores the ClassInfo object applied to a given AttributePart.\n * Used to unset existing values when a new ClassInfo object is applied.\n */\nconst previousClassesCache = new WeakMap();\n/**\n * A directive that applies CSS classes. This must be used in the `class`\n * attribute and must be the only part used in the attribute. It takes each\n * property in the `classInfo` argument and adds the property name to the\n * element's `classList` if the property value is truthy; if the property value\n * is falsey, the property name is removed from the element's `classList`. For\n * example\n * `{foo: bar}` applies the class `foo` if the value of `bar` is truthy.\n * @param classInfo {ClassInfo}\n */\nconst classMap = directive((classInfo) => (part) => {\n    if (!(part instanceof AttributePart) || (part instanceof PropertyPart) ||\n        part.committer.name !== 'class' || part.committer.parts.length > 1) {\n        throw new Error('The `classMap` directive must be used in the `class` attribute ' +\n            'and must be the only part in the attribute.');\n    }\n    const { committer } = part;\n    const { element } = committer;\n    let previousClasses = previousClassesCache.get(part);\n    if (previousClasses === undefined) {\n        // Write static classes once\n        element.className = committer.strings.join(' ');\n        previousClassesCache.set(part, previousClasses = new Set());\n    }\n    const { classList } = element;\n    // Remove old classes that no longer apply\n    // We use forEach() instead of for-of so that re don't require down-level\n    // iteration.\n    previousClasses.forEach((name) => {\n        if (!(name in classInfo)) {\n            classList.remove(name);\n            previousClasses.delete(name);\n        }\n    });\n    // Add or remove classes based on their classMap value\n    for (const name in classInfo) {\n        const value = classInfo[name];\n        // We explicitly want a loose truthy check of `value` because it seems more\n        // convenient that '' and 0 are skipped.\n        if (value != previousClasses.has(name)) {\n            if (value) {\n                classList.add(name);\n                previousClasses.add(name);\n            }\n            else {\n                classList.remove(name);\n                previousClasses.delete(name);\n            }\n        }\n    }\n});\n\n/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst previousValues = new WeakMap();\n/**\n * Prevents re-render of a template function until a single value or an array of\n * values changes.\n *\n * Example:\n *\n * ```js\n * html`\n *   <div>\n *     ${guard([user.id, company.id], () => html`...`)}\n *   </div>\n * ```\n *\n * In this case, the template only renders if either `user.id` or `company.id`\n * changes.\n *\n * guard() is useful with immutable data patterns, by preventing expensive work\n * until data updates.\n *\n * Example:\n *\n * ```js\n * html`\n *   <div>\n *     ${guard([immutableItems], () => immutableItems.map(i => html`${i}`))}\n *   </div>\n * ```\n *\n * In this case, items are mapped over only when the array reference changes.\n *\n * @param value the value to check before re-rendering\n * @param f the template function\n */\nconst guard = directive((value, f) => (part) => {\n    const previousValue = previousValues.get(part);\n    if (Array.isArray(value)) {\n        // Dirty-check arrays by item\n        if (Array.isArray(previousValue) &&\n            previousValue.length === value.length &&\n            value.every((v, i) => v === previousValue[i])) {\n            return;\n        }\n    }\n    else if (previousValue === value &&\n        (value !== undefined || previousValues.has(part))) {\n        // Dirty-check non-arrays by identity\n        return;\n    }\n    part.setValue(f());\n    // Copy the value if it's an array so that if it's mutated we don't forget\n    // what the previous values were.\n    previousValues.set(part, Array.isArray(value) ? Array.from(value) : value);\n});\n\n/**\n * @license\n * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * For AttributeParts, sets the attribute if the value is defined and removes\n * the attribute if the value is undefined.\n *\n * For other part types, this directive is a no-op.\n */\nconst ifDefined = directive((value) => (part) => {\n    if (value === undefined && part instanceof AttributePart) {\n        if (value !== part.value) {\n            const name = part.committer.name;\n            part.committer.element.removeAttribute(name);\n        }\n    }\n    else {\n        part.setValue(value);\n    }\n});\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// Helper functions for manipulating parts\n// TODO(kschaaf): Refactor into Part API?\nconst createAndInsertPart = (containerPart, beforePart) => {\n    const container = containerPart.startNode.parentNode;\n    const beforeNode = beforePart == null ? containerPart.endNode : beforePart.startNode;\n    const startNode = container.insertBefore(createMarker(), beforeNode);\n    container.insertBefore(createMarker(), beforeNode);\n    const newPart = new NodePart(containerPart.options, undefined);\n    newPart.insertAfterNode(startNode);\n    return newPart;\n};\nconst updatePart = (part, value) => {\n    part.setValue(value);\n    part.commit();\n    return part;\n};\nconst insertPartBefore = (containerPart, part, ref) => {\n    const container = containerPart.startNode.parentNode;\n    const beforeNode = ref ? ref.startNode : containerPart.endNode;\n    const endNode = part.endNode.nextSibling;\n    if (endNode !== beforeNode) {\n        reparentNodes(container, part.startNode, endNode, beforeNode);\n    }\n};\nconst removePart = (part) => {\n    removeNodes(part.startNode.parentNode, part.startNode, part.endNode.nextSibling);\n};\n// Helper for generating a map of array item to its index over a subset\n// of an array (used to lazily generate `newKeyToIndexMap` and\n// `oldKeyToIndexMap`)\nconst generateMap = (list, start, end) => {\n    const map = new Map();\n    for (let i = start; i <= end; i++) {\n        map.set(list[i], i);\n    }\n    return map;\n};\n// Stores previous ordered list of parts and map of key to index\nconst partListCache = new WeakMap();\nconst keyListCache = new WeakMap();\n/**\n * A directive that repeats a series of values (usually `TemplateResults`)\n * generated from an iterable, and updates those items efficiently when the\n * iterable changes based on user-provided `keys` associated with each item.\n *\n * Note that if a `keyFn` is provided, strict key-to-DOM mapping is maintained,\n * meaning previous DOM for a given key is moved into the new position if\n * needed, and DOM will never be reused with values for different keys (new DOM\n * will always be created for new keys). This is generally the most efficient\n * way to use `repeat` since it performs minimum unnecessary work for insertions\n * and removals.\n *\n * IMPORTANT: If providing a `keyFn`, keys *must* be unique for all items in a\n * given call to `repeat`. The behavior when two or more items have the same key\n * is undefined.\n *\n * If no `keyFn` is provided, this directive will perform similar to mapping\n * items to values, and DOM will be reused against potentially different items.\n */\nconst repeat = directive((items, keyFnOrTemplate, template) => {\n    let keyFn;\n    if (template === undefined) {\n        template = keyFnOrTemplate;\n    }\n    else if (keyFnOrTemplate !== undefined) {\n        keyFn = keyFnOrTemplate;\n    }\n    return (containerPart) => {\n        if (!(containerPart instanceof NodePart)) {\n            throw new Error('repeat can only be used in text bindings');\n        }\n        // Old part & key lists are retrieved from the last update\n        // (associated with the part for this instance of the directive)\n        const oldParts = partListCache.get(containerPart) || [];\n        const oldKeys = keyListCache.get(containerPart) || [];\n        // New part list will be built up as we go (either reused from\n        // old parts or created for new keys in this update). This is\n        // saved in the above cache at the end of the update.\n        const newParts = [];\n        // New value list is eagerly generated from items along with a\n        // parallel array indicating its key.\n        const newValues = [];\n        const newKeys = [];\n        let index = 0;\n        for (const item of items) {\n            newKeys[index] = keyFn ? keyFn(item, index) : index;\n            newValues[index] = template(item, index);\n            index++;\n        }\n        // Maps from key to index for current and previous update; these\n        // are generated lazily only when needed as a performance\n        // optimization, since they are only required for multiple\n        // non-contiguous changes in the list, which are less common.\n        let newKeyToIndexMap;\n        let oldKeyToIndexMap;\n        // Head and tail pointers to old parts and new values\n        let oldHead = 0;\n        let oldTail = oldParts.length - 1;\n        let newHead = 0;\n        let newTail = newValues.length - 1;\n        // Overview of O(n) reconciliation algorithm (general approach\n        // based on ideas found in ivi, vue, snabbdom, etc.):\n        //\n        // * We start with the list of old parts and new values (and\n        //   arrays of their respective keys), head/tail pointers into\n        //   each, and we build up the new list of parts by updating\n        //   (and when needed, moving) old parts or creating new ones.\n        //   The initial scenario might look like this (for brevity of\n        //   the diagrams, the numbers in the array reflect keys\n        //   associated with the old parts or new values, although keys\n        //   and parts/values are actually stored in parallel arrays\n        //   indexed using the same head/tail pointers):\n        //\n        //      oldHead v                 v oldTail\n        //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n        //   newParts: [ ,  ,  ,  ,  ,  ,  ]\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6] <- reflects the user's new\n        //                                      item order\n        //      newHead ^                 ^ newTail\n        //\n        // * Iterate old & new lists from both sides, updating,\n        //   swapping, or removing parts at the head/tail locations\n        //   until neither head nor tail can move.\n        //\n        // * Example below: keys at head pointers match, so update old\n        //   part 0 in-place (no need to move it) and record part 0 in\n        //   the `newParts` list. The last thing we do is advance the\n        //   `oldHead` and `newHead` pointers (will be reflected in the\n        //   next diagram).\n        //\n        //      oldHead v                 v oldTail\n        //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n        //   newParts: [0,  ,  ,  ,  ,  ,  ] <- heads matched: update 0\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldHead\n        //                                      & newHead\n        //      newHead ^                 ^ newTail\n        //\n        // * Example below: head pointers don't match, but tail\n        //   pointers do, so update part 6 in place (no need to move\n        //   it), and record part 6 in the `newParts` list. Last,\n        //   advance the `oldTail` and `oldHead` pointers.\n        //\n        //         oldHead v              v oldTail\n        //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n        //   newParts: [0,  ,  ,  ,  ,  , 6] <- tails matched: update 6\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldTail\n        //                                      & newTail\n        //         newHead ^              ^ newTail\n        //\n        // * If neither head nor tail match; next check if one of the\n        //   old head/tail items was removed. We first need to generate\n        //   the reverse map of new keys to index (`newKeyToIndexMap`),\n        //   which is done once lazily as a performance optimization,\n        //   since we only hit this case if multiple non-contiguous\n        //   changes were made. Note that for contiguous removal\n        //   anywhere in the list, the head and tails would advance\n        //   from either end and pass each other before we get to this\n        //   case and removals would be handled in the final while loop\n        //   without needing to generate the map.\n        //\n        // * Example below: The key at `oldTail` was removed (no longer\n        //   in the `newKeyToIndexMap`), so remove that part from the\n        //   DOM and advance just the `oldTail` pointer.\n        //\n        //         oldHead v           v oldTail\n        //   oldKeys:  [0, 1, 2, 3, 4, 5, 6]\n        //   newParts: [0,  ,  ,  ,  ,  , 6] <- 5 not in new map: remove\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    5 and advance oldTail\n        //         newHead ^           ^ newTail\n        //\n        // * Once head and tail cannot move, any mismatches are due to\n        //   either new or moved items; if a new key is in the previous\n        //   \"old key to old index\" map, move the old part to the new\n        //   location, otherwise create and insert a new part. Note\n        //   that when moving an old part we null its position in the\n        //   oldParts array if it lies between the head and tail so we\n        //   know to skip it when the pointers get there.\n        //\n        // * Example below: neither head nor tail match, and neither\n        //   were removed; so find the `newHead` key in the\n        //   `oldKeyToIndexMap`, and move that old part's DOM into the\n        //   next head position (before `oldParts[oldHead]`). Last,\n        //   null the part in the `oldPart` array since it was\n        //   somewhere in the remaining oldParts still to be scanned\n        //   (between the head and tail pointers) so that we know to\n        //   skip that old part on future iterations.\n        //\n        //         oldHead v        v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2,  ,  ,  ,  , 6] <- stuck: update & move 2\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    into place and advance\n        //                                      newHead\n        //         newHead ^           ^ newTail\n        //\n        // * Note that for moves/insertions like the one above, a part\n        //   inserted at the head pointer is inserted before the\n        //   current `oldParts[oldHead]`, and a part inserted at the\n        //   tail pointer is inserted before `newParts[newTail+1]`. The\n        //   seeming asymmetry lies in the fact that new parts are\n        //   moved into place outside in, so to the right of the head\n        //   pointer are old parts, and to the right of the tail\n        //   pointer are new parts.\n        //\n        // * We always restart back from the top of the algorithm,\n        //   allowing matching and simple updates in place to\n        //   continue...\n        //\n        // * Example below: the head pointers once again match, so\n        //   simply update part 1 and record it in the `newParts`\n        //   array.  Last, advance both head pointers.\n        //\n        //         oldHead v        v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2, 1,  ,  ,  , 6] <- heads matched: update 1\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance both oldHead\n        //                                      & newHead\n        //            newHead ^        ^ newTail\n        //\n        // * As mentioned above, items that were moved as a result of\n        //   being stuck (the final else clause in the code below) are\n        //   marked with null, so we always advance old pointers over\n        //   these so we're comparing the next actual old value on\n        //   either end.\n        //\n        // * Example below: `oldHead` is null (already placed in\n        //   newParts), so advance `oldHead`.\n        //\n        //            oldHead v     v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6] <- old head already used:\n        //   newParts: [0, 2, 1,  ,  ,  , 6]    advance oldHead\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]\n        //               newHead ^     ^ newTail\n        //\n        // * Note it's not critical to mark old parts as null when they\n        //   are moved from head to tail or tail to head, since they\n        //   will be outside the pointer range and never visited again.\n        //\n        // * Example below: Here the old tail key matches the new head\n        //   key, so the part at the `oldTail` position and move its\n        //   DOM to the new head position (before `oldParts[oldHead]`).\n        //   Last, advance `oldTail` and `newHead` pointers.\n        //\n        //               oldHead v  v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2, 1, 4,  ,  , 6] <- old tail matches new\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]   head: update & move 4,\n        //                                     advance oldTail & newHead\n        //               newHead ^     ^ newTail\n        //\n        // * Example below: Old and new head keys match, so update the\n        //   old head part in place, and advance the `oldHead` and\n        //   `newHead` pointers.\n        //\n        //               oldHead v oldTail\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2, 1, 4, 3,   ,6] <- heads match: update 3\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance oldHead &\n        //                                      newHead\n        //                  newHead ^  ^ newTail\n        //\n        // * Once the new or old pointers move past each other then all\n        //   we have left is additions (if old list exhausted) or\n        //   removals (if new list exhausted). Those are handled in the\n        //   final while loops at the end.\n        //\n        // * Example below: `oldHead` exceeded `oldTail`, so we're done\n        //   with the main loop.  Create the remaining part and insert\n        //   it at the new head position, and the update is complete.\n        //\n        //                   (oldHead > oldTail)\n        //   oldKeys:  [0, 1, -, 3, 4, 5, 6]\n        //   newParts: [0, 2, 1, 4, 3, 7 ,6] <- create and insert 7\n        //   newKeys:  [0, 2, 1, 4, 3, 7, 6]\n        //                     newHead ^ newTail\n        //\n        // * Note that the order of the if/else clauses is not\n        //   important to the algorithm, as long as the null checks\n        //   come first (to ensure we're always working on valid old\n        //   parts) and that the final else clause comes last (since\n        //   that's where the expensive moves occur). The order of\n        //   remaining clauses is is just a simple guess at which cases\n        //   will be most common.\n        //\n        // * TODO(kschaaf) Note, we could calculate the longest\n        //   increasing subsequence (LIS) of old items in new position,\n        //   and only move those not in the LIS set. However that costs\n        //   O(nlogn) time and adds a bit more code, and only helps\n        //   make rare types of mutations require fewer moves. The\n        //   above handles removes, adds, reversal, swaps, and single\n        //   moves of contiguous items in linear time, in the minimum\n        //   number of moves. As the number of multiple moves where LIS\n        //   might help approaches a random shuffle, the LIS\n        //   optimization becomes less helpful, so it seems not worth\n        //   the code at this point. Could reconsider if a compelling\n        //   case arises.\n        while (oldHead <= oldTail && newHead <= newTail) {\n            if (oldParts[oldHead] === null) {\n                // `null` means old part at head has already been used\n                // below; skip\n                oldHead++;\n            }\n            else if (oldParts[oldTail] === null) {\n                // `null` means old part at tail has already been used\n                // below; skip\n                oldTail--;\n            }\n            else if (oldKeys[oldHead] === newKeys[newHead]) {\n                // Old head matches new head; update in place\n                newParts[newHead] =\n                    updatePart(oldParts[oldHead], newValues[newHead]);\n                oldHead++;\n                newHead++;\n            }\n            else if (oldKeys[oldTail] === newKeys[newTail]) {\n                // Old tail matches new tail; update in place\n                newParts[newTail] =\n                    updatePart(oldParts[oldTail], newValues[newTail]);\n                oldTail--;\n                newTail--;\n            }\n            else if (oldKeys[oldHead] === newKeys[newTail]) {\n                // Old head matches new tail; update and move to new tail\n                newParts[newTail] =\n                    updatePart(oldParts[oldHead], newValues[newTail]);\n                insertPartBefore(containerPart, oldParts[oldHead], newParts[newTail + 1]);\n                oldHead++;\n                newTail--;\n            }\n            else if (oldKeys[oldTail] === newKeys[newHead]) {\n                // Old tail matches new head; update and move to new head\n                newParts[newHead] =\n                    updatePart(oldParts[oldTail], newValues[newHead]);\n                insertPartBefore(containerPart, oldParts[oldTail], oldParts[oldHead]);\n                oldTail--;\n                newHead++;\n            }\n            else {\n                if (newKeyToIndexMap === undefined) {\n                    // Lazily generate key-to-index maps, used for removals &\n                    // moves below\n                    newKeyToIndexMap = generateMap(newKeys, newHead, newTail);\n                    oldKeyToIndexMap = generateMap(oldKeys, oldHead, oldTail);\n                }\n                if (!newKeyToIndexMap.has(oldKeys[oldHead])) {\n                    // Old head is no longer in new list; remove\n                    removePart(oldParts[oldHead]);\n                    oldHead++;\n                }\n                else if (!newKeyToIndexMap.has(oldKeys[oldTail])) {\n                    // Old tail is no longer in new list; remove\n                    removePart(oldParts[oldTail]);\n                    oldTail--;\n                }\n                else {\n                    // Any mismatches at this point are due to additions or\n                    // moves; see if we have an old part we can reuse and move\n                    // into place\n                    const oldIndex = oldKeyToIndexMap.get(newKeys[newHead]);\n                    const oldPart = oldIndex !== undefined ? oldParts[oldIndex] : null;\n                    if (oldPart === null) {\n                        // No old part for this value; create a new one and\n                        // insert it\n                        const newPart = createAndInsertPart(containerPart, oldParts[oldHead]);\n                        updatePart(newPart, newValues[newHead]);\n                        newParts[newHead] = newPart;\n                    }\n                    else {\n                        // Reuse old part\n                        newParts[newHead] =\n                            updatePart(oldPart, newValues[newHead]);\n                        insertPartBefore(containerPart, oldPart, oldParts[oldHead]);\n                        // This marks the old part as having been used, so that\n                        // it will be skipped in the first two checks above\n                        oldParts[oldIndex] = null;\n                    }\n                    newHead++;\n                }\n            }\n        }\n        // Add parts for any remaining new values\n        while (newHead <= newTail) {\n            // For all remaining additions, we insert before last new\n            // tail, since old pointers are no longer valid\n            const newPart = createAndInsertPart(containerPart, newParts[newTail + 1]);\n            updatePart(newPart, newValues[newHead]);\n            newParts[newHead++] = newPart;\n        }\n        // Remove any remaining unused old parts\n        while (oldHead <= oldTail) {\n            const oldPart = oldParts[oldHead++];\n            if (oldPart !== null) {\n                removePart(oldPart);\n            }\n        }\n        // Save order of new parts for next round\n        partListCache.set(containerPart, newParts);\n        keyListCache.set(containerPart, newKeys);\n    };\n});\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// For each part, remember the value that was last rendered to the part by the\n// unsafeHTML directive, and the DocumentFragment that was last set as a value.\n// The DocumentFragment is used as a unique key to check if the last value\n// rendered to the part was with unsafeHTML. If not, we'll always re-render the\n// value passed to unsafeHTML.\nconst previousValues$1 = new WeakMap();\n/**\n * Used to clone existing node instead of each time creating new one which is\n * slower\n */\nconst emptyTemplateNode$1 = document.createElement('template');\n/**\n * Renders the result as HTML, rather than text.\n *\n * Note, this is unsafe to use with any user-provided input that hasn't been\n * sanitized or escaped, as it may lead to cross-site-scripting\n * vulnerabilities.\n */\nconst unsafeHTML = directive((value) => (part) => {\n    if (!(part instanceof NodePart)) {\n        throw new Error('unsafeHTML can only be used in text bindings');\n    }\n    const previousValue = previousValues$1.get(part);\n    if (previousValue !== undefined && isPrimitive(value) &&\n        value === previousValue.value && part.value === previousValue.fragment) {\n        return;\n    }\n    const template = emptyTemplateNode$1.cloneNode();\n    template.innerHTML = value; // innerHTML casts to string internally\n    const fragment = document.importNode(template.content, true);\n    part.setValue(fragment);\n    previousValues$1.set(part, { value, fragment });\n});\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst _state = new WeakMap();\n// Effectively infinity, but a SMI.\nconst _infinity = 0x7fffffff;\n/**\n * Renders one of a series of values, including Promises, to a Part.\n *\n * Values are rendered in priority order, with the first argument having the\n * highest priority and the last argument having the lowest priority. If a\n * value is a Promise, low-priority values will be rendered until it resolves.\n *\n * The priority of values can be used to create placeholder content for async\n * data. For example, a Promise with pending content can be the first,\n * highest-priority, argument, and a non_promise loading indicator template can\n * be used as the second, lower-priority, argument. The loading indicator will\n * render immediately, and the primary content will render when the Promise\n * resolves.\n *\n * Example:\n *\n *     const content = fetch('./content.txt').then(r => r.text());\n *     html`${until(content, html`<span>Loading...</span>`)}`\n */\nconst until = directive((...args) => (part) => {\n    let state = _state.get(part);\n    if (state === undefined) {\n        state = {\n            lastRenderedIndex: _infinity,\n            values: [],\n        };\n        _state.set(part, state);\n    }\n    const previousValues = state.values;\n    let previousLength = previousValues.length;\n    state.values = args;\n    for (let i = 0; i < args.length; i++) {\n        // If we've rendered a higher-priority value already, stop.\n        if (i > state.lastRenderedIndex) {\n            break;\n        }\n        const value = args[i];\n        // Render non-Promise values immediately\n        if (isPrimitive(value) ||\n            typeof value.then !== 'function') {\n            part.setValue(value);\n            state.lastRenderedIndex = i;\n            // Since a lower-priority value will never overwrite a higher-priority\n            // synchronous value, we can stop processing now.\n            break;\n        }\n        // If this is a Promise we've already handled, skip it.\n        if (i < previousLength && value === previousValues[i]) {\n            continue;\n        }\n        // We have a Promise that we haven't seen before, so priorities may have\n        // changed. Forget what we rendered before.\n        state.lastRenderedIndex = _infinity;\n        previousLength = 0;\n        Promise.resolve(value).then((resolvedValue) => {\n            const index = state.values.indexOf(value);\n            // If state.values doesn't contain the value, we've re-rendered without\n            // the value, so don't render it. Then, only render if the value is\n            // higher-priority than what's already been rendered.\n            if (index > -1 && index < state.lastRenderedIndex) {\n                state.lastRenderedIndex = index;\n                part.setValue(resolvedValue);\n                part.commit();\n            }\n        });\n    }\n});\n\nconst detached = new WeakMap();\nclass Detach extends Directive {\n    constructor(ifFn) {\n        super();\n        this.ifFn = ifFn;\n    }\n    body(part) {\n        const detach = this.ifFn();\n        const element = part.committer.element;\n        if (detach) {\n            if (!detached.has(part)) {\n                const nextSibling = element.nextSibling;\n                detached.set(part, { element, nextSibling });\n            }\n            element.remove();\n        }\n        else {\n            const data = detached.get(part);\n            if (typeof data !== 'undefined' && data !== null) {\n                data.nextSibling.parentNode.insertBefore(data.element, data.nextSibling);\n                detached.delete(part);\n            }\n        }\n    }\n}\n\nconst toRemove = [], toUpdate = [];\nclass StyleMap extends Directive {\n    constructor(styleInfo, detach = false) {\n        super();\n        this.previous = {};\n        this.style = styleInfo;\n        this.detach = detach;\n    }\n    setStyle(styleInfo) {\n        this.style = styleInfo;\n    }\n    setDetach(detach) {\n        this.detach = detach;\n    }\n    body(part) {\n        toRemove.length = 0;\n        toUpdate.length = 0;\n        // @ts-ignore\n        const element = part.committer.element;\n        const style = element.style;\n        let previous = this.previous;\n        for (const name in previous) {\n            if (this.style[name] === undefined) {\n                toRemove.push(name);\n            }\n        }\n        for (const name in this.style) {\n            const value = this.style[name];\n            const prev = previous[name];\n            if (prev !== undefined && prev === value) {\n                continue;\n            }\n            toUpdate.push(name);\n        }\n        if (toRemove.length || toUpdate.length) {\n            let parent, nextSibling;\n            if (this.detach) {\n                parent = element.parentNode;\n                if (parent) {\n                    nextSibling = element.nextSibling;\n                    element.remove();\n                }\n            }\n            for (const name of toRemove) {\n                style.removeProperty(name);\n            }\n            for (const name of toUpdate) {\n                const value = this.style[name];\n                if (!name.includes('-')) {\n                    style[name] = value;\n                }\n                else {\n                    style.setProperty(name, value);\n                }\n            }\n            if (this.detach && parent) {\n                parent.insertBefore(element, nextSibling);\n            }\n            this.previous = Object.assign({}, this.style);\n        }\n    }\n}\n\nclass Action {\n    constructor() {\n        this.isAction = true;\n    }\n}\nAction.prototype.isAction = true;\n\nconst defaultOptions = {\n    element: document.createTextNode(''),\n    axis: 'xy',\n    threshold: 10,\n    onDown(data) { },\n    onMove(data) { },\n    onUp(data) { },\n    onWheel(data) { }\n};\nconst pointerEventsExists = typeof PointerEvent !== 'undefined';\nlet id = 0;\nclass PointerAction extends Action {\n    constructor(element, data) {\n        super();\n        this.moving = '';\n        this.initialX = 0;\n        this.initialY = 0;\n        this.lastY = 0;\n        this.lastX = 0;\n        this.onPointerDown = this.onPointerDown.bind(this);\n        this.onPointerMove = this.onPointerMove.bind(this);\n        this.onPointerUp = this.onPointerUp.bind(this);\n        this.onWheel = this.onWheel.bind(this);\n        this.element = element;\n        this.id = ++id;\n        this.options = Object.assign(Object.assign({}, defaultOptions), data.pointerOptions);\n        if (pointerEventsExists) {\n            element.addEventListener('pointerdown', this.onPointerDown);\n            document.addEventListener('pointermove', this.onPointerMove);\n            document.addEventListener('pointerup', this.onPointerUp);\n        }\n        else {\n            element.addEventListener('touchstart', this.onPointerDown);\n            document.addEventListener('touchmove', this.onPointerMove, { passive: false });\n            document.addEventListener('touchend', this.onPointerUp);\n            document.addEventListener('touchcancel', this.onPointerUp);\n            element.addEventListener('mousedown', this.onPointerDown);\n            document.addEventListener('mousemove', this.onPointerMove, { passive: false });\n            document.addEventListener('mouseup', this.onPointerUp);\n        }\n    }\n    normalizeMouseWheelEvent(event) {\n        // @ts-ignore\n        let x = event.deltaX || 0;\n        // @ts-ignore\n        let y = event.deltaY || 0;\n        // @ts-ignore\n        let z = event.deltaZ || 0;\n        // @ts-ignore\n        const mode = event.deltaMode;\n        // @ts-ignore\n        const lineHeight = parseInt(getComputedStyle(event.target).getPropertyValue('line-height'));\n        let scale = 1;\n        switch (mode) {\n            case 1:\n                scale = lineHeight;\n                break;\n            case 2:\n                // @ts-ignore\n                scale = window.height;\n                break;\n        }\n        x *= scale;\n        y *= scale;\n        z *= scale;\n        return { x, y, z, event };\n    }\n    onWheel(event) {\n        const normalized = this.normalizeMouseWheelEvent(event);\n        this.options.onWheel(normalized);\n    }\n    normalizePointerEvent(event) {\n        let result = { x: 0, y: 0, pageX: 0, pageY: 0, clientX: 0, clientY: 0, screenX: 0, screenY: 0, event };\n        switch (event.type) {\n            case 'wheel':\n                const wheel = this.normalizeMouseWheelEvent(event);\n                result.x = wheel.x;\n                result.y = wheel.y;\n                result.pageX = result.x;\n                result.pageY = result.y;\n                result.screenX = result.x;\n                result.screenY = result.y;\n                result.clientX = result.x;\n                result.clientY = result.y;\n                break;\n            case 'touchstart':\n            case 'touchmove':\n            case 'touchend':\n            case 'touchcancel':\n                result.x = event.changedTouches[0].screenX;\n                result.y = event.changedTouches[0].screenY;\n                result.pageX = event.changedTouches[0].pageX;\n                result.pageY = event.changedTouches[0].pageY;\n                result.screenX = event.changedTouches[0].screenX;\n                result.screenY = event.changedTouches[0].screenY;\n                result.clientX = event.changedTouches[0].clientX;\n                result.clientY = event.changedTouches[0].clientY;\n                break;\n            default:\n                result.x = event.x;\n                result.y = event.y;\n                result.pageX = event.pageX;\n                result.pageY = event.pageY;\n                result.screenX = event.screenX;\n                result.screenY = event.screenY;\n                result.clientX = event.clientX;\n                result.clientY = event.clientY;\n                break;\n        }\n        return result;\n    }\n    onPointerDown(event) {\n        if (event.type === 'mousedown' && event.button !== 0)\n            return;\n        this.moving = 'xy';\n        const normalized = this.normalizePointerEvent(event);\n        this.lastX = normalized.x;\n        this.lastY = normalized.y;\n        this.initialX = normalized.x;\n        this.initialY = normalized.y;\n        this.options.onDown(normalized);\n    }\n    handleX(normalized) {\n        let movementX = normalized.x - this.lastX;\n        this.lastY = normalized.y;\n        this.lastX = normalized.x;\n        return movementX;\n    }\n    handleY(normalized) {\n        let movementY = normalized.y - this.lastY;\n        this.lastY = normalized.y;\n        this.lastX = normalized.x;\n        return movementY;\n    }\n    onPointerMove(event) {\n        if (this.moving === '' || (event.type === 'mousemove' && event.button !== 0))\n            return;\n        const normalized = this.normalizePointerEvent(event);\n        if (this.options.axis === 'x|y') {\n            let movementX = 0, movementY = 0;\n            if (this.moving === 'x' ||\n                (this.moving === 'xy' && Math.abs(normalized.x - this.initialX) > this.options.threshold)) {\n                this.moving = 'x';\n                movementX = this.handleX(normalized);\n            }\n            if (this.moving === 'y' ||\n                (this.moving === 'xy' && Math.abs(normalized.y - this.initialY) > this.options.threshold)) {\n                this.moving = 'y';\n                movementY = this.handleY(normalized);\n            }\n            this.options.onMove({\n                movementX,\n                movementY,\n                x: normalized.x,\n                y: normalized.y,\n                initialX: this.initialX,\n                initialY: this.initialY,\n                lastX: this.lastX,\n                lastY: this.lastY,\n                event\n            });\n        }\n        else if (this.options.axis === 'xy') {\n            let movementX = 0, movementY = 0;\n            if (Math.abs(normalized.x - this.initialX) > this.options.threshold) {\n                movementX = this.handleX(normalized);\n            }\n            if (Math.abs(normalized.y - this.initialY) > this.options.threshold) {\n                movementY = this.handleY(normalized);\n            }\n            this.options.onMove({\n                movementX,\n                movementY,\n                x: normalized.x,\n                y: normalized.y,\n                initialX: this.initialX,\n                initialY: this.initialY,\n                lastX: this.lastX,\n                lastY: this.lastY,\n                event\n            });\n        }\n        else if (this.options.axis === 'x') {\n            if (this.moving === 'x' ||\n                (this.moving === 'xy' && Math.abs(normalized.x - this.initialX) > this.options.threshold)) {\n                this.moving = 'x';\n                this.options.onMove({\n                    movementX: this.handleX(normalized),\n                    movementY: 0,\n                    initialX: this.initialX,\n                    initialY: this.initialY,\n                    lastX: this.lastX,\n                    lastY: this.lastY,\n                    event\n                });\n            }\n        }\n        else if (this.options.axis === 'y') {\n            let movementY = 0;\n            if (this.moving === 'y' ||\n                (this.moving === 'xy' && Math.abs(normalized.y - this.initialY) > this.options.threshold)) {\n                this.moving = 'y';\n                movementY = this.handleY(normalized);\n            }\n            this.options.onMove({\n                movementX: 0,\n                movementY,\n                x: normalized.x,\n                y: normalized.y,\n                initialX: this.initialX,\n                initialY: this.initialY,\n                lastX: this.lastX,\n                lastY: this.lastY,\n                event\n            });\n        }\n    }\n    onPointerUp(event) {\n        this.moving = '';\n        const normalized = this.normalizePointerEvent(event);\n        this.options.onUp({\n            movementX: 0,\n            movementY: 0,\n            x: normalized.x,\n            y: normalized.y,\n            initialX: this.initialX,\n            initialY: this.initialY,\n            lastX: this.lastX,\n            lastY: this.lastY,\n            event\n        });\n        this.lastY = 0;\n        this.lastX = 0;\n    }\n    destroy(element) {\n        if (pointerEventsExists) {\n            element.removeEventListener('pointerdown', this.onPointerDown);\n            document.removeEventListener('pointermove', this.onPointerMove);\n            document.removeEventListener('pointerup', this.onPointerUp);\n        }\n        else {\n            element.removeEventListener('mousedown', this.onPointerDown);\n            document.removeEventListener('mousemove', this.onPointerMove);\n            document.removeEventListener('mouseup', this.onPointerUp);\n            element.removeEventListener('touchstart', this.onPointerDown);\n            document.removeEventListener('touchmove', this.onPointerMove);\n            document.removeEventListener('touchend', this.onPointerUp);\n            document.removeEventListener('touchcancel', this.onPointerUp);\n        }\n    }\n}\n\nfunction getPublicComponentMethods(components, actionsByInstance, clone) {\n    return class PublicComponentMethods {\n        constructor(instance, vidoInstance, props = {}) {\n            this.instance = instance;\n            this.name = vidoInstance.name;\n            this.vidoInstance = vidoInstance;\n            this.props = props;\n            this.destroy = this.destroy.bind(this);\n            this.update = this.update.bind(this);\n            this.change = this.change.bind(this);\n            this.html = this.html.bind(this);\n        }\n        /**\n         * Destroy component\n         */\n        destroy() {\n            if (this.vidoInstance.debug) {\n                console.groupCollapsed(`destroying component ${this.instance}`);\n                console.log(clone({ components: components.keys(), actionsByInstance }));\n                console.trace();\n                console.groupEnd();\n            }\n            return this.vidoInstance.destroyComponent(this.instance, this.vidoInstance);\n        }\n        /**\n         * Update template - trigger rendering process\n         */\n        update() {\n            if (this.vidoInstance.debug) {\n                console.groupCollapsed(`updating component ${this.instance}`);\n                console.log(clone({ components: components.keys(), actionsByInstance }));\n                console.trace();\n                console.groupEnd();\n            }\n            return this.vidoInstance.updateTemplate(this.vidoInstance);\n        }\n        /**\n         * Change component input properties\n         * @param {any} newProps\n         */\n        change(newProps, options) {\n            if (this.vidoInstance.debug) {\n                console.groupCollapsed(`changing component ${this.instance}`);\n                console.log(clone({ props: this.props, newProps: newProps, components: components.keys(), actionsByInstance }));\n                console.trace();\n                console.groupEnd();\n            }\n            components.get(this.instance).change(newProps, options);\n        }\n        /**\n         * Get component lit-html template\n         * @param {} templateProps\n         */\n        html(templateProps = {}) {\n            const component = components.get(this.instance);\n            if (component) {\n                return component.update(templateProps, this.vidoInstance);\n            }\n            return undefined;\n        }\n        _getComponents() {\n            return components;\n        }\n        _getActions() {\n            return actionsByInstance;\n        }\n    };\n}\n\nfunction getActionsCollector(actionsByInstance) {\n    return class ActionsCollector extends Directive {\n        constructor(instance) {\n            super();\n            this.instance = instance;\n        }\n        set(actions, props) {\n            this.actions = actions;\n            this.props = props;\n            // props must be mutable! (do not do this -> {...props})\n            // because we will modify action props with onChange and can reuse existin instance\n            return this;\n        }\n        body(part) {\n            const element = part.committer.element;\n            for (const create of this.actions) {\n                if (typeof create !== 'undefined') {\n                    let exists;\n                    if (actionsByInstance.has(this.instance)) {\n                        for (const action of actionsByInstance.get(this.instance)) {\n                            if (action.componentAction.create === create && action.element === element) {\n                                exists = action;\n                                break;\n                            }\n                        }\n                    }\n                    if (!exists) {\n                        // @ts-ignore\n                        if (typeof element.vido !== 'undefined')\n                            delete element.vido;\n                        const componentAction = {\n                            create,\n                            update() { },\n                            destroy() { }\n                        };\n                        const action = { instance: this.instance, componentAction, element, props: this.props };\n                        let byInstance = [];\n                        if (actionsByInstance.has(this.instance)) {\n                            byInstance = actionsByInstance.get(this.instance);\n                        }\n                        byInstance.push(action);\n                        actionsByInstance.set(this.instance, byInstance);\n                    }\n                    else {\n                        exists.props = this.props;\n                    }\n                }\n            }\n        }\n    };\n}\n\nfunction getInternalComponentMethods(components, actionsByInstance, clone) {\n    return class InternalComponentMethods {\n        constructor(instance, vidoInstance, renderFunction, content) {\n            this.instance = instance;\n            this.vidoInstance = vidoInstance;\n            this.renderFunction = renderFunction;\n            this.content = content;\n        }\n        destroy() {\n            var _a;\n            if (this.vidoInstance.debug) {\n                console.groupCollapsed(`component destroy method fired ${this.instance}`);\n                console.log(clone({\n                    props: this.vidoInstance.props,\n                    components: components.keys(),\n                    destroyable: this.vidoInstance.destroyable,\n                    actionsByInstance\n                }));\n                console.trace();\n                console.groupEnd();\n            }\n            if (typeof ((_a = this.content) === null || _a === void 0 ? void 0 : _a.destroy) === 'function') {\n                this.content.destroy();\n            }\n            for (const d of this.vidoInstance.destroyable) {\n                d();\n            }\n            this.vidoInstance.onChangeFunctions = [];\n            this.vidoInstance.destroyable = [];\n            this.vidoInstance.update();\n        }\n        update(props = {}) {\n            if (this.vidoInstance.debug) {\n                console.groupCollapsed(`component update method fired ${this.instance}`);\n                console.log(clone({ components: components.keys(), actionsByInstance }));\n                console.trace();\n                console.groupEnd();\n            }\n            return this.renderFunction(props);\n        }\n        change(changedProps, options = { leave: false }) {\n            const props = changedProps;\n            if (this.vidoInstance.debug) {\n                console.groupCollapsed(`component change method fired ${this.instance}`);\n                console.log(clone({\n                    props,\n                    components: components.keys(),\n                    onChangeFunctions: this.vidoInstance.onChangeFunctions,\n                    changedProps,\n                    actionsByInstance\n                }));\n                console.trace();\n                console.groupEnd();\n            }\n            for (const fn of this.vidoInstance.onChangeFunctions) {\n                fn(changedProps, options);\n            }\n        }\n    };\n}\n\n/**\n * Schedule - a throttle function that uses requestAnimationFrame to limit the rate at which a function is called.\n *\n * @param {function} fn\n * @returns {function}\n */\nfunction schedule(fn) {\n    let frameId = 0;\n    function wrapperFn(argument) {\n        if (frameId) {\n            return;\n        }\n        function executeFrame() {\n            frameId = 0;\n            fn.apply(undefined, [argument]);\n        }\n        frameId = requestAnimationFrame(executeFrame);\n    }\n    return wrapperFn;\n}\n/**\n * Is object - helper function to determine if specified variable is an object\n *\n * @param {any} item\n * @returns {boolean}\n */\nfunction isObject(item) {\n    return item && typeof item === 'object' && !Array.isArray(item);\n}\n/**\n * Merge deep - helper function which will merge objects recursively - creating brand new one - like clone\n *\n * @param {object} target\n * @params {object} sources\n * @returns {object}\n */\nfunction mergeDeep(target, ...sources) {\n    const source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (typeof target[key] === 'undefined') {\n                    target[key] = {};\n                }\n                target[key] = mergeDeep(target[key], source[key]);\n            }\n            else if (Array.isArray(source[key])) {\n                target[key] = [];\n                for (let item of source[key]) {\n                    if (isObject(item)) {\n                        target[key].push(mergeDeep({}, item));\n                        continue;\n                    }\n                    target[key].push(item);\n                }\n            }\n            else {\n                target[key] = source[key];\n            }\n        }\n    }\n    if (!sources.length) {\n        return target;\n    }\n    return mergeDeep(target, ...sources);\n}\n/**\n * Clone helper function\n *\n * @param source\n * @returns {object} cloned source\n */\nfunction clone(source) {\n    if (typeof source.actions !== 'undefined') {\n        const actns = source.actions.map((action) => {\n            const result = Object.assign({}, action);\n            const props = Object.assign({}, result.props);\n            delete props.state;\n            delete props.api;\n            delete result.element;\n            result.props = props;\n            return result;\n        });\n        source.actions = actns;\n    }\n    return mergeDeep({}, source);\n}\n\n/* dev imports\nimport { render, html, directive, svg, Part } from '../lit-html';\nimport { asyncAppend } from '../lit-html/directives/async-append';\nimport { asyncReplace } from '../lit-html/directives/async-replace';\nimport { cache } from '../lit-html/directives/cache';\nimport { classMap } from '../lit-html/directives/class-map';\nimport { guard } from '../lit-html/directives/guard';\nimport { ifDefined } from '../lit-html/directives/if-defined';\nimport { repeat } from '../lit-html/directives/repeat';\nimport { unsafeHTML } from '../lit-html/directives/unsafe-html';\nimport { until } from '../lit-html/directives/until';\nimport { Directive } from '../lit-html/lib/directive';\n*/\n/**\n * Vido library\n *\n * @param {any} state - state management for the view (can be anything)\n * @param {any} api - some api's or other globally available services\n * @returns {object} vido instance\n */\nfunction Vido(state, api) {\n    let componentId = 0;\n    const components = new Map();\n    let actionsByInstance = new Map();\n    let app, element;\n    let shouldUpdateCount = 0;\n    const resolved = Promise.resolve();\n    const additionalMethods = {};\n    const ActionsCollector = getActionsCollector(actionsByInstance);\n    class InstanceActionsCollector {\n        constructor(instance) {\n            this.instance = instance;\n        }\n        create(actions, props) {\n            const actionsInstance = new ActionsCollector(this.instance);\n            actionsInstance.set(actions, props);\n            return actionsInstance;\n        }\n    }\n    const PublicComponentMethods = getPublicComponentMethods(components, actionsByInstance, clone);\n    /**\n     * Create vido instance for component\n     */\n    function vido() {\n        this.destroyable = [];\n        this.onChangeFunctions = [];\n        this.debug = false;\n        this.state = state;\n        this.api = api;\n        this.lastProps = {};\n        this.reuseComponents = this.reuseComponents.bind(this);\n        this.onDestroy = this.onDestroy.bind(this);\n        this.onChange = this.onChange.bind(this);\n        this.update = this.update.bind(this);\n        for (const name in additionalMethods) {\n            this[name] = additionalMethods[name];\n        }\n    }\n    vido.prototype.html = html;\n    vido.prototype.svg = svg;\n    vido.prototype.directive = directive;\n    vido.prototype.asyncAppend = asyncAppend;\n    vido.prototype.asyncReplace = asyncReplace;\n    vido.prototype.cache = cache;\n    vido.prototype.classMap = classMap;\n    vido.prototype.guard = guard;\n    vido.prototype.ifDefined = ifDefined;\n    vido.prototype.repeat = repeat;\n    vido.prototype.unsafeHTML = unsafeHTML;\n    vido.prototype.until = until;\n    vido.prototype.schedule = schedule;\n    vido.prototype.actionsByInstance = (componentActions, props) => { };\n    vido.prototype.StyleMap = StyleMap;\n    vido.prototype.Detach = Detach;\n    vido.prototype.PointerAction = PointerAction;\n    vido.prototype.addMethod = function addMethod(name, body) {\n        additionalMethods[name] = body;\n    };\n    vido.prototype.Action = Action;\n    vido.prototype.onDestroy = function onDestroy(fn) {\n        this.destroyable.push(fn);\n    };\n    vido.prototype.onChange = function onChange(fn) {\n        this.onChangeFunctions.push(fn);\n    };\n    vido.prototype.update = function update(callback) {\n        return this.updateTemplate(callback);\n    };\n    /**\n     * Reuse existing components when your data was changed\n     *\n     * @param {array} currentComponents - array of components\n     * @param {array} dataArray  - any data as array for each component\n     * @param {function} getProps - you can pass params to component from array item ( example: item=>({id:item.id}) )\n     * @param {function} component - what kind of components do you want to create?\n     * @param {boolean} leaveTail - leave last elements and do not destroy corresponding components\n     * @returns {array} of components (with updated/destroyed/created ones)\n     */\n    vido.prototype.reuseComponents = function reuseComponents(currentComponents, dataArray, getProps, component, leaveTail = true) {\n        const modified = [];\n        const currentLen = currentComponents.length;\n        const dataLen = dataArray.length;\n        let leave = false;\n        if (leaveTail && (dataArray === undefined || dataArray.length === 0)) {\n            leave = true;\n        }\n        let leaveStartingAt = 0;\n        if (currentLen < dataLen) {\n            let diff = dataLen - currentLen;\n            while (diff) {\n                const item = dataArray[dataLen - diff];\n                const newComponent = this.createComponent(component, getProps(item));\n                currentComponents.push(newComponent);\n                modified.push(newComponent.instance);\n                diff--;\n            }\n        }\n        else if (currentLen > dataLen) {\n            let diff = currentLen - dataLen;\n            if (leaveTail) {\n                leave = true;\n                leaveStartingAt = currentLen - diff;\n            }\n            while (diff) {\n                const index = currentLen - diff;\n                if (!leaveTail) {\n                    modified.push(currentComponents[index].instance);\n                    currentComponents[index].destroy();\n                }\n                diff--;\n            }\n            if (!leaveTail) {\n                currentComponents.length = dataLen;\n            }\n        }\n        let index = 0;\n        for (const component of currentComponents) {\n            const item = dataArray[index];\n            if (!modified.includes(component.instance)) {\n                component.change(getProps(item), { leave: leave && index >= leaveStartingAt });\n            }\n            index++;\n        }\n    };\n    const InternalComponentMethods = getInternalComponentMethods(components, actionsByInstance, clone);\n    /**\n     * Create component\n     *\n     * @param {function} component\n     * @param {any} props\n     * @returns {object} component instance methods\n     */\n    function createComponent(component, props = {}, content = null) {\n        const instance = component.name + ':' + componentId++;\n        let vidoInstance;\n        vidoInstance = new vido();\n        vidoInstance.instance = instance;\n        vidoInstance.name = component.name;\n        vidoInstance.Actions = new InstanceActionsCollector(instance);\n        const publicMethods = new PublicComponentMethods(instance, vidoInstance, props);\n        const internalMethods = new InternalComponentMethods(instance, vidoInstance, component(vidoInstance, props, content), content);\n        components.set(instance, internalMethods);\n        components.get(instance).change(props);\n        if (vidoInstance.debug) {\n            console.groupCollapsed(`component created ${instance}`);\n            console.log(clone({ props, components: components.keys(), actionsByInstance }));\n            console.trace();\n            console.groupEnd();\n        }\n        return publicMethods;\n    }\n    vido.prototype.createComponent = createComponent;\n    class Slot extends Directive {\n        constructor(components, props = {}, content = null) {\n            super();\n            this.components = [];\n            if (Array.isArray(components)) {\n                for (const component of components) {\n                    this.components.push(createComponent(component, props, content));\n                }\n            }\n        }\n        body(part) {\n            part.setValue(this.components.map((component) => component.html()));\n        }\n        change(changedProps, options) {\n            for (const component of this.components) {\n                component.change(changedProps, options);\n            }\n        }\n        getComponents() {\n            return this.components;\n        }\n        setComponents(components) {\n            this.components = components;\n        }\n        destroy() {\n            for (const component of this.components) {\n                component.destroy();\n            }\n        }\n    }\n    vido.prototype.Slot = Slot;\n    class Slots {\n        constructor() {\n            this.slots = {};\n        }\n        addSlot(name, slot) {\n            if (this.slots[name] === undefined) {\n                this.slots[name] = [];\n            }\n            this.slots[name].push(slot);\n        }\n        change(changedProps, options) {\n            for (const name in this.slots) {\n                for (const slot of this.slots[name]) {\n                    slot.change(changedProps, options);\n                }\n            }\n        }\n        destroy() {\n            for (const name in this.slots) {\n                for (const slot of this.slots[name]) {\n                    slot.destroy();\n                }\n            }\n        }\n        get(name) {\n            return this.slots[name];\n        }\n        set(name, value) {\n            this.slots[name] = value;\n        }\n    }\n    vido.prototype.Slots = Slots;\n    /**\n     * Destroy component\n     *\n     * @param {string} instance\n     * @param {object} vidoInstance\n     */\n    vido.prototype.destroyComponent = function destroyComponent(instance, vidoInstance) {\n        if (vidoInstance.debug) {\n            console.groupCollapsed(`destroying component ${instance}...`);\n            console.log(clone({ components: components.keys(), actionsByInstance }));\n            console.trace();\n            console.groupEnd();\n        }\n        if (actionsByInstance.has(instance)) {\n            for (const action of actionsByInstance.get(instance)) {\n                if (typeof action.componentAction.destroy === 'function') {\n                    action.componentAction.destroy(action.element, action.props);\n                }\n            }\n        }\n        actionsByInstance.delete(instance);\n        const component = components.get(instance);\n        component.update();\n        component.destroy();\n        components.delete(instance);\n        if (vidoInstance.debug) {\n            console.groupCollapsed(`component destroyed ${instance}`);\n            console.log(clone({ components: components.keys(), actionsByInstance }));\n            console.trace();\n            console.groupEnd();\n        }\n    };\n    /**\n     * Update template - trigger render proccess\n     * @param {object} vidoInstance\n     */\n    vido.prototype.updateTemplate = function updateTemplate(callback) {\n        return new Promise((resolve) => {\n            const currentShouldUpdateCount = ++shouldUpdateCount;\n            const self = this;\n            function flush() {\n                if (currentShouldUpdateCount === shouldUpdateCount) {\n                    shouldUpdateCount = 0;\n                    self.render();\n                    if (typeof callback === 'function')\n                        callback();\n                    resolve();\n                }\n            }\n            resolved.then(flush);\n        });\n    };\n    /**\n     * Create app\n     *\n     * @param config\n     * @returns {object} component instance methods\n     */\n    vido.prototype.createApp = function createApp(config) {\n        element = config.element;\n        const App = this.createComponent(config.component, config.props);\n        app = App.instance;\n        this.render();\n        return App;\n    };\n    /**\n     * Execute actions\n     */\n    vido.prototype.executeActions = function executeActions() {\n        var _a, _b, _c;\n        for (const actions of actionsByInstance.values()) {\n            for (const action of actions) {\n                if (action.element.vido === undefined) {\n                    const componentAction = action.componentAction;\n                    const create = componentAction.create;\n                    if (typeof create !== 'undefined') {\n                        let result;\n                        if (((_a = create.prototype) === null || _a === void 0 ? void 0 : _a.isAction) !== true &&\n                            create.isAction === undefined &&\n                            ((_b = create.prototype) === null || _b === void 0 ? void 0 : _b.update) === undefined &&\n                            ((_c = create.prototype) === null || _c === void 0 ? void 0 : _c.destroy) === undefined) {\n                            result = create(action.element, action.props);\n                        }\n                        else {\n                            result = new create(action.element, action.props);\n                        }\n                        if (result !== undefined) {\n                            if (typeof result === 'function') {\n                                componentAction.destroy = result;\n                            }\n                            else {\n                                if (typeof result.update === 'function') {\n                                    componentAction.update = result.update.bind(result);\n                                }\n                                if (typeof result.destroy === 'function') {\n                                    componentAction.destroy = result.destroy.bind(result);\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    action.element.vido = action.props;\n                    if (typeof action.componentAction.update === 'function') {\n                        action.componentAction.update(action.element, action.props);\n                    }\n                }\n            }\n            for (const action of actions) {\n                action.element.vido = action.props;\n            }\n        }\n    };\n    /**\n     * Render view\n     */\n    vido.prototype.render = function renderView() {\n        const appComponent = components.get(app);\n        if (appComponent) {\n            render(appComponent.update(), element);\n            this.executeActions();\n        }\n        else if (element) {\n            element.remove();\n        }\n    };\n    vido.prototype._components = components;\n    vido.prototype._actions = actionsByInstance;\n    return new vido();\n}\nVido.prototype.lithtml = lithtml;\nVido.prototype.Action = Action;\nVido.prototype.Directive = Directive;\nVido.prototype.schedule = schedule;\nVido.prototype.Detach = Detach;\nVido.prototype.StyleMap = StyleMap;\nVido.prototype.PointerAction = PointerAction;\nVido.prototype.asyncAppend = asyncAppend;\nVido.prototype.asyncReplace = asyncReplace;\nVido.prototype.cache = cache;\nVido.prototype.classMap = classMap;\nVido.prototype.guard = guard;\nVido.prototype.ifDefined = ifDefined;\nVido.prototype.repeat = repeat;\nVido.prototype.unsafeHTML = unsafeHTML;\nVido.prototype.unti = until;\n\n/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser$1 = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser$1 || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser$1 || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser$1) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\n/**\n * Main component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction Main(vido, props = {}) {\n    const { api, state, onDestroy, Actions, update, createComponent, html, StyleMap, schedule } = vido;\n    const componentName = api.name;\n    // Initialize plugins\n    onDestroy(state.subscribe('config.plugins', plugins => {\n        if (typeof plugins !== 'undefined' && Array.isArray(plugins)) {\n            for (const initializePlugin of plugins) {\n                const destroyPlugin = initializePlugin(vido);\n                if (typeof destroyPlugin === 'function') {\n                    onDestroy(destroyPlugin);\n                }\n                else if (destroyPlugin && destroyPlugin.hasOwnProperty('destroy')) {\n                    destroyPlugin.destroy();\n                }\n            }\n        }\n    }));\n    const componentSubs = [];\n    let ListComponent;\n    componentSubs.push(state.subscribe('config.components.List', value => (ListComponent = value)));\n    let ChartComponent;\n    componentSubs.push(state.subscribe('config.components.Chart', value => (ChartComponent = value)));\n    const List = createComponent(ListComponent);\n    onDestroy(List.destroy);\n    const Chart = createComponent(ChartComponent);\n    onDestroy(Chart.destroy);\n    onDestroy(() => {\n        componentSubs.forEach(unsub => unsub());\n    });\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.Main', value => (wrapper = value)));\n    const componentActions = api.getActions('main');\n    let className, classNameVerticalScroll;\n    const styleMap = new StyleMap({}), verticalScrollStyleMap = new StyleMap({}), verticalScrollAreaStyleMap = new StyleMap({});\n    let verticalScrollBarElement;\n    let rowsHeight = 0;\n    let resizerActive = false;\n    /**\n     * Update class names\n     * @param {object} classNames\n     */\n    const updateClassNames = classNames => {\n        const config = state.get('config');\n        className = api.getClass(componentName, { config });\n        if (resizerActive) {\n            className += ` ${componentName}__list-column-header-resizer--active`;\n        }\n        classNameVerticalScroll = api.getClass('vertical-scroll', { config });\n        update();\n    };\n    onDestroy(state.subscribe('config.classNames', updateClassNames));\n    /**\n     * Height change\n     */\n    function heightChange() {\n        const config = state.get('config');\n        const scrollBarHeight = state.get('_internal.scrollBarHeight');\n        const height = config.height - config.headerHeight - scrollBarHeight;\n        state.update('_internal.height', height);\n        styleMap.style['--height'] = config.height + 'px';\n        verticalScrollStyleMap.style.height = height + 'px';\n        verticalScrollStyleMap.style.width = scrollBarHeight + 'px';\n        verticalScrollStyleMap.style['margin-top'] = config.headerHeight + 'px';\n        update();\n    }\n    onDestroy(state.subscribeAll(['config.height', 'config.headerHeight', '_internal.scrollBarHeight'], heightChange));\n    /**\n     * Resizer active change\n     * @param {boolean} active\n     */\n    function resizerActiveChange(active) {\n        resizerActive = active;\n        className = api.getClass(api.name);\n        if (resizerActive) {\n            className += ` ${api.name}__list-column-header-resizer--active`;\n        }\n        update();\n    }\n    onDestroy(state.subscribe('_internal.list.columns.resizer.active', resizerActiveChange));\n    /**\n     * Generate tree\n     * @param {object} bulk\n     * @param {object} eventInfo\n     */\n    function generateTree(bulk, eventInfo) {\n        if (state.get('_internal.flatTreeMap').length && eventInfo.type === 'subscribe') {\n            return;\n        }\n        const configRows = state.get('config.list.rows');\n        const rows = [];\n        for (const rowId in configRows) {\n            rows.push(configRows[rowId]);\n        }\n        api.fillEmptyRowValues(rows);\n        const configItems = state.get('config.chart.items');\n        const items = [];\n        for (const itemId in configItems) {\n            items.push(configItems[itemId]);\n        }\n        api.prepareItems(items);\n        const treeMap = api.makeTreeMap(rows, items);\n        state.update('_internal.treeMap', treeMap);\n        const flatTreeMapById = api.getFlatTreeMapById(treeMap);\n        state.update('_internal.flatTreeMapById', flatTreeMapById);\n        const flatTreeMap = api.flattenTreeMap(treeMap);\n        state.update('_internal.flatTreeMap', flatTreeMap);\n        update();\n    }\n    onDestroy(state.subscribeAll(['config.list.rows;', 'config.chart.items;'], generateTree));\n    onDestroy(state.subscribeAll(['config.list.rows.*.parentId', 'config.chart.items.*.rowId'], generateTree, { bulk: true }));\n    function prepareExpanded() {\n        const configRows = state.get('config.list.rows');\n        const rowsWithParentsExpanded = api.getRowsFromIds(api.getRowsWithParentsExpanded(state.get('_internal.flatTreeMap'), state.get('_internal.flatTreeMapById'), configRows), configRows);\n        rowsHeight = api.getRowsHeight(rowsWithParentsExpanded);\n        state.update('_internal.list.rowsHeight', rowsHeight);\n        state.update('_internal.list.rowsWithParentsExpanded', rowsWithParentsExpanded);\n        update();\n    }\n    onDestroy(state.subscribeAll(['config.list.rows.*.expanded', '_internal.treeMap;', 'config.list.rows.*.height'], prepareExpanded, { bulk: true }));\n    /**\n     * Generate visible rows\n     */\n    function generateVisibleRowsAndItems() {\n        const { visibleRows, compensation } = api.getVisibleRowsAndCompensation(state.get('_internal.list.rowsWithParentsExpanded'));\n        const smoothScroll = state.get('config.scroll.smooth');\n        const currentVisibleRows = state.get('_internal.list.visibleRows');\n        let shouldUpdate = true;\n        state.update('config.scroll.compensation.y', smoothScroll ? -compensation : 0);\n        if (visibleRows.length !== currentVisibleRows.length) {\n            shouldUpdate = true;\n        }\n        else if (visibleRows.length) {\n            shouldUpdate = visibleRows.some((row, index) => {\n                if (typeof currentVisibleRows[index] === 'undefined') {\n                    return true;\n                }\n                return row.id !== currentVisibleRows[index].id;\n            });\n        }\n        if (shouldUpdate) {\n            state.update('_internal.list.visibleRows', visibleRows);\n        }\n        const visibleItems = [];\n        for (const row of visibleRows) {\n            for (const item of row._internal.items) {\n                visibleItems.push(item);\n            }\n        }\n        state.update('_internal.chart.visibleItems', visibleItems);\n        update();\n    }\n    onDestroy(state.subscribeAll(['_internal.list.rowsWithParentsExpanded;', 'config.scroll.top', 'config.chart.items'], generateVisibleRowsAndItems, { bulk: true }));\n    let elementScrollTop = 0;\n    function onVisibleRowsChange() {\n        const top = state.get('config.scroll.top');\n        verticalScrollAreaStyleMap.style.width = '1px';\n        verticalScrollAreaStyleMap.style.height = rowsHeight + 'px';\n        if (elementScrollTop !== top && verticalScrollBarElement) {\n            elementScrollTop = top;\n            verticalScrollBarElement.scrollTop = top;\n        }\n        update();\n    }\n    onDestroy(state.subscribe('_internal.list.visibleRows;', onVisibleRowsChange));\n    /**\n     * Generate and add period dates\n     * @param {string} period\n     * @param {object} internalTime\n     */\n    const generatePeriodDates = (period, internalTime) => {\n        const dates = [];\n        let leftGlobal = internalTime.leftGlobal;\n        const timePerPixel = internalTime.timePerPixel;\n        let startOfLeft = api.time\n            .date(leftGlobal)\n            .startOf(period)\n            .valueOf();\n        if (startOfLeft < leftGlobal)\n            startOfLeft = leftGlobal;\n        let sub = leftGlobal - startOfLeft;\n        let subPx = sub / timePerPixel;\n        let leftPx = 0;\n        const diff = Math.ceil(api.time\n            .date(internalTime.rightGlobal)\n            .endOf(period)\n            .diff(api.time.date(leftGlobal).startOf(period), period, true));\n        for (let i = 0; i < diff; i++) {\n            const date = {\n                sub,\n                subPx,\n                leftGlobal,\n                rightGlobal: api.time\n                    .date(leftGlobal)\n                    .endOf(period)\n                    .valueOf(),\n                width: 0,\n                leftPx: 0,\n                rightPx: 0,\n                period\n            };\n            date.width = (date.rightGlobal - date.leftGlobal + sub) / timePerPixel;\n            date.leftPx = leftPx;\n            leftPx += date.width;\n            date.rightPx = leftPx;\n            dates.push(date);\n            leftGlobal = date.rightGlobal + 1;\n            sub = 0;\n            subPx = 0;\n        }\n        return dates;\n    };\n    function triggerLoadedEvent() {\n        if (state.get('_internal.loadedEventTriggered'))\n            return;\n        Promise.resolve().then(() => {\n            const element = state.get('_internal.elements.main');\n            const parent = element.parentNode;\n            const event = new Event('gstc-loaded');\n            element.dispatchEvent(event);\n            parent.dispatchEvent(event);\n        });\n        state.update('_internal.loadedEventTriggered', true);\n    }\n    function limitGlobalAndSetCenter(time) {\n        if (time.leftGlobal < time.finalFrom)\n            time.leftGlobal = time.finalFrom;\n        if (time.rightGlobal > time.finalTo)\n            time.rightGlobal = time.finalTo;\n        time.centerGlobal = time.leftGlobal + Math.round((time.rightGlobal - time.leftGlobal) / 2);\n        return time;\n    }\n    function guessPeriod(time, calendar) {\n        if (!time.zoom)\n            return time;\n        for (const level of calendar.levels) {\n            const formatting = level.formats.find(format => +time.zoom <= +format.zoomTo);\n            if (formatting && level.main) {\n                time.period = formatting.period;\n            }\n        }\n        return time;\n    }\n    function updateLevels(time, calendar) {\n        time.levels = [];\n        let index = 0;\n        for (const level of calendar.levels) {\n            const formatting = level.formats.find(format => +time.zoom <= +format.zoomTo);\n            if (level.main) {\n                time.format = formatting;\n                time.level = index;\n            }\n            if (formatting) {\n                time.levels.push(generatePeriodDates(formatting.period, time));\n            }\n            index++;\n        }\n    }\n    let working = false;\n    function recalculateTimes(reason) {\n        if (working)\n            return;\n        working = true;\n        const configTime = state.get('config.chart.time');\n        const chartWidth = state.get('_internal.chart.dimensions.width');\n        const calendar = state.get('config.chart.calendar');\n        const oldTime = Object.assign({}, state.get('_internal.chart.time'));\n        let time = api.mergeDeep({}, configTime);\n        if ((!time.from || !time.to) && !Object.keys(state.get('config.chart.items')).length) {\n            return;\n        }\n        let mainLevel = calendar.levels.find(level => level.main);\n        if (!mainLevel) {\n            throw new Error('Main calendar level not found (config.chart.calendar.levels).');\n        }\n        if (!time.calculatedZoomMode) {\n            if (time.period !== oldTime.period) {\n                let periodFormat = mainLevel.formats.find(format => format.period === time.period && format.default);\n                if (periodFormat) {\n                    time.zoom = periodFormat.zoomTo;\n                }\n            }\n            guessPeriod(time, calendar);\n        }\n        // If _internal.chart.time (leftGlobal, centerGlobal, rightGlobal, from , to) was changed\n        // then we need to apply those values - no recalculation is needed (values form plugins etc)\n        const justApply = ['leftGlobal', 'centerGlobal', 'rightGlobal', 'from', 'to'].includes(reason.name);\n        if (justApply) {\n            time = Object.assign(Object.assign({}, time), { leftGlobal: configTime.leftGlobal, centerGlobal: configTime.centerGlobal, rightGlobal: configTime.rightGlobal, from: configTime.from, to: configTime.to });\n        }\n        let scrollLeft = 0;\n        // source of everything = time.timePerPixel\n        if (time.calculatedZoomMode && chartWidth) {\n            time.finalFrom = time.from;\n            time.finalTo = time.to;\n            time.totalViewDurationMs = api.time.date(time.finalTo).diff(time.finalFrom, 'milliseconds');\n            time.timePerPixel = time.totalViewDurationMs / chartWidth;\n            time.zoom = Math.log(time.timePerPixel) / Math.log(2);\n            guessPeriod(time, calendar);\n            time.totalViewDurationPx = Math.round(time.totalViewDurationMs / time.timePerPixel);\n            time.leftGlobal = time.from;\n            time.rightGlobal = time.to;\n        }\n        else {\n            time.timePerPixel = Math.pow(2, time.zoom);\n            time = api.time.recalculateFromTo(time);\n            time.totalViewDurationMs = api.time.date(time.finalTo).diff(time.finalFrom, 'milliseconds');\n            time.totalViewDurationPx = Math.round(time.totalViewDurationMs / time.timePerPixel);\n            scrollLeft = state.get('config.scroll.left');\n        }\n        if (!justApply && !time.calculatedZoomMode) {\n            // If time.zoom (or time.period) has been changed\n            // then we need to recalculate basing on time.centerGlobal\n            // and update scroll left\n            // if not then we need to calculate from scroll left\n            // because change was triggered by scroll\n            if (time.zoom !== oldTime.zoom && oldTime.centerGlobal) {\n                const chartWidthInMs = chartWidth * time.timePerPixel;\n                const halfChartInMs = Math.round(chartWidthInMs / 2);\n                time.leftGlobal = oldTime.centerGlobal - halfChartInMs;\n                time.rightGlobal = time.leftGlobal + chartWidthInMs;\n                scrollLeft = (time.leftGlobal - time.finalFrom) / time.timePerPixel;\n                scrollLeft = api.limitScrollLeft(time.totalViewDurationPx, chartWidth, scrollLeft);\n            }\n            else {\n                time.leftGlobal = scrollLeft * time.timePerPixel + time.finalFrom;\n                time.rightGlobal = time.leftGlobal + chartWidth * time.timePerPixel;\n            }\n        }\n        limitGlobalAndSetCenter(time);\n        time.leftInner = time.leftGlobal - time.finalFrom;\n        time.rightInner = time.rightGlobal - time.finalFrom;\n        time.leftPx = time.leftInner / time.timePerPixel;\n        time.rightPx = time.rightInner / time.timePerPixel;\n        updateLevels(time, calendar);\n        let xCompensation = 0;\n        if (time.levels[time.level] && time.levels[time.level].length !== 0) {\n            xCompensation = time.levels[time.level][0].subPx;\n        }\n        state.update(`_internal.chart.time`, time);\n        state.update('config.scroll.compensation.x', xCompensation);\n        state.update('config.chart.time', configTime => {\n            configTime.zoom = time.zoom;\n            configTime.period = time.format.period;\n            configTime.leftGlobal = time.leftGlobal;\n            configTime.centerGlobal = time.centerGlobal;\n            configTime.rightGlobal = time.rightGlobal;\n            configTime.from = time.from;\n            configTime.to = time.to;\n            configTime.finalFrom = time.finalFrom;\n            configTime.finalTo = time.finalTo;\n            return configTime;\n        });\n        state.update('config.scroll.left', scrollLeft);\n        update().then(() => {\n            if (!state.get('_internal.loaded.time')) {\n                state.update('_internal.loaded.time', true);\n            }\n        });\n        working = false;\n    }\n    const recalculationTriggerCache = {\n        initialized: false,\n        zoom: 0,\n        period: '',\n        scrollLeft: 0,\n        chartWidth: 0,\n        leftGlobal: 0,\n        centerGlobal: 0,\n        rightGlobal: 0,\n        from: 0,\n        to: 0\n    };\n    function recalculationIsNeeded() {\n        const configTime = state.get('config.chart.time');\n        const scrollLeft = state.get('config.scroll.left');\n        const chartWidth = state.get('_internal.chart.dimensions.width');\n        const cache = Object.assign({}, recalculationTriggerCache);\n        recalculationTriggerCache.zoom = configTime.zoom;\n        recalculationTriggerCache.period = configTime.period;\n        recalculationTriggerCache.leftGlobal = configTime.leftGlobal;\n        recalculationTriggerCache.centerGlobal = configTime.centerGlobal;\n        recalculationTriggerCache.rightGlobal = configTime.rightGlobal;\n        recalculationTriggerCache.from = configTime.from;\n        recalculationTriggerCache.to = configTime.to;\n        recalculationTriggerCache.scrollLeft = scrollLeft;\n        recalculationTriggerCache.chartWidth = chartWidth;\n        if (!recalculationTriggerCache.initialized) {\n            recalculationTriggerCache.initialized = true;\n            return { name: 'all' };\n        }\n        if (configTime.zoom !== cache.zoom)\n            return { name: 'zoom', oldValue: cache.zoom, newValue: configTime.zoom };\n        if (configTime.period !== cache.period)\n            return { name: 'period', oldValue: cache.period, newValue: configTime.period };\n        if (configTime.leftGlobal !== cache.leftGlobal)\n            return { name: 'leftGlobal', oldValue: cache.leftGlobal, newValue: configTime.leftGlobal };\n        if (configTime.centerGlobal !== cache.centerGlobal)\n            return { name: 'centerGlobal', oldValue: cache.centerGlobal, newValue: configTime.centerGlobal };\n        if (configTime.rightGlobal !== cache.rightGlobal)\n            return { name: 'rightGlobal', oldValue: cache.rightGlobal, newValue: configTime.rightGlobal };\n        if (configTime.from !== cache.from)\n            return { name: 'from', oldValue: cache.from, newValue: configTime.from };\n        if (configTime.to !== cache.to)\n            return { name: 'to', oldValue: cache.to, newValue: configTime.to };\n        if (scrollLeft !== cache.scrollLeft)\n            return { name: 'scroll', oldValue: cache.scrollLeft, newValue: scrollLeft };\n        if (chartWidth !== cache.chartWidth)\n            return { name: 'chartWidth', oldValue: cache.chartWidth, newValue: chartWidth };\n        return false;\n    }\n    onDestroy(state.subscribeAll(['config.chart.time', 'config.chart.calendar.levels', 'config.scroll.left', '_internal.chart.dimensions.width'], () => {\n        let reason = recalculationIsNeeded();\n        if (reason)\n            recalculateTimes(reason);\n    }, { bulk: true }));\n    // When time.from and time.to is not specified and items are reloaded;\n    // check if item is outside current time scope and extend it if needed\n    onDestroy(state.subscribe('config.chart.items.*.time', items => {\n        recalculateTimes({ name: 'items' });\n    }, { bulk: true }));\n    if (state.get('config.usageStatistics') === true &&\n        location.port === '' &&\n        location.host !== '' &&\n        !location.host.startsWith('localhost') &&\n        !location.host.startsWith('127.') &&\n        !location.host.startsWith('192.') &&\n        !location.host.endsWith('.test') &&\n        !location.host.endsWith('.local')) {\n        try {\n            const oReq = new XMLHttpRequest();\n            oReq.open('POST', 'https://gstc-us.neuronet.io/');\n            oReq.send(JSON.stringify({ location: { href: location.href, host: location.host } }));\n        }\n        catch (e) { }\n    }\n    let scrollTop = 0;\n    let propagate = true;\n    onDestroy(state.subscribe('config.scroll.propagate', prpgt => (propagate = prpgt)));\n    /**\n     * Handle scroll Event\n     * @param {MouseEvent} event\n     */\n    function handleEvent(event) {\n        if (!propagate) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n        if (event.type === 'scroll') {\n            // @ts-ignore\n            const top = event.target.scrollTop;\n            /**\n             * Handle on scroll event\n             * @param {object} scroll\n             * @returns {object} scroll\n             */\n            const handleOnScroll = scroll => {\n                scroll.top = top;\n                scrollTop = scroll.top;\n                const scrollInner = state.get('_internal.elements.vertical-scroll-inner');\n                if (scrollInner) {\n                    const scrollHeight = scrollInner.clientHeight;\n                    scroll.percent.top = scroll.top / scrollHeight;\n                }\n                return scroll;\n            };\n            if (scrollTop !== top)\n                state.update('config.scroll', handleOnScroll, {\n                    only: ['top', 'percent.top']\n                });\n        }\n    }\n    const onScroll = {\n        handleEvent,\n        passive: false,\n        capture: false\n    };\n    const dimensions = { width: 0, height: 0 };\n    let ro;\n    /**\n     * Resize action\n     * @param {Element} element\n     */\n    class ResizeAction {\n        constructor(element) {\n            if (!ro) {\n                ro = new index((entries, observer) => {\n                    const width = element.clientWidth;\n                    const height = element.clientHeight;\n                    if (dimensions.width !== width || dimensions.height !== height) {\n                        dimensions.width = width;\n                        dimensions.height = height;\n                        state.update('_internal.dimensions', dimensions);\n                    }\n                });\n                ro.observe(element);\n                state.update('_internal.elements.main', element);\n            }\n        }\n        update() { }\n        destroy(element) {\n            ro.unobserve(element);\n        }\n    }\n    if (!componentActions.includes(ResizeAction)) {\n        componentActions.push(ResizeAction);\n    }\n    onDestroy(() => {\n        ro.disconnect();\n    });\n    /**\n     * Bind scroll element\n     * @param {HTMLElement} element\n     */\n    function bindScrollElement(element) {\n        if (!verticalScrollBarElement) {\n            verticalScrollBarElement = element;\n            state.update('_internal.elements.vertical-scroll', element);\n        }\n    }\n    onDestroy(state.subscribeAll(['_internal.loaded', '_internal.chart.time.totalViewDurationPx'], () => {\n        if (state.get('_internal.loadedEventTriggered'))\n            return;\n        const loaded = state.get('_internal.loaded');\n        if (loaded.main && loaded.chart && loaded.time && loaded['horizontal-scroll-inner']) {\n            const scroll = state.get('_internal.elements.horizontal-scroll-inner');\n            const width = state.get('_internal.chart.time.totalViewDurationPx');\n            if (scroll && scroll.clientWidth === Math.round(width)) {\n                setTimeout(triggerLoadedEvent, 0);\n            }\n        }\n    }));\n    function LoadedEventAction() {\n        state.update('_internal.loaded.main', true);\n    }\n    if (!componentActions.includes(LoadedEventAction))\n        componentActions.push(LoadedEventAction);\n    /**\n     * Bind scroll inner element\n     * @param {Element} element\n     */\n    function bindScrollInnerElement(element) {\n        if (!state.get('_internal.elements.vertical-scroll-inner'))\n            state.update('_internal.elements.vertical-scroll-inner', element);\n        if (!state.get('_internal.loaded.vertical-scroll-inner'))\n            state.update('_internal.loaded.vertical-scroll-inner', true);\n    }\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    const mainActions = Actions.create(componentActions, actionProps);\n    const verticalScrollActions = Actions.create([bindScrollElement]);\n    const verticalScrollAreaActions = Actions.create([bindScrollInnerElement]);\n    return templateProps => wrapper(html `\n        <div\n          data-info-url=\"https://github.com/neuronetio/gantt-schedule-timeline-calendar\"\n          class=${className}\n          style=${styleMap}\n          @scroll=${onScroll}\n          @wheel=${onScroll}\n          data-actions=${mainActions}\n        >\n          ${List.html()}${Chart.html()}\n          <div\n            class=${classNameVerticalScroll}\n            style=${verticalScrollStyleMap}\n            @scroll=${onScroll}\n            @wheel=${onScroll}\n            data-actions=${verticalScrollActions}\n          >\n            <div style=${verticalScrollAreaStyleMap} data-actions=${verticalScrollAreaActions} />\n          </div>\n        </div>\n      `, { props, vido, templateProps });\n}\n\n/**\n * List component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction List(vido, props = {}) {\n    const { api, state, onDestroy, Actions, update, reuseComponents, html, schedule, StyleMap, cache } = vido;\n    const componentName = 'list';\n    const componentActions = api.getActions(componentName);\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.List', value => (wrapper = value)));\n    let ListColumnComponent;\n    const listColumnUnsub = state.subscribe('config.components.ListColumn', value => (ListColumnComponent = value));\n    function renderExpanderIcons() {\n        const icons = state.get('config.list.expander.icons');\n        const rendered = {};\n        for (const iconName in icons) {\n            const html = icons[iconName];\n            rendered[iconName] = api.getSVGIconSrc(html);\n        }\n        state.update('_internal.list.expander.icons', rendered);\n    }\n    renderExpanderIcons();\n    function renderToggleIcons() {\n        const toggleIconsSrc = {\n            open: '',\n            close: ''\n        };\n        const icons = state.get('config.list.toggle.icons');\n        for (const iconName in icons) {\n            const html = icons[iconName];\n            toggleIconsSrc[iconName] = api.getSVGIconSrc(html);\n        }\n        state.update('_internal.list.toggle.icons', toggleIconsSrc);\n    }\n    renderToggleIcons();\n    let className;\n    let list, percent;\n    function onListChange() {\n        list = state.get('config.list');\n        percent = list.columns.percent;\n        update();\n    }\n    onDestroy(state.subscribe('config.list', onListChange));\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName, { list });\n        update();\n    }));\n    let listColumns = [];\n    function onListColumnsDataChange(data) {\n        const destroy = reuseComponents(listColumns, Object.values(data), column => ({ columnId: column.id }), ListColumnComponent);\n        update();\n        return destroy;\n    }\n    onDestroy(state.subscribe('config.list.columns.data;', onListColumnsDataChange));\n    const styleMap = new StyleMap({\n        height: '',\n        '--expander-padding-width': '',\n        '--expander-size': ''\n    });\n    onDestroy(state.subscribeAll(['config.height', 'config.list.expander'], bulk => {\n        const expander = state.get('config.list.expander');\n        styleMap.style['height'] = state.get('config.height') + 'px';\n        styleMap.style['--expander-padding-width'] = expander.padding + 'px';\n        styleMap.style['--expander-size'] = expander.size + 'px';\n        update();\n    }));\n    onDestroy(() => {\n        listColumns.forEach(listColumn => listColumn.destroy());\n        listColumnUnsub();\n    });\n    function onScroll(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        if (event.type === 'scroll') {\n            state.update('config.scroll.top', event.target.scrollTop);\n        }\n        else {\n            const wheel = api.normalizeMouseWheelEvent(event);\n            state.update('config.scroll.top', top => {\n                const rowsHeight = state.get('_internal.list.rowsHeight');\n                const internalHeight = state.get('_internal.height');\n                return api.limitScrollTop(rowsHeight, internalHeight, (top += wheel.y * state.get('config.scroll.yMultiplier')));\n            });\n        }\n    }\n    let width;\n    function getWidth(element) {\n        if (!width) {\n            width = element.clientWidth;\n            if (percent === 0) {\n                width = 0;\n            }\n            state.update('_internal.list.width', width);\n        }\n    }\n    class ListAction {\n        constructor(element, data) {\n            data.state.update('_internal.elements.list', element);\n            getWidth(element);\n        }\n        update(element) {\n            return getWidth(element);\n        }\n    }\n    componentActions.push(ListAction);\n    const actions = Actions.create(componentActions, Object.assign(Object.assign({}, props), { api, state }));\n    return templateProps => wrapper(cache(list.columns.percent > 0\n        ? html `\n              <div class=${className} data-actions=${actions} style=${styleMap} @scroll=${onScroll} @wheel=${onScroll}>\n                ${listColumns.map(c => c.html())}\n              </div>\n            `\n        : ''), { vido, props: {}, templateProps });\n}\n\n/**\n * ListColumn component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n/**\n * Bind element action\n */\nclass BindElementAction {\n    constructor(element, data) {\n        let shouldUpdate = false;\n        let elements = data.state.get('_internal.elements.list-columns');\n        if (typeof elements === 'undefined') {\n            elements = [];\n            shouldUpdate = true;\n        }\n        if (!elements.includes(element)) {\n            elements.push(element);\n            shouldUpdate = true;\n        }\n        if (shouldUpdate)\n            data.state.update('_internal.elements.list-columns', elements);\n    }\n    destroy(element, data) {\n        data.state.update('_internal.elements.list-columns', elements => {\n            return elements.filter(el => el !== element);\n        });\n    }\n}\nfunction ListColumn(vido, props) {\n    const { api, state, onDestroy, onChange, Actions, update, createComponent, reuseComponents, html, StyleMap } = vido;\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ListColumn', value => (wrapper = value)));\n    const componentsSub = [];\n    let ListColumnRowComponent;\n    componentsSub.push(state.subscribe('config.components.ListColumnRow', value => (ListColumnRowComponent = value)));\n    let ListColumnHeaderComponent;\n    componentsSub.push(state.subscribe('config.components.ListColumnHeader', value => (ListColumnHeaderComponent = value)));\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    const componentName = 'list-column';\n    const rowsComponentName = componentName + '-rows';\n    const componentActions = api.getActions(componentName);\n    const rowsActions = api.getActions(rowsComponentName);\n    let className, classNameContainer, calculatedWidth;\n    const widthStyleMap = new StyleMap({ width: '', '--width': '' });\n    const containerStyleMap = new StyleMap({ width: '', height: '' });\n    const scrollCompensationStyleMap = new StyleMap({ width: '', height: '' });\n    let column, columnPath = `config.list.columns.data.${props.columnId}`;\n    let columnSub = state.subscribe(columnPath, function columnChanged(val) {\n        column = val;\n        update();\n    });\n    let width;\n    function calculateStyle() {\n        const list = state.get('config.list');\n        const compensationY = state.get('config.scroll.compensation.y');\n        calculatedWidth = list.columns.data[column.id].width * list.columns.percent * 0.01;\n        width = calculatedWidth;\n        const height = state.get('_internal.height');\n        widthStyleMap.style.width = width + 'px';\n        widthStyleMap.style['--width'] = width + 'px';\n        containerStyleMap.style.height = height + 'px';\n        scrollCompensationStyleMap.style.height = height + Math.abs(compensationY) + 'px';\n        scrollCompensationStyleMap.style.transform = `translate(0px, ${compensationY}px)`;\n    }\n    let styleSub = state.subscribeAll([\n        'config.list.columns.percent',\n        'config.list.columns.resizer.width',\n        `config.list.columns.data.${column.id}.width`,\n        '_internal.chart.dimensions.width',\n        '_internal.height',\n        'config.scroll.compensation.y',\n        '_internal.list.width'\n    ], calculateStyle, { bulk: true });\n    const ListColumnHeader = createComponent(ListColumnHeaderComponent, { columnId: props.columnId });\n    onDestroy(ListColumnHeader.destroy);\n    onChange(changedProps => {\n        props = changedProps;\n        for (const prop in props) {\n            actionProps[prop] = props[prop];\n        }\n        if (columnSub)\n            columnSub();\n        ListColumnHeader.change({ columnId: props.columnId });\n        columnPath = `config.list.columns.data.${props.columnId}`;\n        columnSub = state.subscribe(columnPath, function columnChanged(val) {\n            column = val;\n            update();\n        });\n        if (styleSub)\n            styleSub();\n        styleSub = state.subscribeAll([\n            'config.list.columns.percent',\n            'config.list.columns.resizer.width',\n            `config.list.columns.data.${column.id}.width`,\n            '_internal.chart.dimensions.width',\n            '_internal.height',\n            'config.scroll.compensation.y',\n            '_internal.list.width'\n        ], calculateStyle, { bulk: true });\n        ListColumnHeader.change(props);\n    });\n    onDestroy(() => {\n        columnSub();\n        styleSub();\n    });\n    onDestroy(state.subscribe('config.classNames', value => {\n        className = api.getClass(componentName);\n        classNameContainer = api.getClass(rowsComponentName);\n        update();\n    }));\n    const visibleRows = [];\n    const visibleRowsChange = val => {\n        const destroy = reuseComponents(visibleRows, val || [], row => row && { columnId: props.columnId, rowId: row.id, width }, ListColumnRowComponent);\n        update();\n        return destroy;\n    };\n    onDestroy(state.subscribe('_internal.list.visibleRows;', visibleRowsChange));\n    onDestroy(() => {\n        visibleRows.forEach(row => row.destroy());\n        componentsSub.forEach(unsub => unsub());\n    });\n    function getRowHtml(row) {\n        return row.html();\n    }\n    componentActions.push(BindElementAction);\n    const headerActions = Actions.create(componentActions, { column, state: state, api: api });\n    const rowActions = Actions.create(rowsActions, { api, state });\n    return templateProps => wrapper(html `\n        <div class=${className} data-actions=${headerActions} style=${widthStyleMap}>\n          ${ListColumnHeader.html()}\n          <div class=${classNameContainer} style=${containerStyleMap} data-actions=${rowActions}>\n            <div class=${classNameContainer + '--scroll-compensation'} style=${scrollCompensationStyleMap}>\n              ${visibleRows.map(getRowHtml)}\n            </div>\n          </div>\n        </div>\n      `, { vido, props, templateProps });\n}\n\n/**\n * ListColumnHeader component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction ListColumnHeader(vido, props) {\n    const { api, state, onDestroy, onChange, Actions, update, createComponent, html, cache, StyleMap } = vido;\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ListColumnHeader', value => (wrapper = value)));\n    const componentName = 'list-column-header';\n    const componentActions = api.getActions(componentName);\n    const componentsSubs = [];\n    let ListColumnHeaderResizerComponent;\n    componentsSubs.push(state.subscribe('config.components.ListColumnHeaderResizer', value => (ListColumnHeaderResizerComponent = value)));\n    const ListColumnHeaderResizer = createComponent(ListColumnHeaderResizerComponent, { columnId: props.columnId });\n    let ListColumnRowExpanderComponent;\n    componentsSubs.push(state.subscribe('config.components.ListColumnRowExpander', value => (ListColumnRowExpanderComponent = value)));\n    const ListColumnRowExpander = createComponent(ListColumnRowExpanderComponent, {});\n    onDestroy(() => {\n        ListColumnHeaderResizer.destroy();\n        ListColumnRowExpander.destroy();\n        componentsSubs.forEach(unsub => unsub());\n    });\n    let column;\n    let columnSub = state.subscribe(`config.list.columns.data.${props.columnId}`, val => {\n        column = val;\n        update();\n    });\n    onDestroy(columnSub);\n    onChange(changedProps => {\n        props = changedProps;\n        for (const prop in props) {\n            actionProps[prop] = props[prop];\n        }\n        if (columnSub)\n            columnSub();\n        columnSub = state.subscribe(`config.list.columns.data.${props.columnId}`, val => {\n            column = val;\n            update();\n        });\n    });\n    let className, contentClass;\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName);\n        contentClass = api.getClass(componentName + '-content');\n    }));\n    const styleMap = new StyleMap({\n        height: '',\n        '--height': '',\n        '--paddings-count': ''\n    });\n    onDestroy(state.subscribe('config.headerHeight', () => {\n        const value = state.get('config');\n        styleMap.style['height'] = value.headerHeight + 'px';\n        styleMap.style['--height'] = value.headerHeight + 'px';\n        styleMap.style['--paddings-count'] = '1';\n        update();\n    }));\n    function withExpander() {\n        return html `\n      <div class=${contentClass}>\n        ${ListColumnRowExpander.html()}${ListColumnHeaderResizer.html(column)}\n      </div>\n    `;\n    }\n    function withoutExpander() {\n        return html `\n      <div class=${contentClass}>\n        ${ListColumnHeaderResizer.html(column)}\n      </div>\n    `;\n    }\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => wrapper(html `\n        <div class=${className} style=${styleMap} data-actions=${actions}>\n          ${cache(column.expander ? withExpander() : withoutExpander())}\n        </div>\n      `, { vido, props, templateProps });\n}\n\n/**\n * ListColumnHeaderResizer component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction ListColumnHeaderResizer(vido, props) {\n    const { api, state, onDestroy, update, html, schedule, Actions, PointerAction, cache, StyleMap } = vido;\n    const componentName = 'list-column-header-resizer';\n    const componentActions = api.getActions(componentName);\n    const componentDotsActions = api.getActions(componentName + '-dots');\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ListColumnHeaderResizer', value => (wrapper = value)));\n    let column;\n    onDestroy(state.subscribe(`config.list.columns.data.${props.columnId}`, val => {\n        column = val;\n        update();\n    }));\n    let className, containerClass, dotsClass, dotClass, calculatedWidth;\n    const dotsStyleMap = new StyleMap({ width: '' });\n    let inRealTime = false;\n    onDestroy(state.subscribe('config.classNames', value => {\n        className = api.getClass(componentName, { column });\n        containerClass = api.getClass(componentName + '-container', { column });\n        dotsClass = api.getClass(componentName + '-dots', { column });\n        dotClass = api.getClass(componentName + '-dots-dot', { column });\n        update();\n    }));\n    onDestroy(state.subscribeAll([\n        `config.list.columns.data.${column.id}.width`,\n        'config.list.columns.percent',\n        'config.list.columns.resizer.width',\n        'config.list.columns.resizer.inRealTime'\n    ], (value, path) => {\n        const list = state.get('config.list');\n        calculatedWidth = column.width * list.columns.percent * 0.01;\n        dotsStyleMap.style['--width'] = list.columns.resizer.width + 'px';\n        inRealTime = list.columns.resizer.inRealTime;\n        state.update('_internal.list.width', calculatedWidth);\n        update();\n    }));\n    let dots = [1, 2, 3, 4, 5, 6, 7, 8];\n    onDestroy(state.subscribe('config.list.columns.resizer.dots', value => {\n        dots = [];\n        for (let i = 0; i < value; i++) {\n            dots.push(i);\n        }\n        update();\n    }));\n    /*\n    let isMoving = false;\n    const lineStyleMap = new StyleMap({\n      '--display': 'none',\n      '--left': left + 'px'\n    });*/\n    let left = calculatedWidth;\n    const columnWidthPath = `config.list.columns.data.${column.id}.width`;\n    const actionProps = {\n        column,\n        api,\n        state,\n        pointerOptions: {\n            axis: 'x',\n            onMove: function onMove({ movementX }) {\n                let minWidth = state.get('config.list.columns.minWidth');\n                if (typeof column.minWidth === 'number') {\n                    minWidth = column.minWidth;\n                }\n                left += movementX;\n                if (left < minWidth) {\n                    left = minWidth;\n                }\n                if (inRealTime) {\n                    state.update(columnWidthPath, left);\n                }\n            }\n        }\n    };\n    componentActions.push(PointerAction);\n    const actions = Actions.create(componentActions, actionProps);\n    const dotsActions = Actions.create(componentDotsActions, actionProps);\n    return templateProps => wrapper(html `\n        <div class=${className} data-actions=${actions}>\n          <div class=${containerClass}>\n            ${cache(column.header.html\n        ? html `\n                    ${column.header.html}\n                  `\n        : column.header.content)}\n          </div>\n          <div class=${dotsClass} style=${dotsStyleMap} data-actions=${dotsActions}>\n            ${dots.map(dot => html `\n                  <div class=${dotClass} />\n                `)}\n          </div>\n        </div>\n      `, { vido, props, templateProps });\n}\n\n/**\n * ListColumnRow component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n/**\n * Bind element action\n */\nclass BindElementAction$1 {\n    constructor(element, data) {\n        let elements = data.state.get('_internal.elements.list-column-rows');\n        let shouldUpdate = false;\n        if (typeof elements === 'undefined') {\n            shouldUpdate = true;\n            elements = [];\n        }\n        if (!elements.includes(element)) {\n            elements.push(element);\n            shouldUpdate = true;\n        }\n        if (shouldUpdate)\n            data.state.update('_internal.elements.list-column-rows', elements);\n    }\n    destroy(element, data) {\n        data.state.update('_internal.elements.list-column-rows', elements => {\n            return elements.filter(el => el !== element);\n        });\n    }\n}\nfunction ListColumnRow(vido, props) {\n    const { api, state, onDestroy, Detach, Actions, update, html, createComponent, onChange, StyleMap, unsafeHTML, PointerAction } = vido;\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    let shouldDetach = false;\n    const detach = new Detach(() => shouldDetach);\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ListColumnRow', value => (wrapper = value)));\n    let ListColumnRowExpanderComponent;\n    onDestroy(state.subscribe('config.components.ListColumnRowExpander', value => (ListColumnRowExpanderComponent = value)));\n    let rowPath = `_internal.flatTreeMapById.${props.rowId}`, row = state.get(rowPath);\n    let colPath = `config.list.columns.data.${props.columnId}`, column = state.get(colPath);\n    const styleMap = new StyleMap(column.expander\n        ? {\n            height: '',\n            top: '',\n            '--height': '',\n            '--expander-padding-width': '',\n            '--expander-size': ''\n        }\n        : {\n            height: '',\n            top: '',\n            '--height': ''\n        }, true);\n    let rowSub, colSub;\n    const ListColumnRowExpander = createComponent(ListColumnRowExpanderComponent, { row });\n    const onPropsChange = (changedProps, options) => {\n        if (options.leave || changedProps.rowId === undefined || changedProps.columnId === undefined) {\n            shouldDetach = true;\n            if (rowSub)\n                rowSub();\n            if (colSub)\n                colSub();\n            update();\n            return;\n        }\n        shouldDetach = false;\n        props = changedProps;\n        for (const prop in props) {\n            actionProps[prop] = props[prop];\n        }\n        const rowId = props.rowId;\n        const columnId = props.columnId;\n        if (rowSub)\n            rowSub();\n        if (colSub)\n            colSub();\n        rowPath = `_internal.flatTreeMapById.${rowId}`;\n        colPath = `config.list.columns.data.${columnId}`;\n        rowSub = state.subscribeAll([rowPath, colPath, 'config.list.expander'], bulk => {\n            column = state.get(colPath);\n            row = state.get(rowPath);\n            if (column === undefined || row === undefined) {\n                shouldDetach = true;\n                update();\n                return;\n            }\n            if (column === undefined || row === undefined)\n                return;\n            const expander = state.get('config.list.expander');\n            // @ts-ignore\n            styleMap.setStyle({}); // we must reset style because of user specified styling\n            styleMap.style['height'] = row.height + 'px';\n            styleMap.style['--height'] = row.height + 'px';\n            if (column.expander) {\n                styleMap.style['--expander-padding-width'] = expander.padding * (row._internal.parents.length + 1) + 'px';\n            }\n            for (const parentId of row._internal.parents) {\n                const parent = state.get(`_internal.flatTreeMapById.${parentId}`);\n                if (typeof parent.style === 'object' && parent.style.constructor.name === 'Object') {\n                    if (typeof parent.style.children === 'object') {\n                        const childrenStyle = parent.style.children;\n                        for (const name in childrenStyle) {\n                            styleMap.style[name] = childrenStyle[name];\n                        }\n                    }\n                }\n            }\n            if (typeof row.style === 'object' &&\n                row.style.constructor.name === 'Object' &&\n                typeof row.style.current === 'object') {\n                const rowCurrentStyle = row.style.current;\n                for (const name in rowCurrentStyle) {\n                    styleMap.style[name] = rowCurrentStyle[name];\n                }\n            }\n            update();\n        }, { bulk: true });\n        if (ListColumnRowExpander) {\n            ListColumnRowExpander.change({ row });\n        }\n        colSub = state.subscribe(colPath, val => {\n            column = val;\n            update();\n        });\n    };\n    onChange(onPropsChange);\n    onDestroy(() => {\n        if (ListColumnRowExpander)\n            ListColumnRowExpander.destroy();\n        colSub();\n        rowSub();\n    });\n    const componentName = 'list-column-row';\n    const componentActions = api.getActions(componentName);\n    let className;\n    onDestroy(state.subscribe('config.classNames', value => {\n        className = api.getClass(componentName);\n        update();\n    }));\n    function getHtml() {\n        if (row === undefined)\n            return null;\n        if (typeof column.data === 'function')\n            return unsafeHTML(column.data(row));\n        return unsafeHTML(row[column.data]);\n    }\n    function getText() {\n        if (row === undefined)\n            return null;\n        if (typeof column.data === 'function')\n            return column.data(row);\n        return row[column.data];\n    }\n    if (!componentActions.includes(BindElementAction$1))\n        componentActions.push(BindElementAction$1);\n    actionProps.pointerOptions = {\n        axis: 'x|y',\n        onMove({ event, movementX, movementY }) {\n            event.stopPropagation();\n            event.preventDefault();\n            if (movementX) {\n                state.update('config.list.columns.percent', percent => {\n                    percent += movementX * state.get('config.scroll.xMultiplier');\n                    if (percent < 0)\n                        percent = 0;\n                    if (percent > 100)\n                        percent = 100;\n                    return percent;\n                });\n            }\n            else if (movementY) {\n                state.update('config.scroll.top', top => {\n                    top -= movementY * state.get('config.scroll.yMultiplier');\n                    const rowsHeight = state.get('_internal.list.rowsHeight');\n                    const internalHeight = state.get('_internal.height');\n                    top = api.limitScrollTop(rowsHeight, internalHeight, top);\n                    return top;\n                });\n            }\n        }\n    };\n    componentActions.push(PointerAction);\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => wrapper(html `\n        <div detach=${detach} class=${className} style=${styleMap} data-actions=${actions}>\n          ${column.expander ? ListColumnRowExpander.html() : null}\n          <div class=${className + '-content'}>\n            ${column.isHTML ? getHtml() : getText()}\n          </div>\n        </div>\n      `, { vido, props, templateProps });\n}\n\n/**\n * ListColumnRowExpander component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction ListColumnRowExpander(vido, props) {\n    const { api, state, onDestroy, Actions, update, html, createComponent, onChange } = vido;\n    const componentName = 'list-column-row-expander';\n    const componentActions = api.getActions(componentName);\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    let className;\n    let ListColumnRowExpanderToggleComponent;\n    const toggleUnsub = state.subscribe('config.components.ListColumnRowExpanderToggle', value => (ListColumnRowExpanderToggleComponent = value));\n    const ListColumnRowExpanderToggle = createComponent(ListColumnRowExpanderToggleComponent, props.row ? { row: props.row } : {});\n    onDestroy(() => {\n        ListColumnRowExpanderToggle.destroy();\n        toggleUnsub();\n    });\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ListColumnRowExpander', value => (wrapper = value)));\n    onDestroy(state.subscribe('config.classNames', value => {\n        className = api.getClass(componentName);\n        update();\n    }));\n    if (props.row) {\n        function onPropsChange(changedProps) {\n            props = changedProps;\n            for (const prop in props) {\n                actionProps[prop] = props[prop];\n            }\n            ListColumnRowExpanderToggle.change(props);\n        }\n        onChange(onPropsChange);\n    }\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => wrapper(html `\n        <div class=${className} data-action=${actions}>\n          ${ListColumnRowExpanderToggle.html()}\n        </div>\n      `, { vido, props, templateProps });\n}\n\n/**\n * ListColumnRowExpanderToggle component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction ListColumnRowExpanderToggle(vido, props) {\n    const { api, state, onDestroy, Actions, update, html, onChange, cache } = vido;\n    const componentName = 'list-column-row-expander-toggle';\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ListColumnRowExpanderToggle', value => (wrapper = value)));\n    const componentActions = api.getActions(componentName);\n    let className, classNameChild, classNameOpen, classNameClosed;\n    let expanded = false;\n    let iconChild, iconOpen, iconClosed;\n    onDestroy(state.subscribe('config.classNames', value => {\n        className = api.getClass(componentName);\n        classNameChild = className + '-child';\n        classNameOpen = className + '-open';\n        classNameClosed = className + '-closed';\n        update();\n    }));\n    onDestroy(state.subscribe('_internal.list.expander.icons', icons => {\n        if (icons) {\n            iconChild = icons.child;\n            iconOpen = icons.open;\n            iconClosed = icons.closed;\n        }\n        update();\n    }));\n    if (props.row) {\n        function expandedChange(isExpanded) {\n            expanded = isExpanded;\n            update();\n        }\n        let expandedSub;\n        function onPropsChange(changedProps) {\n            var _a, _b;\n            props = changedProps;\n            for (const prop in props) {\n                actionProps[prop] = props[prop];\n            }\n            if (expandedSub)\n                expandedSub();\n            if ((_b = (_a = props) === null || _a === void 0 ? void 0 : _a.row) === null || _b === void 0 ? void 0 : _b.id)\n                expandedSub = state.subscribe(`config.list.rows.${props.row.id}.expanded`, expandedChange);\n        }\n        onChange(onPropsChange);\n        onDestroy(function listToggleDestroy() {\n            if (expandedSub)\n                expandedSub();\n        });\n    }\n    else {\n        function expandedChange(bulk) {\n            for (const rowExpanded of bulk) {\n                if (rowExpanded.value) {\n                    expanded = true;\n                    break;\n                }\n            }\n            update();\n        }\n        onDestroy(state.subscribe('config.list.rows.*.expanded', expandedChange, { bulk: true }));\n    }\n    function toggle() {\n        expanded = !expanded;\n        if (props.row) {\n            state.update(`config.list.rows.${props.row.id}.expanded`, expanded);\n        }\n        else {\n            state.update(`config.list.rows`, rows => {\n                for (const rowId in rows) {\n                    rows[rowId].expanded = expanded;\n                }\n                return rows;\n            }, { only: ['*.expanded'] });\n        }\n    }\n    const getIcon = () => {\n        var _a, _b, _c;\n        if (iconChild) {\n            if (((_c = (_b = (_a = props.row) === null || _a === void 0 ? void 0 : _a._internal) === null || _b === void 0 ? void 0 : _b.children) === null || _c === void 0 ? void 0 : _c.length) === 0) {\n                return html `\n          <img width=\"16\" height=\"16\" class=${classNameChild} src=${iconChild} />\n        `;\n            }\n            return expanded\n                ? html `\n            <img width=\"16\" height=\"16\" class=${classNameOpen} src=${iconOpen} />\n          `\n                : html `\n            <img width=\"16\" height=\"16\" class=${classNameClosed} src=${iconClosed} />\n          `;\n        }\n        return '';\n    };\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => wrapper(html `\n        <div class=${className} data-action=${actions} @click=${toggle}>\n          ${cache(getIcon())}\n        </div>\n      `, { vido, props, templateProps });\n}\n\n/**\n * ListToggle component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction ListToggle(vido, props = {}) {\n    const { html, onDestroy, api, state, update } = vido;\n    const componentName = 'list-toggle';\n    let className;\n    onDestroy(state.subscribe('config.classNames', classNames => {\n        className = api.getClass(componentName);\n    }));\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ListToggle', ListToggleWrapper => (wrapper = ListToggleWrapper)));\n    let toggleIconsSrc = {\n        open: '',\n        close: ''\n    };\n    onDestroy(state.subscribe('_internal.list.toggle.icons', value => {\n        if (value) {\n            toggleIconsSrc = value;\n            update();\n        }\n    }));\n    let open = true;\n    onDestroy(state.subscribe('config.list.columns.percent', percent => (percent === 0 ? (open = false) : (open = true))));\n    function toggle(ev) {\n        state.update('config.list.columns.percent', percent => {\n            return percent === 0 ? 100 : 0;\n        });\n    }\n    return templateProps => wrapper(html `\n        <div class=${className} @click=${toggle}><img src=${open ? toggleIconsSrc.close : toggleIconsSrc.open} /></div>\n      `, { props, vido, templateProps });\n}\n\n/**\n * Chart component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction Chart(vido, props = {}) {\n    const { api, state, onDestroy, Actions, update, html, StyleMap, createComponent } = vido;\n    const componentName = 'chart';\n    const ChartCalendarComponent = state.get('config.components.ChartCalendar');\n    const ChartTimelineComponent = state.get('config.components.ChartTimeline');\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.Chart', value => (wrapper = value)));\n    const Calendar = createComponent(ChartCalendarComponent);\n    onDestroy(Calendar.destroy);\n    const Timeline = createComponent(ChartTimelineComponent);\n    onDestroy(Timeline.destroy);\n    let className, classNameScroll, classNameScrollInner, scrollElement, scrollInnerElement;\n    const componentActions = api.getActions(componentName);\n    onDestroy(state.subscribe('config.classNames', value => {\n        className = api.getClass(componentName);\n        classNameScroll = api.getClass('horizontal-scroll');\n        classNameScrollInner = api.getClass('horizontal-scroll-inner');\n        update();\n    }));\n    onDestroy(state.subscribeAll(['_internal.chart.dimensions.width', '_internal.chart.time.totalViewDurationPx'], function horizontalScroll() {\n        if (scrollElement)\n            scrollElement.style.width = state.get('_internal.chart.dimensions.width') + 'px';\n        if (scrollInnerElement)\n            scrollInnerElement.style.width = state.get('_internal.chart.time.totalViewDurationPx') + 'px';\n    }));\n    onDestroy(state.subscribe('config.scroll.left', left => {\n        if (scrollElement) {\n            scrollElement.scrollLeft = left;\n        }\n    }));\n    function onScrollHandler(event) {\n        if (event.type === 'scroll') {\n            // @ts-ignore\n            const left = event.target.scrollLeft;\n            state.update('config.scroll.left', left);\n        }\n    }\n    const onScroll = {\n        handleEvent: onScrollHandler,\n        passive: true,\n        capture: false\n    };\n    function onWheelHandler(event) {\n        if (event.type === 'wheel') {\n            const wheel = api.normalizeMouseWheelEvent(event);\n            const xMultiplier = state.get('config.scroll.xMultiplier');\n            const yMultiplier = state.get('config.scroll.yMultiplier');\n            const currentScrollLeft = state.get('config.scroll.left');\n            const totalViewDurationPx = state.get('_internal.chart.time.totalViewDurationPx');\n            if (event.shiftKey && wheel.y) {\n                const newScrollLeft = api.limitScrollLeft(totalViewDurationPx, chartWidth, currentScrollLeft + wheel.y * xMultiplier);\n                state.update('config.scroll.left', newScrollLeft); // will trigger scrollbar to move which will trigger scroll event\n            }\n            else if (event.ctrlKey && wheel.y) {\n                event.preventDefault();\n                state.update('config.chart.time.zoom', currentZoom => {\n                    if (wheel.y < 0) {\n                        return currentZoom - 1;\n                    }\n                    return currentZoom + 1;\n                });\n            }\n            else if (wheel.x) {\n                const currentScrollLeft = state.get('config.scroll.left');\n                state.update('config.scroll.left', api.limitScrollLeft(totalViewDurationPx, chartWidth, currentScrollLeft + wheel.x * xMultiplier));\n            }\n            else {\n                state.update('config.scroll.top', top => {\n                    const rowsHeight = state.get('_internal.list.rowsHeight');\n                    const internalHeight = state.get('_internal.height');\n                    return api.limitScrollTop(rowsHeight, internalHeight, (top += wheel.y * yMultiplier));\n                });\n            }\n        }\n    }\n    const onWheel = {\n        handleEvent: onWheelHandler,\n        passive: false,\n        capture: false\n    };\n    function bindElement(element) {\n        if (!scrollElement) {\n            scrollElement = element;\n            state.update('_internal.elements.horizontal-scroll', element);\n        }\n    }\n    function bindInnerScroll(element) {\n        scrollInnerElement = element;\n        const old = state.get('_internal.elements.horizontal-scroll-inner');\n        if (old !== element)\n            state.update('_internal.elements.horizontal-scroll-inner', element);\n        if (!state.get('_internal.loaded.horizontal-scroll-inner'))\n            state.update('_internal.loaded.horizontal-scroll-inner', true);\n    }\n    let chartWidth = 0;\n    let ro;\n    componentActions.push(function bindElement(element) {\n        if (!ro) {\n            ro = new index((entries, observer) => {\n                const width = element.clientWidth;\n                const height = element.clientHeight;\n                const innerWidth = width - state.get('_internal.scrollBarHeight');\n                if (chartWidth !== width) {\n                    chartWidth = width;\n                    state.update('_internal.chart.dimensions', { width, innerWidth, height });\n                }\n            });\n            ro.observe(element);\n            state.update('_internal.elements.chart', element);\n            state.update('_internal.loaded.chart', true);\n        }\n    });\n    onDestroy(() => {\n        ro.disconnect();\n    });\n    const actions = Actions.create(componentActions, { api, state });\n    const scrollActions = Actions.create([bindElement]);\n    const scrollAreaActions = Actions.create([bindInnerScroll]);\n    return templateProps => wrapper(html `\n        <div class=${className} data-actions=${actions} @wheel=${onWheel} @scroll=${onScroll}>\n          ${Calendar.html()}${Timeline.html()}\n          <div class=${classNameScroll} data-actions=${scrollActions} @scroll=${onScroll}>\n            <div class=${classNameScrollInner} style=\"height: 1px\" data-actions=${scrollAreaActions} />\n          </div>\n        </div>\n      `, { vido, props: {}, templateProps });\n}\n\n/**\n * ChartCalendar component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction ChartCalendar(vido, props) {\n    const { api, state, onDestroy, Actions, update, reuseComponents, html, StyleMap } = vido;\n    const componentName = 'chart-calendar';\n    const componentActions = api.getActions(componentName);\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    const ChartCalendarDateComponent = state.get('config.components.ChartCalendarDate');\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartCalendar', value => (wrapper = value)));\n    let className;\n    onDestroy(state.subscribe('config.classNames', value => {\n        className = api.getClass(componentName);\n        update();\n    }));\n    let headerHeight;\n    const styleMap = new StyleMap({ height: '', '--headerHeight': '', 'margin-left': '' });\n    onDestroy(state.subscribe('config.headerHeight', value => {\n        headerHeight = value;\n        styleMap.style['height'] = headerHeight + 'px';\n        styleMap.style['--calendar-height'] = headerHeight + 'px';\n        update();\n    }));\n    onDestroy(state.subscribe('config.scroll.compensation.x', compensation => {\n        styleMap.style['margin-left'] = -compensation + 'px';\n        update();\n    }));\n    const components = [[], []];\n    onDestroy(state.subscribe(`_internal.chart.time.levels`, levels => {\n        let level = 0;\n        for (const dates of levels) {\n            if (!dates.length)\n                continue;\n            let currentDateFormat = 'YYYY-MM-DD HH'; // hour\n            switch (dates[0].period) {\n                case 'day':\n                    currentDateFormat = 'YYYY-MM-DD';\n                    break;\n                case 'week':\n                    currentDateFormat = 'YYYY-MM-ww';\n                    break;\n                case 'month':\n                    currentDateFormat = 'YYYY-MM';\n                    break;\n                case 'year':\n                    currentDateFormat = 'YYYY';\n                    break;\n            }\n            const currentDate = api.time.date().format(currentDateFormat);\n            reuseComponents(components[level], dates, date => date && { level, date, currentDate, currentDateFormat }, ChartCalendarDateComponent);\n            level++;\n        }\n        update();\n    }));\n    onDestroy(() => {\n        components.forEach(level => level.forEach(component => component.destroy()));\n    });\n    componentActions.push(element => {\n        state.update('_internal.elements.chart-calendar', element);\n    });\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => wrapper(html `\n        <div class=${className} data-actions=${actions} style=${styleMap}>\n          ${components.map((components, level) => html `\n              <div class=${className + '-dates ' + className + `-dates--level-${level}`}>\n                ${components.map(m => m.html())}\n              </div>\n            `)}\n        </div>\n      `, { props, vido, templateProps });\n}\n\nclass Action$1 {\n    constructor() {\n        this.isAction = true;\n    }\n}\nAction$1.prototype.isAction = true;\n\n/**\n * ChartCalendarDay component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n/**\n * Save element\n * @param {HTMLElement} element\n * @param {object} data\n */\nclass BindElementAction$2 extends Action$1 {\n    constructor(element, data) {\n        super();\n        data.state.update('_internal.elements.chart-calendar-dates', elements => {\n            if (typeof elements === 'undefined') {\n                elements = [];\n            }\n            if (!elements.includes(element)) {\n                elements.push(element);\n            }\n            return elements;\n        });\n    }\n}\nfunction ChartCalendarDay(vido, props) {\n    const { api, state, onDestroy, Actions, update, onChange, html, StyleMap, Detach } = vido;\n    const componentName = 'chart-calendar-date';\n    const componentActions = api.getActions(componentName);\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartCalendarDate', value => (wrapper = value)));\n    let className;\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName, props);\n    }));\n    let current = '';\n    let time, htmlFormatted;\n    const styleMap = new StyleMap({ width: '', visibility: 'visible' }), scrollStyleMap = new StyleMap({\n        overflow: 'hidden',\n        'text-align': 'left'\n    });\n    let formatClassName = '';\n    function updateDate() {\n        if (!props)\n            return;\n        const cache = state.get('_internal.cache.calendar');\n        const level = state.get(`config.chart.calendar.levels.${props.level}`);\n        styleMap.style.width = props.date.width + 'px';\n        styleMap.style.visibility = 'visible';\n        scrollStyleMap.style = { overflow: 'hidden', 'text-align': 'left', 'margin-left': props.date.subPx + 8 + 'px' };\n        time = state.get('_internal.chart.time');\n        const cacheKey = `${new Date(props.date.leftGlobal).toISOString()}-${props.date.period}-${props.level}-${time.zoom}`;\n        if (!cache[cacheKey]) {\n            cache[cacheKey] = {};\n        }\n        let timeStart, timeEnd;\n        {\n            timeStart = api.time.date(props.date.leftGlobal);\n            timeEnd = api.time.date(props.date.rightGlobal);\n            cache[cacheKey].timeStart = timeStart;\n            cache[cacheKey].timeEnd = timeEnd;\n        }\n        const formats = level.formats;\n        const formatting = formats.find(formatting => +time.zoom <= +formatting.zoomTo);\n        let format;\n        {\n            format = formatting ? formatting.format({ timeStart, timeEnd, className, vido, props }) : null;\n            cache[cacheKey].format = format;\n        }\n        {\n            if (timeStart.format(props.currentDateFormat) === props.currentDate) {\n                current = ' gstc-current';\n            }\n            else if (timeStart.subtract(1, props.date.period).format(props.currentDateFormat) === props.currentDate) {\n                current = ' gstc-next';\n            }\n            else if (timeStart.add(1, props.date.period).format(props.currentDateFormat) === props.currentDate) {\n                current = ' gstc-previous';\n            }\n            else {\n                current = '';\n            }\n            cache[cacheKey].current = current;\n        }\n        let finalClassName = className + '-content ' + className + `-content--${props.date.period}` + current;\n        if (formatting.className) {\n            finalClassName += ' ' + formatting.className;\n            formatClassName = ' ' + formatting.className;\n        }\n        else {\n            formatClassName = '';\n        }\n        // updating cache state is not necessary because it is object and nobody listen to cache\n        htmlFormatted = html `\n      <div class=${finalClassName}>\n        ${format}\n      </div>\n    `;\n        update();\n    }\n    let shouldDetach = false;\n    const detach = new Detach(() => shouldDetach);\n    let timeSub;\n    const actionProps = { date: props.date, period: props.period, api, state };\n    onChange((changedProps, options) => {\n        if (options.leave) {\n            shouldDetach = true;\n            return update();\n        }\n        shouldDetach = false;\n        props = changedProps;\n        actionProps.date = props.date;\n        actionProps.period = props.period;\n        if (timeSub) {\n            timeSub();\n        }\n        timeSub = state.subscribeAll(['_internal.chart.time', 'config.chart.calendar.levels'], updateDate, {\n            bulk: true\n        });\n    });\n    onDestroy(() => {\n        timeSub();\n    });\n    if (!componentActions.includes(BindElementAction$2))\n        componentActions.push(BindElementAction$2);\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => wrapper(html `\n        <div\n          detach=${detach}\n          class=${className +\n        ' ' +\n        className +\n        `--${props.date.period}` +\n        ' ' +\n        className +\n        `--level-${props.level}` +\n        current +\n        formatClassName}\n          style=${styleMap}\n          data-actions=${actions}\n        >\n          ${htmlFormatted}\n        </div>\n      `, { props, vido, templateProps });\n}\n\n/**\n * ChartTimeline component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction ChartTimeline(vido, props) {\n    const { api, state, onDestroy, Action, Actions, update, html, createComponent, StyleMap } = vido;\n    const componentName = 'chart-timeline';\n    const componentActions = api.getActions(componentName);\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartTimeline', value => (wrapper = value)));\n    const GridComponent = state.get('config.components.ChartTimelineGrid');\n    const ItemsComponent = state.get('config.components.ChartTimelineItems');\n    const ListToggleComponent = state.get('config.components.ListToggle');\n    const Grid = createComponent(GridComponent);\n    onDestroy(Grid.destroy);\n    const Items = createComponent(ItemsComponent);\n    onDestroy(Items.destroy);\n    const ListToggle = createComponent(ListToggleComponent);\n    onDestroy(ListToggle.destroy);\n    let className, classNameInner;\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName);\n        classNameInner = api.getClass(componentName + '-inner');\n        update();\n    }));\n    let showToggle;\n    onDestroy(state.subscribe('config.list.toggle.display', val => (showToggle = val)));\n    const styleMap = new StyleMap({}), innerStyleMap = new StyleMap({});\n    function calculateStyle() {\n        const xCompensation = api.getCompensationX();\n        const yCompensation = api.getCompensationY();\n        const width = state.get('_internal.chart.dimensions.width');\n        const height = state.get('_internal.list.rowsHeight');\n        styleMap.style.height = state.get('_internal.height') + 'px';\n        styleMap.style['--height'] = styleMap.style.height;\n        styleMap.style['--negative-compensation-x'] = xCompensation + 'px';\n        styleMap.style['--compensation-x'] = Math.round(Math.abs(xCompensation)) + 'px';\n        styleMap.style['--negative-compensation-y'] = yCompensation + 'px';\n        styleMap.style['--compensation-y'] = Math.abs(yCompensation) + 'px';\n        if (width) {\n            styleMap.style.width = width + 'px';\n            styleMap.style['--width'] = width + 'px';\n        }\n        else {\n            styleMap.style.width = '0px';\n            styleMap.style['--width'] = '0px';\n        }\n        innerStyleMap.style.height = height + 'px';\n        if (width) {\n            innerStyleMap.style.width = width + xCompensation + 'px';\n        }\n        else {\n            innerStyleMap.style.width = '0px';\n        }\n        //innerStyleMap.style.transform = `translate(-${xCompensation}px, ${yCompensation}px)`;\n        innerStyleMap.style['margin-left'] = -xCompensation + 'px';\n        update();\n    }\n    onDestroy(state.subscribeAll([\n        '_internal.height',\n        '_internal.chart.dimensions.width',\n        '_internal.list.rowsHeight',\n        'config.scroll.compensation',\n        '_internal.chart.time.dates.day'\n    ], calculateStyle));\n    componentActions.push(class BindElementAction extends Action {\n        constructor(element) {\n            super();\n            const old = state.get('_internal.elements.chart-timeline');\n            if (old !== element)\n                state.update('_internal.elements.chart-timeline', element);\n        }\n    });\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => wrapper(html `\n        <div class=${className} style=${styleMap} data-actions=${actions} @wheel=${api.onScroll}>\n          <div class=${classNameInner} style=${innerStyleMap}>\n            ${Grid.html()}${Items.html()}${showToggle ? ListToggle.html() : ''}\n          </div>\n        </div>\n      `, { props, vido, templateProps });\n}\n\n/**\n * ChartTimelineGrid component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n/**\n * Bind element action\n */\nclass BindElementAction$3 {\n    constructor(element, data) {\n        const old = data.state.get('_internal.elements.chart-timeline-grid');\n        if (old !== element)\n            data.state.update('_internal.elements.chart-timeline-grid', element);\n    }\n    destroy(element, data) {\n        data.state.update('_internal.elements', elements => {\n            delete elements['chart-timeline-grid'];\n            return elements;\n        });\n    }\n}\nfunction ChartTimelineGrid(vido, props) {\n    const { api, state, onDestroy, Actions, update, html, reuseComponents, StyleMap } = vido;\n    const componentName = 'chart-timeline-grid';\n    const componentActions = api.getActions(componentName);\n    const actionProps = { api, state };\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartTimelineGrid', value => (wrapper = value)));\n    const GridRowComponent = state.get('config.components.ChartTimelineGridRow');\n    let className;\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName);\n        update();\n    }));\n    let onBlockCreate;\n    onDestroy(state.subscribe('config.chart.grid.block.onCreate', onCreate => (onBlockCreate = onCreate)));\n    const rowsComponents = [];\n    const rowsWithBlocks = [];\n    const formatCache = new Map();\n    const styleMap = new StyleMap({});\n    /**\n     * Generate blocks\n     */\n    function generateBlocks() {\n        const width = state.get('_internal.chart.dimensions.width');\n        const height = state.get('_internal.height');\n        const time = state.get('_internal.chart.time');\n        const periodDates = state.get(`_internal.chart.time.levels.${time.level}`);\n        if (!periodDates || periodDates.length === 0) {\n            state.update('_internal.chart.grid.rowsWithBlocks', []);\n            return;\n        }\n        const visibleRows = state.get('_internal.list.visibleRows');\n        const xCompensation = api.getCompensationX();\n        const yCompensation = api.getCompensationY();\n        styleMap.style.height = height + Math.abs(yCompensation) + 'px';\n        styleMap.style.width = width + xCompensation + 'px';\n        let top = 0;\n        rowsWithBlocks.length = 0;\n        for (const row of visibleRows) {\n            const blocks = [];\n            for (const time of periodDates) {\n                let format;\n                if (formatCache.has(time.leftGlobal)) {\n                    format = formatCache.get(time.leftGlobal);\n                }\n                else {\n                    format = api.time.date(time.leftGlobal).format('YYYY-MM-DD HH:mm');\n                    formatCache.set(time.leftGlobal, format);\n                }\n                const id = row.id + ':' + format;\n                let block = { id, time, row, top };\n                for (const onCreate of onBlockCreate) {\n                    block = onCreate(block);\n                }\n                blocks.push(block);\n            }\n            rowsWithBlocks.push({ row, blocks, top, width });\n            top += row.height;\n        }\n        state.update('_internal.chart.grid.rowsWithBlocks', rowsWithBlocks);\n    }\n    onDestroy(state.subscribeAll([\n        '_internal.list.visibleRows;',\n        `_internal.chart.time.levels`,\n        '_internal.height',\n        '_internal.chart.dimensions.width'\n    ], generateBlocks, {\n        bulk: true\n    }));\n    /**\n     * Generate rows components\n     * @param {array} rowsWithBlocks\n     */\n    function generateRowsComponents(rowsWithBlocks) {\n        reuseComponents(rowsComponents, rowsWithBlocks || [], row => row, GridRowComponent);\n        update();\n    }\n    onDestroy(state.subscribe('_internal.chart.grid.rowsWithBlocks', generateRowsComponents));\n    onDestroy(() => {\n        rowsComponents.forEach(row => row.destroy());\n    });\n    componentActions.push(BindElementAction$3);\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => wrapper(html `\n        <div class=${className} data-actions=${actions} style=${styleMap}>\n          ${rowsComponents.map(r => r.html())}\n        </div>\n      `, { props, vido, templateProps });\n}\n\n/**\n * ChartTimelineGridRow component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n/**\n * Bind element action\n */\nclass BindElementAction$4 {\n    constructor(element, data) {\n        let shouldUpdate = false;\n        let rows = data.state.get('_internal.elements.chart-timeline-grid-rows');\n        if (typeof rows === 'undefined') {\n            rows = [];\n            shouldUpdate = true;\n        }\n        if (!rows.includes(element)) {\n            rows.push(element);\n            shouldUpdate = true;\n        }\n        if (shouldUpdate)\n            data.state.update('_internal.elements.chart-timeline-grid-rows', rows, { only: null });\n    }\n    destroy(element, data) {\n        data.state.update('_internal.elements.chart-timeline-grid-rows', rows => {\n            return rows.filter(el => el !== element);\n        });\n    }\n}\nfunction ChartTimelineGridRow(vido, props) {\n    const { api, state, onDestroy, Detach, Actions, update, html, reuseComponents, onChange, StyleMap } = vido;\n    const componentName = 'chart-timeline-grid-row';\n    const actionProps = Object.assign(Object.assign({}, props), { api,\n        state });\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartTimelineGridRow', value => {\n        wrapper = value;\n        update();\n    }));\n    const GridBlockComponent = state.get('config.components.ChartTimelineGridRowBlock');\n    const componentActions = api.getActions(componentName);\n    let className;\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName);\n    }));\n    const styleMap = new StyleMap({\n        width: props.width + 'px',\n        height: props.row.height + 'px',\n        overflow: 'hidden'\n    }, true);\n    let shouldDetach = false;\n    const detach = new Detach(() => shouldDetach);\n    const rowsBlocksComponents = [];\n    onChange(function onPropsChange(changedProps, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (options.leave || changedProps.row === undefined) {\n            shouldDetach = true;\n            reuseComponents(rowsBlocksComponents, [], block => block, GridBlockComponent);\n            update();\n            return;\n        }\n        shouldDetach = false;\n        props = changedProps;\n        reuseComponents(rowsBlocksComponents, props.blocks, block => block, GridBlockComponent);\n        styleMap.setStyle({});\n        styleMap.style.height = props.row.height + 'px';\n        styleMap.style.width = props.width + 'px';\n        const rows = state.get('config.list.rows');\n        for (const parentId of props.row._internal.parents) {\n            const parent = rows[parentId];\n            const childrenStyle = (_d = (_c = (_b = (_a = parent) === null || _a === void 0 ? void 0 : _a.style) === null || _b === void 0 ? void 0 : _b.grid) === null || _c === void 0 ? void 0 : _c.row) === null || _d === void 0 ? void 0 : _d.children;\n            if (childrenStyle)\n                for (const name in childrenStyle) {\n                    styleMap.style[name] = childrenStyle[name];\n                }\n        }\n        const currentStyle = (_j = (_h = (_g = (_f = (_e = props) === null || _e === void 0 ? void 0 : _e.row) === null || _f === void 0 ? void 0 : _f.style) === null || _g === void 0 ? void 0 : _g.grid) === null || _h === void 0 ? void 0 : _h.row) === null || _j === void 0 ? void 0 : _j.current;\n        if (currentStyle)\n            for (const name in currentStyle) {\n                styleMap.style[name] = currentStyle[name];\n            }\n        for (const prop in props) {\n            actionProps[prop] = props[prop];\n        }\n        update();\n    });\n    onDestroy(function destroy() {\n        rowsBlocksComponents.forEach(rowBlock => rowBlock.destroy());\n    });\n    if (componentActions.indexOf(BindElementAction$4) === -1) {\n        componentActions.push(BindElementAction$4);\n    }\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => {\n        return wrapper(html `\n        <div detach=${detach} class=${className} data-actions=${actions} style=${styleMap}>\n          ${rowsBlocksComponents.map(r => r.html())}\n        </div>\n      `, { vido, props, templateProps });\n    };\n}\n\n/**\n * ChartTimelineGridRowBlock component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n/**\n * Bind element action\n * @param {Element} element\n * @param {any} data\n * @returns {object} with update and destroy\n */\nclass BindElementAction$5 {\n    constructor(element, data) {\n        let shouldUpdate = false;\n        let blocks = data.state.get('_internal.elements.chart-timeline-grid-row-blocks');\n        if (typeof blocks === 'undefined') {\n            blocks = [];\n            shouldUpdate = true;\n        }\n        if (!blocks.includes(element)) {\n            blocks.push(element);\n            shouldUpdate = true;\n        }\n        if (shouldUpdate)\n            data.state.update('_internal.elements.chart-timeline-grid-row-blocks', blocks, { only: null });\n    }\n    destroy(element, data) {\n        data.state.update('_internal.elements.chart-timeline-grid-row-blocks', blocks => {\n            return blocks.filter(el => el !== element);\n        }, { only: [''] });\n    }\n}\nconst ChartTimelineGridRowBlock = (vido, props) => {\n    const { api, state, onDestroy, Detach, Actions, update, html, onChange, StyleMap } = vido;\n    const componentName = 'chart-timeline-grid-row-block';\n    const actionProps = Object.assign(Object.assign({}, props), { api,\n        state });\n    let shouldDetach = false;\n    const detach = new Detach(() => shouldDetach);\n    const componentActions = api.getActions(componentName);\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartTimelineGridRowBlock', value => {\n        wrapper = value;\n        update();\n    }));\n    let className;\n    function updateClassName(time) {\n        const currentTime = api.time\n            .date()\n            .startOf(time.period)\n            .valueOf();\n        className = api.getClass(componentName);\n        if (time.leftGlobal === currentTime) {\n            className += ' current';\n        }\n    }\n    updateClassName(props.time);\n    const styleMap = new StyleMap({ width: '', height: '' });\n    /**\n     * On props change\n     * @param {any} changedProps\n     */\n    function onPropsChange(changedProps, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        if (options.leave || changedProps.row === undefined) {\n            shouldDetach = true;\n            return update();\n        }\n        shouldDetach = false;\n        props = changedProps;\n        for (const prop in props) {\n            actionProps[prop] = props[prop];\n        }\n        updateClassName(props.time);\n        styleMap.setStyle({});\n        styleMap.style.width = (((_b = (_a = props) === null || _a === void 0 ? void 0 : _a.time) === null || _b === void 0 ? void 0 : _b.width) || 0) + 'px';\n        styleMap.style.height = (((_d = (_c = props) === null || _c === void 0 ? void 0 : _c.row) === null || _d === void 0 ? void 0 : _d.height) || 0) + 'px';\n        const rows = state.get('config.list.rows');\n        for (const parentId of props.row._internal.parents) {\n            const parent = rows[parentId];\n            const childrenStyle = (_h = (_g = (_f = (_e = parent) === null || _e === void 0 ? void 0 : _e.style) === null || _f === void 0 ? void 0 : _f.grid) === null || _g === void 0 ? void 0 : _g.block) === null || _h === void 0 ? void 0 : _h.children;\n            if (childrenStyle)\n                styleMap.setStyle(Object.assign(Object.assign({}, styleMap.style), childrenStyle));\n        }\n        const currentStyle = (_o = (_m = (_l = (_k = (_j = props) === null || _j === void 0 ? void 0 : _j.row) === null || _k === void 0 ? void 0 : _k.style) === null || _l === void 0 ? void 0 : _l.grid) === null || _m === void 0 ? void 0 : _m.block) === null || _o === void 0 ? void 0 : _o.current;\n        if (currentStyle)\n            styleMap.setStyle(Object.assign(Object.assign({}, styleMap.style), currentStyle));\n        update();\n    }\n    onChange(onPropsChange);\n    componentActions.push(BindElementAction$5);\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => {\n        return wrapper(html `\n        <div detach=${detach} class=${className} data-actions=${actions} style=${styleMap}></div>\n      `, { props, vido, templateProps });\n    };\n};\n\n/**\n * ChartTimelineItems component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\nfunction ChartTimelineItems(vido, props = {}) {\n    const { api, state, onDestroy, Actions, update, html, reuseComponents, StyleMap } = vido;\n    const componentName = 'chart-timeline-items';\n    const componentActions = api.getActions(componentName);\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartTimelineItems', value => (wrapper = value)));\n    let ItemsRowComponent;\n    onDestroy(state.subscribe('config.components.ChartTimelineItemsRow', value => (ItemsRowComponent = value)));\n    let className;\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName);\n        update();\n    }));\n    const styleMap = new StyleMap({}, true);\n    function calculateStyle() {\n        const width = state.get('_internal.chart.dimensions.width');\n        const height = state.get('_internal.height');\n        const yCompensation = api.getCompensationY();\n        const xCompensation = api.getCompensationX();\n        styleMap.style.width = width + xCompensation + 'px';\n        styleMap.style.height = height + Math.abs(yCompensation) + 'px';\n    }\n    onDestroy(state.subscribeAll([\n        '_internal.height',\n        '_internal.chart.dimensions.width',\n        'config.scroll.compensation',\n        '_internal.chart.time.dates.day'\n    ], calculateStyle));\n    const rowsComponents = [];\n    function createRowComponents() {\n        const visibleRows = state.get('_internal.list.visibleRows');\n        reuseComponents(rowsComponents, visibleRows || [], row => ({ row }), ItemsRowComponent);\n        update();\n    }\n    onDestroy(state.subscribeAll(['_internal.list.visibleRows;', 'config.chart.items'], createRowComponents));\n    onDestroy(() => {\n        rowsComponents.forEach(row => row.destroy());\n    });\n    const actions = Actions.create(componentActions, { api, state });\n    return templateProps => wrapper(html `\n        <div class=${className} style=${styleMap} data-actions=${actions}>\n          ${rowsComponents.map(r => r.html())}\n        </div>\n      `, { props, vido, templateProps });\n}\n\n/**\n * ChartTimelineItemsRow component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n/**\n * Bind element action\n * @param {Element} element\n * @param {any} data\n */\nclass BindElementAction$6 {\n    constructor(element, data) {\n        let shouldUpdate = false;\n        let rows = data.state.get('_internal.elements.chart-timeline-items-rows');\n        if (typeof rows === 'undefined') {\n            rows = [];\n            shouldUpdate = true;\n        }\n        if (!rows.includes(element)) {\n            rows.push(element);\n            shouldUpdate = true;\n        }\n        if (shouldUpdate)\n            data.state.update('_internal.elements.chart-timeline-items-rows', rows, { only: null });\n    }\n    destroy(element, data) {\n        data.state.update('_internal.elements.chart-timeline-items-rows', rows => {\n            return rows.filter(el => el !== element);\n        });\n    }\n}\nconst ChartTimelineItemsRow = (vido, props) => {\n    const { api, state, onDestroy, Detach, Actions, update, html, onChange, reuseComponents, StyleMap } = vido;\n    const actionProps = Object.assign(Object.assign({}, props), { api, state });\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartTimelineItemsRow', value => (wrapper = value)));\n    let ItemComponent;\n    onDestroy(state.subscribe('config.components.ChartTimelineItemsRowItem', value => (ItemComponent = value)));\n    let itemsPath = `_internal.flatTreeMapById.${props.row.id}._internal.items`;\n    let rowSub, itemsSub;\n    const itemComponents = [], styleMap = new StyleMap({ width: '', height: '' }, true);\n    let shouldDetach = false;\n    const detach = new Detach(() => shouldDetach);\n    const updateDom = () => {\n        const chart = state.get('_internal.chart');\n        shouldDetach = false;\n        const xCompensation = api.getCompensationX();\n        styleMap.style.width = chart.dimensions.width + xCompensation + 'px';\n        if (!props) {\n            shouldDetach = true;\n            return;\n        }\n        styleMap.style.height = props.row.height + 'px';\n        styleMap.style['--row-height'] = props.row.height + 'px';\n    };\n    function updateRow(row) {\n        itemsPath = `_internal.flatTreeMapById.${row.id}._internal.items`;\n        if (typeof rowSub === 'function') {\n            rowSub();\n        }\n        if (typeof itemsSub === 'function') {\n            itemsSub();\n        }\n        rowSub = state.subscribe('_internal.chart', value => {\n            if (value === undefined) {\n                shouldDetach = true;\n                return update();\n            }\n            updateDom();\n            update();\n        });\n        itemsSub = state.subscribe(itemsPath, value => {\n            if (value === undefined) {\n                shouldDetach = true;\n                reuseComponents(itemComponents, [], item => ({ row, item }), ItemComponent);\n                return update();\n            }\n            reuseComponents(itemComponents, value, item => ({ row, item }), ItemComponent);\n            updateDom();\n            update();\n        });\n    }\n    /**\n     * On props change\n     * @param {any} changedProps\n     */\n    onChange((changedProps, options) => {\n        if (options.leave || changedProps.row === undefined) {\n            shouldDetach = true;\n            return update();\n        }\n        props = changedProps;\n        for (const prop in props) {\n            actionProps[prop] = props[prop];\n        }\n        updateRow(props.row);\n    });\n    onDestroy(() => {\n        itemsSub();\n        rowSub();\n        itemComponents.forEach(item => item.destroy());\n    });\n    const componentName = 'chart-timeline-items-row';\n    const componentActions = api.getActions(componentName);\n    let className;\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName, props);\n        update();\n    }));\n    componentActions.push(BindElementAction$6);\n    const actions = Actions.create(componentActions, actionProps);\n    return templateProps => {\n        return wrapper(html `\n        <div detach=${detach} class=${className} data-actions=${actions} style=${styleMap}>\n          ${itemComponents.map(i => i.html())}\n        </div>\n      `, { props, vido, templateProps });\n    };\n};\n\n/**\n * ChartTimelineItemsRowItem component\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0 (https://github.com/neuronetio/gantt-schedule-timeline-calendar/blob/master/LICENSE)\n * @link      https://github.com/neuronetio/gantt-schedule-timeline-calendar\n */\n/**\n * Bind element action\n */\nclass BindElementAction$7 {\n    constructor(element, data) {\n        let shouldUpdate = false;\n        let items = data.state.get('_internal.elements.chart-timeline-items-row-items');\n        if (typeof items === 'undefined') {\n            items = [];\n            shouldUpdate = true;\n        }\n        if (!items.includes(element)) {\n            items.push(element);\n            shouldUpdate = true;\n        }\n        if (shouldUpdate)\n            data.state.update('_internal.elements.chart-timeline-items-row-items', items, { only: null });\n    }\n    destroy(element, data) {\n        data.state.update('_internal.elements.chart-timeline-items-row-items', items => {\n            return items.filter(el => el !== element);\n        });\n    }\n}\nfunction ChartTimelineItemsRowItem(vido, props) {\n    const { api, state, onDestroy, Detach, Actions, update, html, onChange, unsafeHTML, StyleMap } = vido;\n    let wrapper;\n    onDestroy(state.subscribe('config.wrappers.ChartTimelineItemsRowItem', value => (wrapper = value)));\n    let itemLeftPx = 0, itemWidthPx = 0, leave = false, cutLeft = false, cutRight = false;\n    const styleMap = new StyleMap({ width: '', height: '', left: '' }), leftCutStyleMap = new StyleMap({ 'margin-left': '0px' }), rightCutStyleMap = new StyleMap({ 'margin-right': '0px' }), actionProps = {\n        item: props.item,\n        row: props.row,\n        left: itemLeftPx,\n        width: itemWidthPx,\n        api,\n        state\n    };\n    let shouldDetach = false;\n    function updateItem() {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        if (leave)\n            return;\n        const time = state.get('_internal.chart.time');\n        itemLeftPx = api.time.globalTimeToViewPixelOffset(props.item.time.start);\n        itemLeftPx = Math.round(itemLeftPx * 10) * 0.1;\n        itemWidthPx = (props.item.time.end - props.item.time.start) / time.timePerPixel;\n        itemWidthPx -= state.get('config.chart.spacing') || 0;\n        if (itemWidthPx) {\n            itemWidthPx = Math.round(itemWidthPx * 10) * 0.1;\n        }\n        if (props.item.time.start < time.leftGlobal) {\n            leftCutStyleMap.style['margin-left'] = (time.leftGlobal - props.item.time.start) / time.timePerPixel + 'px';\n            cutLeft = true;\n        }\n        else {\n            leftCutStyleMap.style['margin-left'] = '0px';\n            cutLeft = false;\n        }\n        if (props.item.time.end > time.rightGlobal) {\n            rightCutStyleMap.style['margin-right'] = (props.item.time.end - time.rightGlobal) / time.timePerPixel + 'px';\n            cutRight = true;\n        }\n        else {\n            cutRight = false;\n            rightCutStyleMap.style['margin-right'] = '0px';\n        }\n        const oldWidth = styleMap.style.width;\n        const oldLeft = styleMap.style.left;\n        const xCompensation = api.getCompensationX();\n        styleMap.setStyle({});\n        const inViewPort = api.isItemInViewport(props.item, time.leftGlobal, time.rightGlobal);\n        shouldDetach = !inViewPort;\n        if (inViewPort) {\n            // update style only when visible to prevent browser's recalculate style\n            styleMap.style.width = itemWidthPx + 'px';\n            styleMap.style.left = itemLeftPx + xCompensation + 'px';\n        }\n        else {\n            styleMap.style.width = oldWidth;\n            styleMap.style.left = oldLeft;\n        }\n        const rows = state.get('config.list.rows');\n        for (const parentId of props.row._internal.parents) {\n            const parent = rows[parentId];\n            const childrenStyle = (_d = (_c = (_b = (_a = parent) === null || _a === void 0 ? void 0 : _a.style) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.item) === null || _d === void 0 ? void 0 : _d.children;\n            if (childrenStyle)\n                styleMap.setStyle(Object.assign(Object.assign({}, styleMap.style), childrenStyle));\n        }\n        const currentRowItemsStyle = (_j = (_h = (_g = (_f = (_e = props) === null || _e === void 0 ? void 0 : _e.row) === null || _f === void 0 ? void 0 : _f.style) === null || _g === void 0 ? void 0 : _g.items) === null || _h === void 0 ? void 0 : _h.item) === null || _j === void 0 ? void 0 : _j.current;\n        if (currentRowItemsStyle)\n            styleMap.setStyle(Object.assign(Object.assign({}, styleMap.style), currentRowItemsStyle));\n        const currentStyle = (_l = (_k = props) === null || _k === void 0 ? void 0 : _k.item) === null || _l === void 0 ? void 0 : _l.style;\n        if (currentStyle)\n            styleMap.setStyle(Object.assign(Object.assign({}, styleMap.style), currentStyle));\n        actionProps.left = itemLeftPx + xCompensation;\n        actionProps.width = itemWidthPx;\n        update();\n    }\n    const componentName = 'chart-timeline-items-row-item';\n    const cutterName = api.getClass(componentName) + '-cut';\n    const cutterLeft = html `\n    <div class=${cutterName} style=${leftCutStyleMap}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" viewBox=\"0 0 18 16\" width=\"16\">\n        <path fill-opacity=\"0.5\" fill=\"#ffffff\" d=\"m5,3l-5,5l5,5l0,-10z\" />\n      </svg>\n    </div>\n  `;\n    const cutterRight = html `\n    <div class=${cutterName} style=${rightCutStyleMap}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" viewBox=\"0 0 4 16\" width=\"16\">\n        <path transform=\"rotate(-180 2.5,8) \" fill-opacity=\"0.5\" fill=\"#ffffff\" d=\"m5,3l-5,5l5,5l0,-10z\" />\n      </svg>\n    </div>\n  `;\n    function onPropsChange(changedProps, options) {\n        if (options.leave || changedProps.row === undefined || changedProps.item === undefined) {\n            leave = true;\n            shouldDetach = true;\n            return update();\n        }\n        else {\n            shouldDetach = false;\n            leave = false;\n        }\n        props = changedProps;\n        actionProps.item = props.item;\n        actionProps.row = props.row;\n        updateItem();\n    }\n    onChange(onPropsChange);\n    const componentActions = api.getActions(componentName);\n    let className, labelClassName;\n    onDestroy(state.subscribe('config.classNames', () => {\n        className = api.getClass(componentName, props);\n        labelClassName = api.getClass(componentName + '-label', props);\n        update();\n    }));\n    onDestroy(state.subscribeAll(['_internal.chart.time', 'config.scroll.compensation.x'], updateItem));\n    componentActions.push(BindElementAction$7);\n    const actions = Actions.create(componentActions, actionProps);\n    const detach = new Detach(() => shouldDetach);\n    return templateProps => {\n        return wrapper(html `\n        <div detach=${detach} class=${className} data-actions=${actions} style=${styleMap}>\n          ${cutLeft ? cutterLeft : ''}\n          <div class=${labelClassName}>\n            ${props.item.isHtml ? unsafeHTML(props.item.label) : props.item.label}\n          </div>\n          ${cutRight ? cutterRight : ''}\n        </div>\n      `, { vido, props, templateProps });\n    };\n}\n\n/**\n * Gantt-Schedule-Timeline-Calendar\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0\n */\nconst actionNames = [\n    'main',\n    'list',\n    'list-column',\n    'list-column-header',\n    'list-column-header-resizer',\n    'list-column-header-resizer-dots',\n    'list-column-row',\n    'list-column-row-expander',\n    'list-column-row-expander-toggle',\n    'list-toggle',\n    'chart',\n    'chart-calendar',\n    'chart-calendar-date',\n    'chart-timeline',\n    'chart-timeline-grid',\n    'chart-timeline-grid-row',\n    'chart-timeline-grid-row-block',\n    'chart-timeline-items',\n    'chart-timeline-items-row',\n    'chart-timeline-items-row-item'\n];\nfunction generateEmptyActions() {\n    const actions = {};\n    actionNames.forEach(name => (actions[name] = []));\n    return actions;\n}\nfunction generateEmptySlots() {\n    const slots = {};\n    actionNames.forEach(name => {\n        slots[name] = { before: [], after: [] };\n    });\n    return slots;\n}\n// default configuration\nfunction defaultConfig() {\n    const actions = generateEmptyActions();\n    const slots = generateEmptySlots();\n    return {\n        plugins: [],\n        plugin: {},\n        height: 822,\n        headerHeight: 72,\n        components: {\n            Main,\n            List,\n            ListColumn,\n            ListColumnHeader,\n            ListColumnHeaderResizer,\n            ListColumnRow,\n            ListColumnRowExpander,\n            ListColumnRowExpanderToggle,\n            ListToggle,\n            Chart,\n            ChartCalendar,\n            ChartCalendarDate: ChartCalendarDay,\n            ChartTimeline,\n            ChartTimelineGrid,\n            ChartTimelineGridRow,\n            ChartTimelineGridRowBlock,\n            ChartTimelineItems,\n            ChartTimelineItemsRow,\n            ChartTimelineItemsRowItem\n        },\n        wrappers: {\n            Main(input) {\n                return input;\n            },\n            List(input) {\n                return input;\n            },\n            ListColumn(input) {\n                return input;\n            },\n            ListColumnHeader(input) {\n                return input;\n            },\n            ListColumnHeaderResizer(input) {\n                return input;\n            },\n            ListColumnRow(input) {\n                return input;\n            },\n            ListColumnRowExpander(input) {\n                return input;\n            },\n            ListColumnRowExpanderToggle(input) {\n                return input;\n            },\n            ListToggle(input) {\n                return input;\n            },\n            Chart(input) {\n                return input;\n            },\n            ChartCalendar(input) {\n                return input;\n            },\n            ChartCalendarDate(input) {\n                return input;\n            },\n            ChartTimeline(input) {\n                return input;\n            },\n            ChartTimelineGrid(input) {\n                return input;\n            },\n            ChartTimelineGridRow(input) {\n                return input;\n            },\n            ChartTimelineGridRowBlock(input) {\n                return input;\n            },\n            ChartTimelineItems(input) {\n                return input;\n            },\n            ChartTimelineItemsRow(input) {\n                return input;\n            },\n            ChartTimelineItemsRowItem(input) {\n                return input;\n            }\n        },\n        list: {\n            rows: {},\n            rowHeight: 40,\n            columns: {\n                percent: 100,\n                resizer: {\n                    width: 10,\n                    inRealTime: true,\n                    dots: 6\n                },\n                minWidth: 50,\n                data: {}\n            },\n            expander: {\n                padding: 18,\n                size: 20,\n                icon: {\n                    width: 16,\n                    height: 16\n                },\n                icons: {\n                    child: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><ellipse ry=\"4\" rx=\"4\" id=\"svg_1\" cy=\"12\" cx=\"12\" fill=\"#000000B0\"/></svg>',\n                    open: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z\"/><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/></svg>',\n                    closed: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"/><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/></svg>'\n                }\n            },\n            toggle: {\n                display: true,\n                icons: {\n                    open: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path stroke=\"null\" d=\"m16.406954,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z\"/><path stroke=\"null\" d=\"m-0.343497,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z\"/></svg>`,\n                    close: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path transform=\"rotate(-180 4.392796516418457,12) \" stroke=\"null\" d=\"m1.153809,16.012672l4.00393,-4.012673l-4.00393,-4.012673l1.232651,-1.232651l5.245324,5.245324l-5.245324,5.245324l-1.232651,-1.232651z\"/><path stroke=\"null\" d=\"m9.773297,12.97734zm1.620144,0l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,3.909362l11.341011,0l0,-1.954681l-11.341011,0l0,1.954681zm0,-9.773404l0,1.95468l11.341011,0l0,-1.95468l-11.341011,0z\"/></svg>`\n                }\n            }\n        },\n        scroll: {\n            propagate: true,\n            smooth: false,\n            top: 0,\n            left: 0,\n            xMultiplier: 3,\n            yMultiplier: 3,\n            percent: {\n                top: 0,\n                left: 0\n            },\n            compensation: {\n                x: 0,\n                y: 0\n            }\n        },\n        chart: {\n            time: {\n                period: 'day',\n                from: 0,\n                to: 0,\n                finalFrom: 0,\n                finalTo: 0,\n                zoom: 21,\n                leftGlobal: 0,\n                centerGlobal: 0,\n                rightGlobal: 0,\n                levels: [],\n                calculatedZoomMode: false\n            },\n            calendar: {\n                expand: true,\n                levels: [\n                    {\n                        formats: [\n                            {\n                                zoomTo: 17,\n                                period: 'day',\n                                className: 'gstc-date-medium gstc-date-left',\n                                format({ timeStart }) {\n                                    return timeStart.format('DD MMMM YYYY (dddd)');\n                                }\n                            },\n                            {\n                                zoomTo: 23,\n                                period: 'month',\n                                format({ timeStart }) {\n                                    return timeStart.format('MMMM YYYY');\n                                }\n                            },\n                            {\n                                zoomTo: 24,\n                                period: 'month',\n                                format({ timeStart, className, vido }) {\n                                    return timeStart.format(\"MMMM 'YY\");\n                                }\n                            },\n                            {\n                                zoomTo: 25,\n                                period: 'month',\n                                format({ timeStart }) {\n                                    return timeStart.format('MMM YYYY');\n                                }\n                            },\n                            {\n                                zoomTo: 27,\n                                period: 'year',\n                                format({ timeStart }) {\n                                    return timeStart.format('YYYY');\n                                }\n                            },\n                            {\n                                zoomTo: 100,\n                                period: 'year',\n                                default: true,\n                                format() {\n                                    return null;\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        main: true,\n                        formats: [\n                            {\n                                zoomTo: 16,\n                                period: 'hour',\n                                format({ timeStart }) {\n                                    return timeStart.format('HH:mm');\n                                }\n                            },\n                            {\n                                zoomTo: 17,\n                                period: 'hour',\n                                default: true,\n                                format({ timeStart }) {\n                                    return timeStart.format('HH');\n                                }\n                            },\n                            {\n                                zoomTo: 19,\n                                period: 'day',\n                                className: 'gstc-date-medium',\n                                format({ timeStart, className, vido }) {\n                                    return vido.html `<span class=\"${className}-content gstc-date-bold\">${timeStart.format('DD')}</span> <span class=\"${className}-content gstc-date-thin\">${timeStart.format('dddd')}</span>`;\n                                }\n                            },\n                            {\n                                zoomTo: 20,\n                                period: 'day',\n                                default: true,\n                                format({ timeStart, vido, className }) {\n                                    return vido.html `<div class=\"${className}-content gstc-date-top\">${timeStart.format('DD')}</div><div class=\"${className}-content gstc-date-small\">${timeStart.format('dddd')}</div>`;\n                                }\n                            },\n                            {\n                                zoomTo: 21,\n                                period: 'day',\n                                format({ timeStart, vido, className }) {\n                                    return vido.html `<div class=\"${className}-content gstc-date-top\">${timeStart.format('DD')}</div><div class=\"${className}-content gstc-date-small\">${timeStart.format('ddd')}</div>`;\n                                }\n                            },\n                            {\n                                zoomTo: 22,\n                                period: 'day',\n                                className: 'gstc-date-vertical',\n                                format({ timeStart, className, vido }) {\n                                    return vido.html `<div class=\"${className}-content gstc-date-top\">${timeStart.format('DD')}</div><div class=\"${className}-content gstc-date-extra-small\">${timeStart.format('ddd')}</div>`;\n                                }\n                            },\n                            {\n                                zoomTo: 23,\n                                period: 'week',\n                                default: true,\n                                format({ timeStart, timeEnd, className, vido }) {\n                                    return vido.html `<div class=\"${className}-content gstc-date-top\">${timeStart.format('DD')} - ${timeEnd.format('DD')}</div><div class=\"${className}-content gstc-date-small gstc-date-thin\">${timeStart.format('ddd')} - ${timeEnd.format('dd')}</div>`;\n                                }\n                            },\n                            {\n                                zoomTo: 25,\n                                period: 'week',\n                                className: 'gstc-date-vertical',\n                                format({ timeStart, timeEnd, className, vido }) {\n                                    return vido.html `<div class=\"${className}-content gstc-date-top gstc-date-small gstc-date-normal\">${timeStart.format('DD')}</div><div class=\"gstc-dash gstc-date-small\">-</div><div class=\"${className}-content gstc-date-small gstc-date-normal\">${timeEnd.format('DD')}</div>`;\n                                }\n                            },\n                            {\n                                zoomTo: 26,\n                                period: 'month',\n                                default: true,\n                                className: 'gstc-date-month-level-1',\n                                format({ timeStart, vido, className }) {\n                                    return vido.html `<div class=\"${className}-content gstc-date-top\">${timeStart.format('MMM')}</div><div class=\"${className}-content gstc-date-small gstc-date-bottom\">${timeStart.format('MM')}</div>`;\n                                }\n                            },\n                            {\n                                zoomTo: 27,\n                                period: 'month',\n                                className: 'gstc-date-vertical',\n                                format({ timeStart, className, vido }) {\n                                    return vido.html `<div class=\"${className}-content gstc-date-top\">${timeStart.format('MM')}</div><div class=\"${className}-content gstc-date-extra-small\">${timeStart.format('MMM')}</div>`;\n                                }\n                            },\n                            {\n                                zoomTo: 28,\n                                period: 'year',\n                                default: true,\n                                className: 'gstc-date-big',\n                                format({ timeStart }) {\n                                    return timeStart.format('YYYY');\n                                }\n                            },\n                            {\n                                zoomTo: 29,\n                                period: 'year',\n                                className: 'gstc-date-medium',\n                                format({ timeStart }) {\n                                    return timeStart.format('YYYY');\n                                }\n                            },\n                            {\n                                zoomTo: 30,\n                                period: 'year',\n                                className: 'gstc-date-medium',\n                                format({ timeStart }) {\n                                    return timeStart.format('YY');\n                                }\n                            },\n                            {\n                                zoomTo: 100,\n                                period: 'year',\n                                default: true,\n                                format() {\n                                    return null;\n                                }\n                            }\n                        ]\n                    }\n                ]\n            },\n            grid: {\n                block: {\n                    onCreate: []\n                }\n            },\n            items: {},\n            spacing: 1\n        },\n        slots,\n        classNames: {},\n        actions,\n        locale: {\n            name: 'en',\n            weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n            weekdaysShort: 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\n            weekdaysMin: 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\n            months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),\n            monthsShort: 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\n            weekStart: 1,\n            relativeTime: {\n                future: 'in %s',\n                past: '%s ago',\n                s: 'a few seconds',\n                m: 'a minute',\n                mm: '%d minutes',\n                h: 'an hour',\n                hh: '%d hours',\n                d: 'a day',\n                dd: '%d days',\n                M: 'a month',\n                MM: '%d months',\n                y: 'a year',\n                yy: '%d years'\n            },\n            formats: {\n                LT: 'HH:mm',\n                LTS: 'HH:mm:ss',\n                L: 'DD/MM/YYYY',\n                LL: 'D MMMM YYYY',\n                LLL: 'D MMMM YYYY HH:mm',\n                LLLL: 'dddd, D MMMM YYYY HH:mm'\n            },\n            ordinal: (n) => {\n                const s = ['th', 'st', 'nd', 'rd'];\n                const v = n % 100;\n                return `[${n}${s[(v - 20) % 10] || s[v] || s[0]}]`;\n            }\n        },\n        utcMode: false,\n        usageStatistics: true\n    };\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar dayjs_min = createCommonjsModule(function (module, exports) {\n!function(t,n){module.exports=n();}(commonjsGlobal,function(){var t=\"millisecond\",n=\"second\",e=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",o=\"quarter\",a=\"year\",h=/^(\\d{4})-?(\\d{1,2})-?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d{1,3})?$/,f=/\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,n,e){var r=String(t);return !r||r.length>=n?t:\"\"+Array(n+1-r.length).join(e)+t},d={s:c,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return (n<=0?\"+\":\"-\")+c(r,2,\"0\")+\":\"+c(i,2,\"0\")},m:function(t,n){var e=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(e,u),i=n-r<0,s=t.clone().add(e+(i?-1:1),u);return Number(-(e+(n-r)/(i?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return {M:u,y:a,w:s,d:i,h:r,m:e,s:n,ms:t,Q:o}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},$={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},l=\"en\",m={};m[l]=$;var y=function(t){return t instanceof v},M=function(t,n,e){var r;if(!t)return l;if(\"string\"==typeof t)m[t]&&(r=t),n&&(m[t]=n,r=t);else{var i=t.name;m[i]=t,r=i;}return e||(l=r),r},g=function(t,n,e){if(y(t))return t.clone();var r=n?\"string\"==typeof n?{format:n,pl:e}:n:{};return r.date=t,new v(r)},D=d;D.l=M,D.i=y,D.w=function(t,n){return g(t,{locale:n.$L,utc:n.$u,$offset:n.$offset})};var v=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0),this.parse(t);}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(D.u(n))return new Date;if(n instanceof Date)return new Date(n);if(\"string\"==typeof n&&!/Z$/i.test(n)){var r=n.match(h);if(r)return e?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(n)}(t),this.init();},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds();},d.$utils=function(){return D},d.isValid=function(){return !(\"Invalid Date\"===this.$d.toString())},d.isSame=function(t,n){var e=g(t);return this.startOf(n)<=e&&e<=this.endOf(n)},d.isAfter=function(t,n){return g(t)<this.startOf(n)},d.isBefore=function(t,n){return this.endOf(n)<g(t)},d.$g=function(t,n,e){return D.u(t)?this[n]:this.set(e,t)},d.year=function(t){return this.$g(t,\"$y\",a)},d.month=function(t){return this.$g(t,\"$M\",u)},d.day=function(t){return this.$g(t,\"$W\",i)},d.date=function(t){return this.$g(t,\"$D\",\"date\")},d.hour=function(t){return this.$g(t,\"$H\",r)},d.minute=function(t){return this.$g(t,\"$m\",e)},d.second=function(t){return this.$g(t,\"$s\",n)},d.millisecond=function(n){return this.$g(n,\"$ms\",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,o){var h=this,f=!!D.u(o)||o,c=D.p(t),d=function(t,n){var e=D.w(h.$u?Date.UTC(h.$y,n,t):new Date(h.$y,n,t),h);return f?e:e.endOf(i)},$=function(t,n){return D.w(h.toDate()[t].apply(h.toDate(),(f?[0,0,0,0]:[23,59,59,999]).slice(n)),h)},l=this.$W,m=this.$M,y=this.$D,M=\"set\"+(this.$u?\"UTC\":\"\");switch(c){case a:return f?d(1,0):d(31,11);case u:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,v=(l<g?l+7:l)-g;return d(f?y-v:y+(6-v),m);case i:case\"date\":return $(M+\"Hours\",0);case r:return $(M+\"Minutes\",1);case e:return $(M+\"Seconds\",2);case n:return $(M+\"Milliseconds\",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,o){var h,f=D.p(s),c=\"set\"+(this.$u?\"UTC\":\"\"),d=(h={},h[i]=c+\"Date\",h.date=c+\"Date\",h[u]=c+\"Month\",h[a]=c+\"FullYear\",h[r]=c+\"Hours\",h[e]=c+\"Minutes\",h[n]=c+\"Seconds\",h[t]=c+\"Milliseconds\",h)[f],$=f===i?this.$D+(o-this.$W):o;if(f===u||f===a){var l=this.clone().set(\"date\",1);l.$d[d]($),l.init(),this.$d=l.set(\"date\",Math.min(this.$D,l.daysInMonth())).toDate();}else d&&this.$d[d]($);return this.init(),this},d.set=function(t,n){return this.clone().$set(t,n)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,o){var h,f=this;t=Number(t);var c=D.p(o),d=function(n){var e=g(f);return D.w(e.date(e.date()+Math.round(n*t)),f)};if(c===u)return this.set(u,this.$M+t);if(c===a)return this.set(a,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(h={},h[e]=6e4,h[r]=36e5,h[n]=1e3,h)[c]||1,l=this.$d.getTime()+t*$;return D.w(l,this)},d.subtract=function(t,n){return this.add(-1*t,n)},d.format=function(t){var n=this;if(!this.isValid())return \"Invalid Date\";var e=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=D.z(this),i=this.$locale(),s=this.$H,u=this.$m,o=this.$M,a=i.weekdays,h=i.months,c=function(t,r,i,s){return t&&(t[r]||t(n,e))||i[r].substr(0,s)},d=function(t){return D.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,n,e){var r=t<12?\"AM\":\"PM\";return e?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:D.s(o+1,2,\"0\"),MMM:c(i.monthsShort,o,h,3),MMMM:h[o]||h(this,e),D:this.$D,DD:D.s(this.$D,2,\"0\"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,a,2),ddd:c(i.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(s),HH:D.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:D.s(u,2,\"0\"),s:String(this.$s),ss:D.s(this.$s,2,\"0\"),SSS:D.s(this.$ms,3,\"0\"),Z:r};return e.replace(f,function(t,n){return n||l[t]||r.replace(\":\",\"\")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,h,f){var c,d=D.p(h),$=g(t),l=6e4*($.utcOffset()-this.utcOffset()),m=this-$,y=D.m(this,$);return y=(c={},c[a]=y/12,c[u]=y,c[o]=y/3,c[s]=(m-l)/6048e5,c[i]=(m-l)/864e5,c[r]=m/36e5,c[e]=m/6e4,c[n]=m/1e3,c)[d]||m,f?y:D.a(y)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,n){if(!t)return this.$L;var e=this.clone();return e.$L=M(t,n,!0),e},d.clone=function(){return D.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=v.prototype,g.extend=function(t,n){return t(n,v,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[l],g.Ls=m,g});\n});\n\nvar utc = createCommonjsModule(function (module, exports) {\n!function(t,i){module.exports=i();}(commonjsGlobal,function(){return function(t,i,e){var s=(new Date).getTimezoneOffset(),n=i.prototype;e.utc=function(t,e){return new i({date:t,utc:!0,format:e})},n.utc=function(){return e(this.toDate(),{locale:this.$L,utc:!0})},n.local=function(){return e(this.toDate(),{locale:this.$L,utc:!1})};var u=n.parse;n.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),u.call(this,t);};var o=n.init;n.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds();}else o.call(this);};var f=n.utcOffset;n.utcOffset=function(t){var i=this.$utils().u;if(i(t))return this.$u?0:i(this.$offset)?f.call(this):this.$offset;var e,n=Math.abs(t)<=16?60*t:t;return 0!==t?(e=this.local().add(n+s,\"minute\")).$offset=n:e=this.utc(),e};var r=n.format;n.format=function(t){var i=t||(this.$u?\"YYYY-MM-DDTHH:mm:ss[Z]\":\"\");return r.call(this,i)},n.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+s;return this.$d.valueOf()-6e4*t},n.isUTC=function(){return !!this.$u},n.toISOString=function(){return this.toDate().toISOString()},n.toString=function(){return this.toDate().toUTCString()};}});\n});\n\nvar advancedFormat = createCommonjsModule(function (module, exports) {\n!function(e,t){module.exports=t();}(commonjsGlobal,function(){return function(e,t,r){var n=t.prototype,o=n.format;r.en.ordinal=function(e){var t=[\"th\",\"st\",\"nd\",\"rd\"],r=e%100;return \"[\"+e+(t[(r-20)%10]||t[r]||t[0])+\"]\"},n.format=function(e){var t=this,r=this.$locale(),n=this.$utils(),a=(e||\"YYYY-MM-DDTHH:mm:ssZ\").replace(/\\[([^\\]]+)]|Q|wo|ww|w|gggg|Do|X|x|k{1,2}|S/g,function(e){switch(e){case\"Q\":return Math.ceil((t.$M+1)/3);case\"Do\":return r.ordinal(t.$D);case\"gggg\":return t.weekYear();case\"wo\":return r.ordinal(t.week(),\"W\");case\"w\":case\"ww\":return n.s(t.week(),\"w\"===e?1:2,\"0\");case\"k\":case\"kk\":return n.s(String(0===t.$H?24:t.$H),\"k\"===e?1:2,\"0\");case\"X\":return Math.floor(t.$d.getTime()/1e3);case\"x\":return t.$d.getTime();default:return e}});return o.bind(this)(a)};}});\n});\n\nvar weekOfYear = createCommonjsModule(function (module, exports) {\n!function(e,t){module.exports=t();}(commonjsGlobal,function(){var e=\"year\";return function(t,i,n){var r=i.prototype;r.week=function(t){if(void 0===t&&(t=null),null!==t)return this.add(7*(t-this.week()),\"day\");var i=this.$locale().weekStart||0,r=n(this).endOf(e);if(0===i&&6!==r.day()&&11===this.month()&&31-this.date()<=r.day())return 1;var d=n(this).startOf(e),a=d.subtract(d.day()-i,\"day\").subtract(1,\"millisecond\"),o=this.diff(a,\"week\",!0);return Math.ceil(o)},r.weeks=function(e){return void 0===e&&(e=null),this.week(e)};}});\n});\n\n/**\n * Gantt-Schedule-Timeline-Calendar\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0\n */\ndayjs_min.extend(advancedFormat);\ndayjs_min.extend(weekOfYear);\nclass TimeApi {\n    constructor(state) {\n        this.utcMode = false;\n        this.state = state;\n        this.locale = state.get('config.locale');\n        this.utcMode = state.get('config.utcMode');\n        if (this.utcMode) {\n            dayjs_min.extend(utc);\n        }\n        // @ts-ignore\n        dayjs_min.locale(this.locale, null, true);\n    }\n    date(time) {\n        const _dayjs = this.utcMode ? dayjs_min.utc : dayjs_min;\n        return time ? _dayjs(time).locale(this.locale.name) : _dayjs().locale(this.locale.name);\n    }\n    addAdditionalSpace(time) {\n        if (time.additionalSpaces && time.additionalSpaces[time.period]) {\n            const add = time.additionalSpaces[time.period];\n            if (add.before) {\n                time.finalFrom = this.date(time.from)\n                    .subtract(add.before, add.period)\n                    .valueOf();\n            }\n            if (add.after) {\n                time.finalTo = this.date(time.to)\n                    .add(add.after, add.period)\n                    .valueOf();\n            }\n        }\n        return time;\n    }\n    recalculateFromTo(time) {\n        const period = time.period;\n        time = Object.assign({}, time);\n        time.from = +time.from;\n        time.to = +time.to;\n        let from = Number.MAX_SAFE_INTEGER, to = 0;\n        const items = this.state.get('config.chart.items');\n        if (Object.keys(items).length === 0) {\n            return time;\n        }\n        if (time.from === 0 || time.to === 0) {\n            for (const itemId in items) {\n                const item = items[itemId];\n                if (item.time.start < from && item.time.start) {\n                    from = item.time.start;\n                }\n                if (item.time.end > to) {\n                    to = item.time.end;\n                }\n            }\n            if (time.from === 0) {\n                time.from = this.date(from)\n                    .startOf(period)\n                    .valueOf();\n            }\n            if (time.to === 0) {\n                time.to = this.date(to)\n                    .endOf(period)\n                    .valueOf();\n            }\n        }\n        time.finalFrom = time.from;\n        time.finalTo = time.to;\n        time = this.addAdditionalSpace(time);\n        return time;\n    }\n    getCenter(time) {\n        return time.leftGlobal + (time.rightGlobal - time.leftGlobal) / 2;\n    }\n    timeToPixelOffset(milliseconds) {\n        const timePerPixel = this.state.get('_internal.chart.time.timePerPixel') || 1;\n        return milliseconds / timePerPixel;\n    }\n    globalTimeToViewPixelOffset(milliseconds, withCompensation = false) {\n        const time = this.state.get('_internal.chart.time');\n        let xCompensation = this.state.get('config.scroll.compensation.x') || 0;\n        const viewPixelOffset = (milliseconds - time.leftGlobal) / time.timePerPixel;\n        if (withCompensation)\n            return viewPixelOffset + xCompensation;\n        return viewPixelOffset;\n    }\n}\n\n// forked from https://github.com/joonhocho/superwild\nfunction Matcher(pattern, wchar = '*') {\n    this.wchar = wchar;\n    this.pattern = pattern;\n    this.segments = [];\n    this.starCount = 0;\n    this.minLength = 0;\n    this.maxLength = 0;\n    this.segStartIndex = 0;\n    for (let i = 0, len = pattern.length; i < len; i += 1) {\n        const char = pattern[i];\n        if (char === wchar) {\n            this.starCount += 1;\n            if (i > this.segStartIndex) {\n                this.segments.push(pattern.substring(this.segStartIndex, i));\n            }\n            this.segments.push(char);\n            this.segStartIndex = i + 1;\n        }\n    }\n    if (this.segStartIndex < pattern.length) {\n        this.segments.push(pattern.substring(this.segStartIndex));\n    }\n    if (this.starCount) {\n        this.minLength = pattern.length - this.starCount;\n        this.maxLength = Infinity;\n    }\n    else {\n        this.maxLength = this.minLength = pattern.length;\n    }\n}\nMatcher.prototype.match = function match(match) {\n    if (this.pattern === this.wchar) {\n        return true;\n    }\n    if (this.segments.length === 0) {\n        return this.pattern === match;\n    }\n    const { length } = match;\n    if (length < this.minLength || length > this.maxLength) {\n        return false;\n    }\n    let segLeftIndex = 0;\n    let segRightIndex = this.segments.length - 1;\n    let rightPos = match.length - 1;\n    let rightIsStar = false;\n    while (true) {\n        const segment = this.segments[segRightIndex];\n        segRightIndex -= 1;\n        if (segment === this.wchar) {\n            rightIsStar = true;\n        }\n        else {\n            const lastIndex = rightPos + 1 - segment.length;\n            const index = match.lastIndexOf(segment, lastIndex);\n            if (index === -1 || index > lastIndex) {\n                return false;\n            }\n            if (rightIsStar) {\n                rightPos = index - 1;\n                rightIsStar = false;\n            }\n            else {\n                if (index !== lastIndex) {\n                    return false;\n                }\n                rightPos -= segment.length;\n            }\n        }\n        if (segLeftIndex > segRightIndex) {\n            break;\n        }\n    }\n    return true;\n};\n\nfunction WildcardObject(obj, delimeter, wildcard) {\n    this.obj = obj;\n    this.delimeter = delimeter;\n    this.wildcard = wildcard;\n}\nWildcardObject.prototype.simpleMatch = function simpleMatch(first, second) {\n    if (first === second)\n        return true;\n    if (first === this.wildcard)\n        return true;\n    const index = first.indexOf(this.wildcard);\n    if (index > -1) {\n        const end = first.substr(index + 1);\n        if (index === 0 || second.substring(0, index) === first.substring(0, index)) {\n            const len = end.length;\n            if (len > 0) {\n                return second.substr(-len) === end;\n            }\n            return true;\n        }\n    }\n    return false;\n};\nWildcardObject.prototype.match = function match(first, second) {\n    return (first === second ||\n        first === this.wildcard ||\n        second === this.wildcard ||\n        this.simpleMatch(first, second) ||\n        new Matcher(first).match(second));\n};\nWildcardObject.prototype.handleArray = function handleArray(wildcard, currentArr, partIndex, path, result = {}) {\n    let nextPartIndex = wildcard.indexOf(this.delimeter, partIndex);\n    let end = false;\n    if (nextPartIndex === -1) {\n        end = true;\n        nextPartIndex = wildcard.length;\n    }\n    const currentWildcardPath = wildcard.substring(partIndex, nextPartIndex);\n    let index = 0;\n    for (const item of currentArr) {\n        const key = index.toString();\n        const currentPath = path === '' ? key : path + this.delimeter + index;\n        if (currentWildcardPath === this.wildcard ||\n            currentWildcardPath === key ||\n            this.simpleMatch(currentWildcardPath, key)) {\n            end ? (result[currentPath] = item) : this.goFurther(wildcard, item, nextPartIndex + 1, currentPath, result);\n        }\n        index++;\n    }\n    return result;\n};\nWildcardObject.prototype.handleObject = function handleObject(wildcard, currentObj, partIndex, path, result = {}) {\n    let nextPartIndex = wildcard.indexOf(this.delimeter, partIndex);\n    let end = false;\n    if (nextPartIndex === -1) {\n        end = true;\n        nextPartIndex = wildcard.length;\n    }\n    const currentWildcardPath = wildcard.substring(partIndex, nextPartIndex);\n    for (let key in currentObj) {\n        key = key.toString();\n        const currentPath = path === '' ? key : path + this.delimeter + key;\n        if (currentWildcardPath === this.wildcard ||\n            currentWildcardPath === key ||\n            this.simpleMatch(currentWildcardPath, key)) {\n            end\n                ? (result[currentPath] = currentObj[key])\n                : this.goFurther(wildcard, currentObj[key], nextPartIndex + 1, currentPath, result);\n        }\n    }\n    return result;\n};\nWildcardObject.prototype.goFurther = function goFurther(wildcard, currentObj, partIndex, currentPath, result = {}) {\n    if (Array.isArray(currentObj)) {\n        return this.handleArray(wildcard, currentObj, partIndex, currentPath, result);\n    }\n    return this.handleObject(wildcard, currentObj, partIndex, currentPath, result);\n};\nWildcardObject.prototype.get = function get(wildcard) {\n    return this.goFurther(wildcard, this.obj, 0, '');\n};\n\nclass ObjectPath {\n    static get(path, obj, copiedPath = null) {\n        if (copiedPath === null) {\n            copiedPath = path.slice();\n        }\n        if (copiedPath.length === 0 || typeof obj === \"undefined\") {\n            return obj;\n        }\n        const currentPath = copiedPath.shift();\n        if (!obj.hasOwnProperty(currentPath)) {\n            return undefined;\n        }\n        if (copiedPath.length === 0) {\n            return obj[currentPath];\n        }\n        return ObjectPath.get(path, obj[currentPath], copiedPath);\n    }\n    static set(path, newValue, obj, copiedPath = null) {\n        if (copiedPath === null) {\n            copiedPath = path.slice();\n        }\n        if (copiedPath.length === 0) {\n            for (const key in obj) {\n                delete obj[key];\n            }\n            for (const key in newValue) {\n                obj[key] = newValue[key];\n            }\n            return;\n        }\n        const currentPath = copiedPath.shift();\n        if (copiedPath.length === 0) {\n            obj[currentPath] = newValue;\n            return;\n        }\n        if (!obj) {\n            obj = {};\n        }\n        if (!obj.hasOwnProperty(currentPath)) {\n            obj[currentPath] = {};\n        }\n        ObjectPath.set(path, newValue, obj[currentPath], copiedPath);\n    }\n}\n\nfunction log(message, info) {\n    console.debug(message, info);\n}\nconst defaultOptions$1 = {\n    delimeter: `.`,\n    notRecursive: `;`,\n    param: `:`,\n    wildcard: `*`,\n    log\n};\nconst defaultListenerOptions = {\n    bulk: false,\n    debug: false,\n    source: \"\",\n    data: undefined\n};\nconst defaultUpdateOptions = {\n    only: [],\n    source: \"\",\n    debug: false,\n    data: undefined,\n    updateAfter: false\n};\nclass DeepState {\n    constructor(data = {}, options = defaultOptions$1) {\n        this.listeners = new Map();\n        this.waitingListeners = new Map();\n        this.data = data;\n        this.options = Object.assign(Object.assign({}, defaultOptions$1), options);\n        this.id = 0;\n        this.pathGet = ObjectPath.get;\n        this.pathSet = ObjectPath.set;\n        this.scan = new WildcardObject(this.data, this.options.delimeter, this.options.wildcard);\n    }\n    getListeners() {\n        return this.listeners;\n    }\n    destroy() {\n        this.data = undefined;\n        this.listeners = new Map();\n    }\n    match(first, second) {\n        if (first === second)\n            return true;\n        if (first === this.options.wildcard || second === this.options.wildcard)\n            return true;\n        return this.scan.match(first, second);\n    }\n    getIndicesOf(searchStr, str) {\n        const searchStrLen = searchStr.length;\n        if (searchStrLen == 0) {\n            return [];\n        }\n        let startIndex = 0, index, indices = [];\n        while ((index = str.indexOf(searchStr, startIndex)) > -1) {\n            indices.push(index);\n            startIndex = index + searchStrLen;\n        }\n        return indices;\n    }\n    getIndicesCount(searchStr, str) {\n        const searchStrLen = searchStr.length;\n        if (searchStrLen == 0) {\n            return 0;\n        }\n        let startIndex = 0, index, indices = 0;\n        while ((index = str.indexOf(searchStr, startIndex)) > -1) {\n            indices++;\n            startIndex = index + searchStrLen;\n        }\n        return indices;\n    }\n    cutPath(longer, shorter) {\n        longer = this.cleanNotRecursivePath(longer);\n        shorter = this.cleanNotRecursivePath(shorter);\n        const shorterPartsLen = this.getIndicesCount(this.options.delimeter, shorter);\n        const longerParts = this.getIndicesOf(this.options.delimeter, longer);\n        return longer.substr(0, longerParts[shorterPartsLen]);\n    }\n    trimPath(path) {\n        path = this.cleanNotRecursivePath(path);\n        if (path.charAt(0) === this.options.delimeter) {\n            return path.substr(1);\n        }\n        return path;\n    }\n    split(path) {\n        return path === \"\" ? [] : path.split(this.options.delimeter);\n    }\n    isWildcard(path) {\n        return path.includes(this.options.wildcard);\n    }\n    isNotRecursive(path) {\n        return path.endsWith(this.options.notRecursive);\n    }\n    cleanNotRecursivePath(path) {\n        return this.isNotRecursive(path) ? path.substring(0, path.length - 1) : path;\n    }\n    hasParams(path) {\n        return path.includes(this.options.param);\n    }\n    getParamsInfo(path) {\n        let paramsInfo = { replaced: \"\", original: path, params: {} };\n        let partIndex = 0;\n        let fullReplaced = [];\n        for (const part of this.split(path)) {\n            paramsInfo.params[partIndex] = {\n                original: part,\n                replaced: \"\",\n                name: \"\"\n            };\n            const reg = new RegExp(`\\\\${this.options.param}([^\\\\${this.options.delimeter}\\\\${this.options.param}]+)`, \"g\");\n            let param = reg.exec(part);\n            if (param) {\n                paramsInfo.params[partIndex].name = param[1];\n            }\n            else {\n                delete paramsInfo.params[partIndex];\n                fullReplaced.push(part);\n                partIndex++;\n                continue;\n            }\n            reg.lastIndex = 0;\n            paramsInfo.params[partIndex].replaced = part.replace(reg, this.options.wildcard);\n            fullReplaced.push(paramsInfo.params[partIndex].replaced);\n            partIndex++;\n        }\n        paramsInfo.replaced = fullReplaced.join(this.options.delimeter);\n        return paramsInfo;\n    }\n    getParams(paramsInfo, path) {\n        if (!paramsInfo) {\n            return undefined;\n        }\n        const split = this.split(path);\n        const result = {};\n        for (const partIndex in paramsInfo.params) {\n            const param = paramsInfo.params[partIndex];\n            result[param.name] = split[partIndex];\n        }\n        return result;\n    }\n    waitForAll(userPaths, fn) {\n        const paths = {};\n        for (let path of userPaths) {\n            paths[path] = { dirty: false };\n            if (this.hasParams(path)) {\n                paths[path].paramsInfo = this.getParamsInfo(path);\n            }\n            paths[path].isWildcard = this.isWildcard(path);\n            paths[path].isRecursive = !this.isNotRecursive(path);\n        }\n        this.waitingListeners.set(userPaths, { fn, paths });\n        fn(paths);\n        return function unsubscribe() {\n            this.waitingListeners.delete(userPaths);\n        };\n    }\n    executeWaitingListeners(updatePath) {\n        for (const waitingListener of this.waitingListeners.values()) {\n            const { fn, paths } = waitingListener;\n            let dirty = 0;\n            let all = 0;\n            for (let path in paths) {\n                const pathInfo = paths[path];\n                let match = false;\n                if (pathInfo.isRecursive)\n                    updatePath = this.cutPath(updatePath, path);\n                if (pathInfo.isWildcard && this.match(path, updatePath))\n                    match = true;\n                if (updatePath === path)\n                    match = true;\n                if (match) {\n                    pathInfo.dirty = true;\n                }\n                if (pathInfo.dirty) {\n                    dirty++;\n                }\n                all++;\n            }\n            if (dirty === all) {\n                fn(paths);\n            }\n        }\n    }\n    subscribeAll(userPaths, fn, options = defaultListenerOptions) {\n        let unsubscribers = [];\n        for (const userPath of userPaths) {\n            unsubscribers.push(this.subscribe(userPath, fn, options));\n        }\n        return function unsubscribe() {\n            for (const unsubscribe of unsubscribers) {\n                unsubscribe();\n            }\n        };\n    }\n    getCleanListenersCollection(values = {}) {\n        return Object.assign({ listeners: new Map(), isRecursive: false, isWildcard: false, hasParams: false, match: undefined, paramsInfo: undefined, path: undefined, count: 0 }, values);\n    }\n    getCleanListener(fn, options = defaultListenerOptions) {\n        return {\n            fn,\n            options: Object.assign(Object.assign({}, defaultListenerOptions), options)\n        };\n    }\n    getListenerCollectionMatch(listenerPath, isRecursive, isWildcard) {\n        listenerPath = this.cleanNotRecursivePath(listenerPath);\n        const self = this;\n        return function listenerCollectionMatch(path) {\n            if (isRecursive)\n                path = self.cutPath(path, listenerPath);\n            if (isWildcard && self.match(listenerPath, path))\n                return true;\n            return listenerPath === path;\n        };\n    }\n    getListenersCollection(listenerPath, listener) {\n        if (this.listeners.has(listenerPath)) {\n            let listenersCollection = this.listeners.get(listenerPath);\n            listenersCollection.listeners.set(++this.id, listener);\n            return listenersCollection;\n        }\n        let collCfg = {\n            isRecursive: true,\n            isWildcard: false,\n            hasParams: false,\n            paramsInfo: undefined,\n            originalPath: listenerPath,\n            path: listenerPath\n        };\n        if (this.hasParams(collCfg.path)) {\n            collCfg.paramsInfo = this.getParamsInfo(collCfg.path);\n            collCfg.path = collCfg.paramsInfo.replaced;\n            collCfg.hasParams = true;\n        }\n        collCfg.isWildcard = this.isWildcard(collCfg.path);\n        if (this.isNotRecursive(collCfg.path)) {\n            collCfg.isRecursive = false;\n        }\n        let listenersCollection = this.getCleanListenersCollection(Object.assign(Object.assign({}, collCfg), { match: this.getListenerCollectionMatch(collCfg.path, collCfg.isRecursive, collCfg.isWildcard) }));\n        this.id++;\n        listenersCollection.listeners.set(this.id, listener);\n        this.listeners.set(collCfg.path, listenersCollection);\n        return listenersCollection;\n    }\n    subscribe(listenerPath, fn, options = defaultListenerOptions, type = \"subscribe\") {\n        let listener = this.getCleanListener(fn, options);\n        const listenersCollection = this.getListenersCollection(listenerPath, listener);\n        listenersCollection.count++;\n        listenerPath = listenersCollection.path;\n        if (!listenersCollection.isWildcard) {\n            fn(this.pathGet(this.split(this.cleanNotRecursivePath(listenerPath)), this.data), {\n                type,\n                listener,\n                listenersCollection,\n                path: {\n                    listener: listenerPath,\n                    update: undefined,\n                    resolved: this.cleanNotRecursivePath(listenerPath)\n                },\n                params: this.getParams(listenersCollection.paramsInfo, listenerPath),\n                options\n            });\n        }\n        else {\n            const paths = this.scan.get(this.cleanNotRecursivePath(listenerPath));\n            if (options.bulk) {\n                const bulkValue = [];\n                for (const path in paths) {\n                    bulkValue.push({\n                        path,\n                        params: this.getParams(listenersCollection.paramsInfo, path),\n                        value: paths[path]\n                    });\n                }\n                fn(bulkValue, {\n                    type,\n                    listener,\n                    listenersCollection,\n                    path: {\n                        listener: listenerPath,\n                        update: undefined,\n                        resolved: undefined\n                    },\n                    options,\n                    params: undefined\n                });\n            }\n            else {\n                for (const path in paths) {\n                    fn(paths[path], {\n                        type,\n                        listener,\n                        listenersCollection,\n                        path: {\n                            listener: listenerPath,\n                            update: undefined,\n                            resolved: this.cleanNotRecursivePath(path)\n                        },\n                        params: this.getParams(listenersCollection.paramsInfo, path),\n                        options\n                    });\n                }\n            }\n        }\n        this.debugSubscribe(listener, listenersCollection, listenerPath);\n        return this.unsubscribe(listenerPath, this.id);\n    }\n    unsubscribe(path, id) {\n        const listeners = this.listeners;\n        const listenersCollection = listeners.get(path);\n        return function unsub() {\n            listenersCollection.listeners.delete(id);\n            listenersCollection.count--;\n            if (listenersCollection.count === 0) {\n                listeners.delete(path);\n            }\n        };\n    }\n    same(newValue, oldValue) {\n        return (([\"number\", \"string\", \"undefined\", \"boolean\"].includes(typeof newValue) || newValue === null) &&\n            oldValue === newValue);\n    }\n    notifyListeners(listeners, exclude = [], returnNotified = true) {\n        const alreadyNotified = [];\n        for (const path in listeners) {\n            let { single, bulk } = listeners[path];\n            for (const singleListener of single) {\n                if (exclude.includes(singleListener))\n                    continue;\n                const time = this.debugTime(singleListener);\n                singleListener.listener.fn(singleListener.value(), singleListener.eventInfo);\n                if (returnNotified)\n                    alreadyNotified.push(singleListener);\n                this.debugListener(time, singleListener);\n            }\n            for (const bulkListener of bulk) {\n                if (exclude.includes(bulkListener))\n                    continue;\n                const time = this.debugTime(bulkListener);\n                const bulkValue = [];\n                for (const bulk of bulkListener.value) {\n                    bulkValue.push(Object.assign(Object.assign({}, bulk), { value: bulk.value() }));\n                }\n                bulkListener.listener.fn(bulkValue, bulkListener.eventInfo);\n                if (returnNotified)\n                    alreadyNotified.push(bulkListener);\n                this.debugListener(time, bulkListener);\n            }\n        }\n        return alreadyNotified;\n    }\n    getSubscribedListeners(updatePath, newValue, options, type = \"update\", originalPath = null) {\n        options = Object.assign(Object.assign({}, defaultUpdateOptions), options);\n        const listeners = {};\n        for (let [listenerPath, listenersCollection] of this.listeners) {\n            listeners[listenerPath] = { single: [], bulk: [], bulkData: [] };\n            if (listenersCollection.match(updatePath)) {\n                const params = listenersCollection.paramsInfo\n                    ? this.getParams(listenersCollection.paramsInfo, updatePath)\n                    : undefined;\n                const value = listenersCollection.isRecursive || listenersCollection.isWildcard\n                    ? () => this.get(this.cutPath(updatePath, listenerPath))\n                    : () => newValue;\n                const bulkValue = [{ value, path: updatePath, params }];\n                for (const listener of listenersCollection.listeners.values()) {\n                    if (listener.options.bulk) {\n                        listeners[listenerPath].bulk.push({\n                            listener,\n                            listenersCollection,\n                            eventInfo: {\n                                type,\n                                listener,\n                                path: {\n                                    listener: listenerPath,\n                                    update: originalPath ? originalPath : updatePath,\n                                    resolved: undefined\n                                },\n                                params,\n                                options\n                            },\n                            value: bulkValue\n                        });\n                    }\n                    else {\n                        listeners[listenerPath].single.push({\n                            listener,\n                            listenersCollection,\n                            eventInfo: {\n                                type,\n                                listener,\n                                path: {\n                                    listener: listenerPath,\n                                    update: originalPath ? originalPath : updatePath,\n                                    resolved: this.cleanNotRecursivePath(updatePath)\n                                },\n                                params,\n                                options\n                            },\n                            value\n                        });\n                    }\n                }\n            }\n        }\n        return listeners;\n    }\n    notifySubscribedListeners(updatePath, newValue, options, type = \"update\", originalPath = null) {\n        return this.notifyListeners(this.getSubscribedListeners(updatePath, newValue, options, type, originalPath));\n    }\n    getNestedListeners(updatePath, newValue, options, type = \"update\", originalPath = null) {\n        const listeners = {};\n        for (let [listenerPath, listenersCollection] of this.listeners) {\n            listeners[listenerPath] = { single: [], bulk: [] };\n            const currentCuttedPath = this.cutPath(listenerPath, updatePath);\n            if (this.match(currentCuttedPath, updatePath)) {\n                const restPath = this.trimPath(listenerPath.substr(currentCuttedPath.length));\n                const values = new WildcardObject(newValue, this.options.delimeter, this.options.wildcard).get(restPath);\n                const params = listenersCollection.paramsInfo\n                    ? this.getParams(listenersCollection.paramsInfo, updatePath)\n                    : undefined;\n                const bulk = [];\n                const bulkListeners = {};\n                for (const currentRestPath in values) {\n                    const value = () => values[currentRestPath];\n                    const fullPath = [updatePath, currentRestPath].join(this.options.delimeter);\n                    for (const [listenerId, listener] of listenersCollection.listeners) {\n                        const eventInfo = {\n                            type,\n                            listener,\n                            listenersCollection,\n                            path: {\n                                listener: listenerPath,\n                                update: originalPath ? originalPath : updatePath,\n                                resolved: this.cleanNotRecursivePath(fullPath)\n                            },\n                            params,\n                            options\n                        };\n                        if (listener.options.bulk) {\n                            bulk.push({ value, path: fullPath, params });\n                            bulkListeners[listenerId] = listener;\n                        }\n                        else {\n                            listeners[listenerPath].single.push({\n                                listener,\n                                listenersCollection,\n                                eventInfo,\n                                value\n                            });\n                        }\n                    }\n                }\n                for (const listenerId in bulkListeners) {\n                    const listener = bulkListeners[listenerId];\n                    const eventInfo = {\n                        type,\n                        listener,\n                        listenersCollection,\n                        path: {\n                            listener: listenerPath,\n                            update: updatePath,\n                            resolved: undefined\n                        },\n                        options,\n                        params\n                    };\n                    listeners[listenerPath].bulk.push({\n                        listener,\n                        listenersCollection,\n                        eventInfo,\n                        value: bulk\n                    });\n                }\n            }\n        }\n        return listeners;\n    }\n    notifyNestedListeners(updatePath, newValue, options, type = \"update\", alreadyNotified, originalPath = null) {\n        return this.notifyListeners(this.getNestedListeners(updatePath, newValue, options, type, originalPath), alreadyNotified, false);\n    }\n    getNotifyOnlyListeners(updatePath, newValue, options, type = \"update\", originalPath = null) {\n        const listeners = {};\n        if (typeof options.only !== \"object\" ||\n            !Array.isArray(options.only) ||\n            typeof options.only[0] === \"undefined\" ||\n            !this.canBeNested(newValue)) {\n            return listeners;\n        }\n        for (const notifyPath of options.only) {\n            const wildcardScan = new WildcardObject(newValue, this.options.delimeter, this.options.wildcard).get(notifyPath);\n            listeners[notifyPath] = { bulk: [], single: [] };\n            for (const wildcardPath in wildcardScan) {\n                const fullPath = updatePath + this.options.delimeter + wildcardPath;\n                for (const [listenerPath, listenersCollection] of this.listeners) {\n                    const params = listenersCollection.paramsInfo\n                        ? this.getParams(listenersCollection.paramsInfo, fullPath)\n                        : undefined;\n                    if (this.match(listenerPath, fullPath)) {\n                        const value = () => wildcardScan[wildcardPath];\n                        const bulkValue = [{ value, path: fullPath, params }];\n                        for (const listener of listenersCollection.listeners.values()) {\n                            const eventInfo = {\n                                type,\n                                listener,\n                                listenersCollection,\n                                path: {\n                                    listener: listenerPath,\n                                    update: originalPath ? originalPath : updatePath,\n                                    resolved: this.cleanNotRecursivePath(fullPath)\n                                },\n                                params,\n                                options\n                            };\n                            if (listener.options.bulk) {\n                                if (!listeners[notifyPath].bulk.some(bulkListener => bulkListener.listener === listener)) {\n                                    listeners[notifyPath].bulk.push({\n                                        listener,\n                                        listenersCollection,\n                                        eventInfo,\n                                        value: bulkValue\n                                    });\n                                }\n                            }\n                            else {\n                                listeners[notifyPath].single.push({\n                                    listener,\n                                    listenersCollection,\n                                    eventInfo,\n                                    value\n                                });\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return listeners;\n    }\n    notifyOnly(updatePath, newValue, options, type = \"update\", originalPath = \"\") {\n        return (typeof this.notifyListeners(this.getNotifyOnlyListeners(updatePath, newValue, options, type, originalPath))[0] !==\n            \"undefined\");\n    }\n    canBeNested(newValue) {\n        return typeof newValue === \"object\" && newValue !== null;\n    }\n    getUpdateValues(oldValue, split, fn) {\n        if (typeof oldValue === \"object\" && oldValue !== null) {\n            Array.isArray(oldValue) ? (oldValue = oldValue.slice()) : (oldValue = Object.assign({}, oldValue));\n        }\n        let newValue = fn;\n        if (typeof fn === \"function\") {\n            newValue = fn(this.pathGet(split, this.data));\n        }\n        return { newValue, oldValue };\n    }\n    wildcardUpdate(updatePath, fn, options = defaultUpdateOptions) {\n        options = Object.assign(Object.assign({}, defaultUpdateOptions), options);\n        const scanned = this.scan.get(updatePath);\n        const bulk = {};\n        for (const path in scanned) {\n            const split = this.split(path);\n            const { oldValue, newValue } = this.getUpdateValues(scanned[path], split, fn);\n            if (!this.same(newValue, oldValue))\n                bulk[path] = newValue;\n        }\n        const groupedListenersPack = [];\n        const waitingPaths = [];\n        for (const path in bulk) {\n            const newValue = bulk[path];\n            if (options.only.length) {\n                groupedListenersPack.push(this.getNotifyOnlyListeners(path, newValue, options, \"update\", updatePath));\n            }\n            else {\n                groupedListenersPack.push(this.getSubscribedListeners(path, newValue, options, \"update\", updatePath));\n                this.canBeNested(newValue) &&\n                    groupedListenersPack.push(this.getNestedListeners(path, newValue, options, \"update\", updatePath));\n            }\n            options.debug && this.options.log(\"Wildcard update\", { path, newValue });\n            this.pathSet(this.split(path), newValue, this.data);\n            waitingPaths.push(path);\n        }\n        let alreadyNotified = [];\n        for (const groupedListeners of groupedListenersPack) {\n            alreadyNotified = [...alreadyNotified, ...this.notifyListeners(groupedListeners, alreadyNotified)];\n        }\n        for (const path of waitingPaths) {\n            this.executeWaitingListeners(path);\n        }\n    }\n    update(updatePath, fn, options = defaultUpdateOptions) {\n        if (this.isWildcard(updatePath)) {\n            return this.wildcardUpdate(updatePath, fn, options);\n        }\n        const split = this.split(updatePath);\n        const { oldValue, newValue } = this.getUpdateValues(this.pathGet(split, this.data), split, fn);\n        if (options.debug) {\n            this.options.log(`Updating ${updatePath} ${options.source ? `from ${options.source}` : \"\"}`, {\n                oldValue,\n                newValue\n            });\n        }\n        if (this.same(newValue, oldValue)) {\n            return newValue;\n        }\n        if (!options.updateAfter) {\n            this.pathSet(split, newValue, this.data);\n        }\n        options = Object.assign(Object.assign({}, defaultUpdateOptions), options);\n        if (options.only === null) {\n            return newValue;\n        }\n        if (options.only.length) {\n            this.notifyOnly(updatePath, newValue, options);\n            this.executeWaitingListeners(updatePath);\n            return newValue;\n        }\n        const alreadyNotified = this.notifySubscribedListeners(updatePath, newValue, options);\n        if (this.canBeNested(newValue)) {\n            this.notifyNestedListeners(updatePath, newValue, options, \"update\", alreadyNotified);\n        }\n        this.executeWaitingListeners(updatePath);\n        if (options.updateAfter) {\n            this.pathSet(split, newValue, this.data);\n        }\n        return newValue;\n    }\n    get(userPath = undefined) {\n        if (typeof userPath === \"undefined\" || userPath === \"\") {\n            return this.data;\n        }\n        return this.pathGet(this.split(userPath), this.data);\n    }\n    debugSubscribe(listener, listenersCollection, listenerPath) {\n        if (listener.options.debug) {\n            this.options.log(\"listener subscribed\", {\n                listenerPath,\n                listener,\n                listenersCollection\n            });\n        }\n    }\n    debugListener(time, groupedListener) {\n        if (groupedListener.eventInfo.options.debug || groupedListener.listener.options.debug) {\n            this.options.log(\"Listener fired\", {\n                time: Date.now() - time,\n                info: groupedListener\n            });\n        }\n    }\n    debugTime(groupedListener) {\n        return groupedListener.listener.options.debug || groupedListener.eventInfo.options.debug ? Date.now() : 0;\n    }\n}\n\n/**\n * Schedule - a throttle function that uses requestAnimationFrame to limit the rate at which a function is called.\n *\n * @param {function} fn\n * @returns {function}\n */\n/**\n * Is object - helper function to determine if specified variable is an object\n *\n * @param {any} item\n * @returns {boolean}\n */\nfunction isObject$1(item) {\n    return item && typeof item === 'object' && !Array.isArray(item);\n}\n/**\n * Merge deep - helper function which will merge objects recursively - creating brand new one - like clone\n *\n * @param {object} target\n * @params {object} sources\n * @returns {object}\n */\nfunction mergeDeep$1(target, ...sources) {\n    const source = sources.shift();\n    if (isObject$1(target) && isObject$1(source)) {\n        for (const key in source) {\n            if (isObject$1(source[key])) {\n                if (typeof target[key] === 'undefined') {\n                    target[key] = {};\n                }\n                target[key] = mergeDeep$1(target[key], source[key]);\n            }\n            else if (Array.isArray(source[key])) {\n                target[key] = [];\n                for (let item of source[key]) {\n                    if (isObject$1(item)) {\n                        target[key].push(mergeDeep$1({}, item));\n                        continue;\n                    }\n                    target[key].push(item);\n                }\n            }\n            else {\n                target[key] = source[key];\n            }\n        }\n    }\n    if (!sources.length) {\n        return target;\n    }\n    return mergeDeep$1(target, ...sources);\n}\n\n/**\n * Api functions\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0\n */\nconst lib = 'gantt-schedule-timeline-calendar';\nfunction mergeActions(userConfig, defaultConfig) {\n    const defaultConfigActions = mergeDeep$1({}, defaultConfig.actions);\n    const userActions = mergeDeep$1({}, userConfig.actions);\n    let allActionNames = [...Object.keys(defaultConfigActions), ...Object.keys(userActions)];\n    allActionNames = allActionNames.filter(i => allActionNames.includes(i));\n    const actions = {};\n    for (const actionName of allActionNames) {\n        actions[actionName] = [];\n        if (typeof defaultConfigActions[actionName] !== 'undefined' && Array.isArray(defaultConfigActions[actionName])) {\n            actions[actionName] = [...defaultConfigActions[actionName]];\n        }\n        if (typeof userActions[actionName] !== 'undefined' && Array.isArray(userActions[actionName])) {\n            actions[actionName] = [...actions[actionName], ...userActions[actionName]];\n        }\n    }\n    delete userConfig.actions;\n    delete defaultConfig.actions;\n    return actions;\n}\nfunction stateFromConfig(userConfig) {\n    const defaultConfig$1 = defaultConfig();\n    const actions = mergeActions(userConfig, defaultConfig$1);\n    const state = { config: mergeDeep$1({}, defaultConfig$1, userConfig) };\n    state.config.actions = actions;\n    // @ts-ignore\n    return (this.state = new DeepState(state, { delimeter: '.' }));\n}\nconst publicApi = {\n    name: lib,\n    stateFromConfig,\n    mergeDeep: mergeDeep$1,\n    date(time) {\n        return time ? dayjs_min(time) : dayjs_min();\n    },\n    setPeriod(period) {\n        this.state.update('config.chart.time.period', period);\n        return this.state.get('config.chart.time.zoom');\n    },\n    dayjs: dayjs_min\n};\nfunction getInternalApi(state) {\n    let $state = state.get();\n    let unsubscribes = [];\n    const iconsCache = {};\n    const api = {\n        name: lib,\n        debug: false,\n        setVido(Vido) {\n        },\n        log(...args) {\n            if (this.debug) {\n                console.log.call(console, ...args);\n            }\n        },\n        mergeDeep: mergeDeep$1,\n        getClass(name) {\n            let simple = `${lib}__${name}`;\n            if (name === this.name) {\n                simple = this.name;\n            }\n            return simple;\n        },\n        allActions: [],\n        getActions(name) {\n            if (!this.allActions.includes(name))\n                this.allActions.push(name);\n            let actions = state.get('config.actions.' + name);\n            if (typeof actions === 'undefined') {\n                actions = [];\n            }\n            return actions.slice();\n        },\n        isItemInViewport(item, left, right) {\n            return ((item.time.start >= left && item.time.start < right) ||\n                (item.time.end >= left && item.time.end < right) ||\n                (item.time.start <= left && item.time.end >= right));\n        },\n        prepareItems(items) {\n            for (const item of items) {\n                item.time.start = +item.time.start;\n                item.time.end = +item.time.end;\n                item.id = String(item.id);\n            }\n            return items;\n        },\n        fillEmptyRowValues(rows) {\n            let top = 0;\n            for (const rowId in rows) {\n                const row = rows[rowId];\n                row._internal = {\n                    parents: [],\n                    children: [],\n                    items: []\n                };\n                if (typeof row.height !== 'number') {\n                    row.height = $state.config.list.rowHeight;\n                }\n                if (typeof row.expanded !== 'boolean') {\n                    row.expanded = false;\n                }\n                row.top = top;\n                top += row.height;\n            }\n            return rows;\n        },\n        generateParents(rows, parentName = 'parentId') {\n            const parents = {};\n            for (const row of rows) {\n                const parentId = row[parentName] !== undefined && row[parentName] !== null ? row[parentName] : '';\n                if (parents[parentId] === undefined) {\n                    parents[parentId] = {};\n                }\n                parents[parentId][row.id] = row;\n            }\n            return parents;\n        },\n        fastTree(rowParents, node, parents = []) {\n            const children = rowParents[node.id];\n            node._internal.parents = parents;\n            if (typeof children === 'undefined') {\n                node._internal.children = [];\n                return node;\n            }\n            if (node.id !== '') {\n                parents = [...parents, node.id];\n            }\n            node._internal.children = Object.values(children);\n            for (const childrenId in children) {\n                const child = children[childrenId];\n                this.fastTree(rowParents, child, parents);\n            }\n            return node;\n        },\n        makeTreeMap(rows, items) {\n            const itemParents = this.generateParents(items, 'rowId');\n            for (const row of rows) {\n                row._internal.items = itemParents[row.id] !== undefined ? Object.values(itemParents[row.id]) : [];\n            }\n            const rowParents = this.generateParents(rows);\n            const tree = { id: '', _internal: { children: [], parents: [], items: [] } };\n            return this.fastTree(rowParents, tree);\n        },\n        getFlatTreeMapById(treeMap, flatTreeMapById = {}) {\n            for (const child of treeMap._internal.children) {\n                flatTreeMapById[child.id] = child;\n                this.getFlatTreeMapById(child, flatTreeMapById);\n            }\n            return flatTreeMapById;\n        },\n        flattenTreeMap(treeMap, rows = []) {\n            for (const child of treeMap._internal.children) {\n                rows.push(child.id);\n                this.flattenTreeMap(child, rows);\n            }\n            return rows;\n        },\n        getRowsFromMap(flatTreeMap, rows) {\n            return flatTreeMap.map(node => rows[node.id]);\n        },\n        getRowsFromIds(ids, rows) {\n            const result = [];\n            for (const id of ids) {\n                result.push(rows[id]);\n            }\n            return result;\n        },\n        getRowsWithParentsExpanded(flatTreeMap, flatTreeMapById, rows) {\n            if (!flatTreeMap ||\n                !flatTreeMapById ||\n                !rows ||\n                flatTreeMap.length === 0 ||\n                flatTreeMapById.length === 0 ||\n                Object.keys(rows).length === 0) {\n                return [];\n            }\n            const rowsWithParentsExpanded = [];\n            next: for (const rowId of flatTreeMap) {\n                for (const parentId of flatTreeMapById[rowId]._internal.parents) {\n                    const parent = rows[parentId];\n                    if (!parent || !parent.expanded) {\n                        continue next;\n                    }\n                }\n                rowsWithParentsExpanded.push(rowId);\n            }\n            return rowsWithParentsExpanded;\n        },\n        getRowsHeight(rows) {\n            let height = 0;\n            for (const row of rows) {\n                if (row)\n                    height += row.height;\n            }\n            return height;\n        },\n        /**\n         * Get visible rows - get rows that are inside current viewport (height)\n         *\n         * @param {array} rowsWithParentsExpanded rows that have parent expanded- they are visible\n         */\n        getVisibleRowsAndCompensation(rowsWithParentsExpanded) {\n            const visibleRows = [];\n            let currentRowsOffset = 0;\n            let rowOffset = 0;\n            const scrollTop = state.get('config.scroll.top');\n            const height = state.get('_internal.height');\n            let chartViewBottom = 0;\n            let compensation = 0;\n            for (const row of rowsWithParentsExpanded) {\n                if (row === undefined)\n                    continue;\n                chartViewBottom = scrollTop + height;\n                if (currentRowsOffset + row.height >= scrollTop && currentRowsOffset <= chartViewBottom) {\n                    row.top = rowOffset;\n                    compensation = row.top + scrollTop - currentRowsOffset;\n                    rowOffset += row.height;\n                    visibleRows.push(row);\n                }\n                currentRowsOffset += row.height;\n                if (currentRowsOffset >= chartViewBottom) {\n                    break;\n                }\n            }\n            return { visibleRows, compensation };\n        },\n        /**\n         * Normalize mouse wheel event to get proper scroll metrics\n         *\n         * @param {Event} event mouse wheel event\n         */\n        normalizeMouseWheelEvent(event) {\n            // @ts-ignore\n            let x = event.deltaX || 0;\n            // @ts-ignore\n            let y = event.deltaY || 0;\n            // @ts-ignore\n            let z = event.deltaZ || 0;\n            // @ts-ignore\n            const mode = event.deltaMode;\n            const lineHeight = state.get('config.list.rowHeight');\n            let scale = 1;\n            switch (mode) {\n                case 1:\n                    if (lineHeight) {\n                        scale = lineHeight;\n                    }\n                    break;\n                case 2:\n                    // @ts-ignore\n                    scale = window.height;\n                    break;\n            }\n            x *= scale;\n            y *= scale;\n            z *= scale;\n            return { x, y, z, event };\n        },\n        normalizePointerEvent(event) {\n            const result = { x: 0, y: 0, pageX: 0, pageY: 0, clientX: 0, clientY: 0, screenX: 0, screenY: 0 };\n            switch (event.type) {\n                case 'wheel':\n                    const wheel = this.normalizeMouseWheelEvent(event);\n                    result.x = wheel.x;\n                    result.y = wheel.y;\n                    result.pageX = result.x;\n                    result.pageY = result.y;\n                    result.screenX = result.x;\n                    result.screenY = result.y;\n                    result.clientX = result.x;\n                    result.clientY = result.y;\n                    break;\n                case 'touchstart':\n                case 'touchmove':\n                case 'touchend':\n                case 'touchcancel':\n                    result.x = event.changedTouches[0].screenX;\n                    result.y = event.changedTouches[0].screenY;\n                    result.pageX = event.changedTouches[0].pageX;\n                    result.pageY = event.changedTouches[0].pageY;\n                    result.screenX = event.changedTouches[0].screenX;\n                    result.screenY = event.changedTouches[0].screenY;\n                    result.clientX = event.changedTouches[0].clientX;\n                    result.clientY = event.changedTouches[0].clientY;\n                    break;\n                default:\n                    result.x = event.x;\n                    result.y = event.y;\n                    result.pageX = event.pageX;\n                    result.pageY = event.pageY;\n                    result.screenX = event.screenX;\n                    result.screenY = event.screenY;\n                    result.clientX = event.clientX;\n                    result.clientY = event.clientY;\n                    break;\n            }\n            return result;\n        },\n        limitScrollLeft(totalViewDurationPx, chartWidth, scrollLeft) {\n            const width = totalViewDurationPx - chartWidth;\n            if (scrollLeft < 0) {\n                scrollLeft = 0;\n            }\n            else if (scrollLeft > width) {\n                scrollLeft = width;\n            }\n            return Math.round(scrollLeft);\n        },\n        limitScrollTop(rowsHeight, internalHeight, scrollTop) {\n            const height = rowsHeight - internalHeight;\n            if (scrollTop < 0) {\n                scrollTop = 0;\n            }\n            else if (scrollTop > height) {\n                scrollTop = height;\n            }\n            return Math.round(scrollTop);\n        },\n        time: new TimeApi(state),\n        /**\n         * Get scrollbar height - compute it from element\n         *\n         * @returns {number}\n         */\n        getScrollBarHeight(add = 0) {\n            const outer = document.createElement('div');\n            outer.style.visibility = 'hidden';\n            outer.style.height = '100px';\n            document.body.appendChild(outer);\n            const noScroll = outer.offsetHeight;\n            outer.style.msOverflowStyle = 'scrollbar';\n            outer.style.overflow = 'scroll';\n            const inner = document.createElement('div');\n            inner.style.height = '100%';\n            outer.appendChild(inner);\n            const withScroll = inner.offsetHeight;\n            outer.parentNode.removeChild(outer);\n            return noScroll - withScroll + add;\n        },\n        scrollToTime(toTime) {\n            const time = state.get('_internal.chart.time');\n            state.update('config.scroll', scroll => {\n                const chartWidth = state.get('_internal.chart.dimensions.width');\n                const halfTime = (chartWidth / 2) * time.timePerPixel;\n                const leftGlobal = toTime - halfTime - time.finalFrom;\n                scroll.left = this.limitScrollLeft(time.totalViewDurationPx, chartWidth, leftGlobal / time.timePerPixel);\n                return scroll;\n            });\n        },\n        /**\n         * Get grid blocks that are under specified rectangle\n         *\n         * @param {number} x beginging at chart-timeline bounding rect\n         * @param {number} y beginging at chart-timeline bounding rect\n         * @param {number} width\n         * @param {number} height\n         * @returns {array} array of {element, data}\n         */\n        getGridBlocksUnderRect(x, y, width, height) {\n            const main = state.get('_internal.elements.main');\n            if (!main)\n                return [];\n        },\n        getCompensationX() {\n            return state.get('config.scroll.compensation.x') || 0;\n        },\n        getCompensationY() {\n            return state.get('config.scroll.compensation.y') || 0;\n        },\n        getSVGIconSrc(svg) {\n            if (typeof iconsCache[svg] === 'string')\n                return iconsCache[svg];\n            iconsCache[svg] = 'data:image/svg+xml;base64,' + btoa(svg);\n            return iconsCache[svg];\n        },\n        /**\n         * Destroy things to release memory\n         */\n        destroy() {\n            $state = undefined;\n            for (const unsubscribe of unsubscribes) {\n                unsubscribe();\n            }\n            unsubscribes = [];\n            if (api.debug) {\n                // @ts-ignore\n                delete window.state;\n            }\n        }\n    };\n    if (api.debug) {\n        // @ts-ignore\n        window.state = state;\n        // @ts-ignore\n        window.api = api;\n    }\n    return api;\n}\n\n/**\n * Gantt-Schedule-Timeline-Calendar\n *\n * @copyright Rafal Pospiech <https://neuronet.io>\n * @author    Rafal Pospiech <neuronet.io@gmail.com>\n * @package   gantt-schedule-timeline-calendar\n * @license   AGPL-3.0\n */\nfunction GSTC(options) {\n    const state = options.state;\n    const api = getInternalApi(state);\n    const _internal = {\n        components: {\n            Main\n        },\n        scrollBarHeight: api.getScrollBarHeight(2),\n        height: 0,\n        treeMap: {},\n        flatTreeMap: [],\n        flatTreeMapById: {},\n        list: {\n            expandedHeight: 0,\n            visibleRows: [],\n            rows: {},\n            width: 0\n        },\n        dimensions: {\n            width: 0,\n            height: 0\n        },\n        chart: {\n            dimensions: {\n                width: 0,\n                innerWidth: 0\n            },\n            visibleItems: [],\n            time: {\n                levels: [],\n                timePerPixel: 0,\n                firstTaskTime: 0,\n                lastTaskTime: 0,\n                totalViewDurationMs: 0,\n                totalViewDurationPx: 0,\n                leftGlobal: 0,\n                rightGlobal: 0,\n                leftPx: 0,\n                rightPx: 0,\n                leftInner: 0,\n                rightInner: 0,\n                maxWidth: {}\n            }\n        },\n        elements: {},\n        cache: {\n            calendar: {}\n        },\n        loaded: {}\n    };\n    if (typeof options.debug === 'boolean' && options.debug) {\n        // @ts-ignore\n        window.state = state;\n    }\n    state.update('', oldValue => {\n        return {\n            config: oldValue.config,\n            _internal\n        };\n    });\n    // @ts-ignore\n    const vido = Vido(state, api);\n    api.setVido(vido);\n    const app = vido.createApp({ component: Main, props: {}, element: options.element });\n    const internalApi = app.vidoInstance.api;\n    return { state, app, api: internalApi };\n}\nGSTC.api = publicApi;\n\nexport default GSTC;\n//# sourceMappingURL=index.esm.js.map\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.$theme.layouts.page.base,{tag:\"component\"},[_c(_vm.$theme.layouts.view.list,{tag:\"component\"},[_c('GSTC',{attrs:{\"config\":_vm.config},on:{\"state\":_vm.onState}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"gstc\" ref=\"gstc\"></div>\n</template>\n\n<script>\nimport GSTC from \"gantt-schedule-timeline-calendar\";\nimport \"gantt-schedule-timeline-calendar/dist/style.css\";\n\nlet state, gstc;\n\nexport default {\n  name: \"GSTC\",\n  props: [\"config\"],\n  mounted() {\n    state = GSTC.api.stateFromConfig(this.config);\n    this.$emit(\"state\", state);\n    gstc = GSTC({\n      element: this.$refs.gstc,\n      state\n    });\n    this.$watch(\n      \"config\",\n      config => {\n        state.update(\"config\", current => {\n          if (current !== config) {\n            return GSTC.api.mergeDeep({}, current, config);\n          } else {\n            return current;\n          }\n        });\n      },\n      { deep: true }\n    );\n  },\n  destroyed() {\n    gstc.app.destroy();\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"gstc\",staticClass:\"gstc\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--12-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--0-0!../../../vue-loader/lib/index.js??vue-loader-options!./GSTC.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--12-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--0-0!../../../vue-loader/lib/index.js??vue-loader-options!./GSTC.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GSTC.vue?vue&type=template&id=32eb261c&\"\nimport script from \"./GSTC.vue?vue&type=script&lang=js&\"\nexport * from \"./GSTC.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <component :is='$theme.layouts.page.base'>\n    <component :is='$theme.layouts.view.list'>\n      <GSTC :config='config' @state='onState' />\n    </component>\n  </component>\n</template>\n\n<script>\nimport GSTC from 'vue-gantt-schedule-timeline-calendar'\nconst subs = []\n\nexport default {\n  name: 'app',\n  components: {\n    GSTC\n  },\n  data () {\n    return {\n      config: {\n        height: 300,\n        list: {\n          rows: {\n            1: {\n              id: '1',\n              label: 'Row 1'\n            },\n            2: {\n              id: '2',\n              label: 'Row 2'\n            },\n            3: {\n              id: '3',\n              label: 'Row 3'\n            },\n            4: {\n              id: '4',\n              label: 'Row 4'\n            }\n          },\n          columns: {\n            data: {\n              id: {\n                id: 'id',\n                data: 'id',\n                width: 50,\n                header: {\n                  content: 'ID'\n                }\n              },\n              label: {\n                id: 'label',\n                data: 'label',\n                width: 200,\n                header: {\n                  content: 'Label'\n                }\n              }\n            }\n          }\n        },\n        chart: {\n          items: {\n            1: {\n              id: '1',\n              rowId: '1',\n              label: 'Item 1',\n              time: {\n                start: new Date().getTime(),\n                end: new Date().getTime() + 24 * 60 * 60 * 1000\n              }\n            },\n            2: {\n              id: '2',\n              rowId: '2',\n              label: 'Item 2',\n              time: {\n                start: new Date().getTime() + 4 * 24 * 60 * 60 * 1000,\n                end: new Date().getTime() + 5 * 24 * 60 * 60 * 1000\n              }\n            },\n            3: {\n              id: '3',\n              rowId: '2',\n              label: 'Item 3',\n              time: {\n                start: new Date().getTime() + 6 * 24 * 60 * 60 * 1000,\n                end: new Date().getTime() + 7 * 24 * 60 * 60 * 1000\n              }\n            },\n            4: {\n              id: '4',\n              rowId: '3',\n              label: 'Item 4',\n              time: {\n                start: new Date().getTime() + 10 * 24 * 60 * 60 * 1000,\n                end: new Date().getTime() + 12 * 24 * 60 * 60 * 1000\n              }\n            },\n            5: {\n              id: '5',\n              rowId: '4',\n              label: 'Item 5',\n              time: {\n                start: new Date().getTime() + 12 * 24 * 60 * 60 * 1000,\n                end: new Date().getTime() + 14 * 24 * 60 * 60 * 1000\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    onState (state) {\n      this.state = state\n      subs.push(\n        state.subscribe('config.chart.items.1', item => {\n          // console.log('item 1 changed', item)\n        })\n      )\n      subs.push(\n        state.subscribe('config.list.rows.1', row => {\n          // console.log('row 1 changed', row)\n        })\n      )\n    }\n  },\n  mounted () {\n    setTimeout(() => {\n      const item1 = this.config.chart.items['1']\n      item1.label = 'label changed dynamically'\n      item1.time.end += 2 * 24 * 60 * 60 * 1000\n    }, 2000)\n  },\n  beforeDestroy () {\n    subs.forEach(unsub => unsub())\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelineList.vue?vue&type=template&id=b15c44cc&\"\nimport script from \"./TimelineList.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelineList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}